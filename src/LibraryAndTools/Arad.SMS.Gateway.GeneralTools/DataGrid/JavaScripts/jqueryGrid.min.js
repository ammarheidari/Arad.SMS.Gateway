/**
*
* @license Guriddo jqGrid JS - v4.8.2 - 2015-03-24
* Copyright(c) 2008, Tony Tomov, tony@trirand.com
* 
* License: http://guriddo.net/?page_id=103334
*/
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function($){"use strict";function k(n,t){var i,r,u=[],f;if(!this||typeof n!="function"||n instanceof RegExp)throw new TypeError;for(f=this.length,i=0;i<f;i++)if(this.hasOwnProperty(i)&&(r=this[i],n.call(t,r,i,this))){u.push(r);break}return u}var n,v;$.jgrid=$.jgrid||{};$.jgrid.hasOwnProperty("defaults")||($.jgrid.defaults={});$.extend($.jgrid,{version:"4.8.2",htmlDecode:function(n){return n&&(n==="&nbsp;"||n==="&#160;"||n.length===1&&n.charCodeAt(0)===160)?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},template:function(n){var i=$.makeArray(arguments).slice(1),t,r=i.length;return n==null&&(n=""),n.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(n,u){if(!isNaN(parseInt(u,10)))return i[parseInt(u,10)];for(t=0;t<r;t++)if($.isArray(i[t]))for(var f=i[t],e=f.length;e--;)if(u===f[e].nm)return f[e].v})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var n=-1,t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return i.exec(t)!=null&&(n=parseFloat(RegExp.$1)),n},getCellIndex:function(n){var t=$(n);return t.is("tr")?-1:(t=(!t.is("td")&&!t.is("th")?t.closest("td,th"):t)[0],$.jgrid.msie)?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(n){n=String(n);return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stripPref:function(n,t){var i=$.type(n);return(i==="string"||i==="number")&&(n=String(n),t=n!==""?String(t).replace(String(n),""):t),t},parse:function(jsonString){var js=jsonString;return js.substr(0,9)==="while(1);"&&(js=js.substr(9)),js.substr(0,2)==="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(n,t,i,r){var it=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),c=typeof t=="string"?t.match(it):null,h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},u={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f=0,o,e,g,nt=function(n,t){return n===0?t===12&&(t=0):t!==12&&(t+=12),t},s=0,a;if(r===undefined&&(r=$.jgrid.getRegional(this,"formatter.date")),r.parseRe===undefined&&(r.parseRe=/[#%\\\/:_;.,\t\s-]/),r.masks.hasOwnProperty(n)&&(n=r.masks[n]),t&&t!=null)if(isNaN(+t)||String(n).toLowerCase()!=="u")if(t.constructor===Date)f=t;else if(c!==null)f=new Date(parseInt(c[1],10)),c[3]&&(s=Number(c[5])*60+Number(c[6]),s*=c[4]==="-"?1:-1,s-=f.getTimezoneOffset(),f.setTime(Number(Number(f)+s*6e4)));else{for(r.srcformat==="ISO8601Long"&&t.charAt(t.length-1)==="Z"&&(s-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),n=n.replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),e=0,g=n.length;e<g;e++){switch(n[e]){case"M":o=$.inArray(t[e],r.monthNames);o!==-1&&o<12&&(t[e]=o+1,u.m=t[e]);break;case"F":o=$.inArray(t[e],r.monthNames,12);o!==-1&&o>11&&(t[e]=o+1-12,u.m=t[e]);break;case"n":n[e]="m";break;case"j":n[e]="d";break;case"a":o=$.inArray(t[e],r.AmPm);o!==-1&&o<2&&t[e]===r.AmPm[o]&&(t[e]=o,u.h=nt(t[e],u.h));break;case"A":o=$.inArray(t[e],r.AmPm);o!==-1&&o>1&&t[e]===r.AmPm[o]&&(t[e]=o-2,u.h=nt(t[e],u.h));break;case"g":u.h=parseInt(t[e],10)}t[e]!==undefined&&(u[n[e].toLowerCase()]=parseInt(t[e],10))}if(u.f&&(u.m=u.f),u.m===0&&u.y===0&&u.d===0)return"&#160;";u.m=parseInt(u.m,10)-1;a=u.y;a>=70&&a<=99?u.y=1900+u.y:a>=0&&a<=69&&(u.y=2e3+u.y);f=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);s>0&&f.setTime(Number(Number(f)+s*6e4))}else f=new Date(parseFloat(t)*1e3);else f=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);if(r.userLocalTime&&s===0&&(s-=(new Date).getTimezoneOffset(),s>0&&f.setTime(Number(Number(f)+s*6e4))),i===undefined)return f;r.masks.hasOwnProperty(i)?i=r.masks[i]:i||(i="Y-m-d");var l=f.getHours(),rt=f.getMinutes(),p=f.getDate(),v=f.getMonth()+1,k=f.getTimezoneOffset(),ut=f.getSeconds(),ft=f.getMilliseconds(),w=f.getDay(),y=f.getFullYear(),b=(w+6)%7+1,d=(new Date(y,v-1,p)-new Date(y,0,1))/864e5,tt={d:h(p),D:r.dayNames[w],j:p,l:r.dayNames[w+7],N:b,S:r.S(p),w:w,z:d,W:b<5?Math.floor((d+b-1)/7)+1:Math.floor((d+b-1)/7)||((new Date(y-1,0,1).getDay()+6)%7<4?53:52),F:r.monthNames[v- -11],m:h(v),M:r.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:y,y:String(y).substring(2),a:l<12?r.AmPm[0]:r.AmPm[1],A:l<12?r.AmPm[2]:r.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(rt),s:h(ut),u:ft,e:"?",I:"?",O:(k>0?"-":"+")+h(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),P:"?",T:(String(f).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1e3)};return i.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return tt.hasOwnProperty(n)?tt[n]:n.substring(1)})},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(n){return(n||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},getXmlData:function(n,t,i){var u,r=typeof t=="string"?t.match(/^(.*)\[(\w+)\]$/):null;return typeof t=="function"?t(n):r&&r[2]?r[1]?$(r[1],n).attr(r[2]):$(n).attr(r[2]):(u=$(t,n),i)?u:u.length>0?$(u).text():undefined},cellWidth:function(){var n=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'><\/td><\/tr><\/table><\/div>"),t=n.appendTo("body").find("td").width();return n.remove(),Math.abs(t-5)>.1},isLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}},getRegional:function(n,t,i){var r;return i!==undefined?i:(n.p&&n.p.regional&&$.jgrid.regional&&(r=$.jgrid.getAccessor($.jgrid.regional[n.p.regional]||{},t)),r===undefined&&(r=$.jgrid.getAccessor($.jgrid,t)),r)},cell_width:!0,ajaxOptions:{},from:function(n){var t=this,i=function(n,i){typeof n=="string"&&(n=$.data(n));var r=this,u=n,h=!0,o=!1,f=i,v=/[\$,%]/g,c=null,y=null,p=0,e=!1,a="",s=[],l=!0;if(typeof n=="object"&&n.push)n.length>0&&(l=typeof n[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return u===null?!1:u.length===0?!1:!0},this._getStr=function(n){var t=[];return o&&t.push("jQuery.trim("),t.push("String("+n+")"),o&&t.push(")"),h||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(n){return o&&(n=$.trim(n)),n=n.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),h?n:n.toLowerCase()},this._funcLoop=function(n){var t=[];return $.each(u,function(i,r){t.push(n(r))}),t},this._append=function(n){var t;for(f===null?f="":f+=a===""?" && ":a,t=0;t<p;t++)f+="(";e&&(f+="!");f+="("+n+")";e=!1;a="";p=0},this._setCommand=function(n,t){c=n;y=t},this._resetNegate=function(){e=!1},this._repeatCommand=function(n,t){return c===null?r:n!==null&&t!==null?c(n,t):y===null?c(n):l?c(y,n):c(n)},this._equals=function(n,t){return r._compare(n,t,1)===0},this._compare=function(n,t,i){var r=Object.prototype.toString;return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:r.call(n)==="[object Date]"&&r.call(t)==="[object Date]"?n<t?-i:n>t?i:0:(h||typeof n=="number"||typeof t=="number"||(n=String(n),t=String(t)),n<t)?-i:n>t?i:0},this._performSort=function(){s.length!==0&&(u=r._doSort(u,0))},this._doSort=function(n,t){var h=s[t].by,c=s[t].dir,l=s[t].type,a=s[t].datefmt,v=s[t].sfunc,f,e,i,u,o;if(t===s.length-1)return r._getOrder(n,h,c,l,a,v);for(t++,f=r._getGroup(n,h,c,l,a),e=[],i=0;i<f.length;i++)for(o=r._doSort(f[i].items,t),u=0;u<o.length;u++)e.push(o[u]);return e},this._getOrder=function(n,i,u,f,e,o){var a=[],c=[],y=u==="a"?1:-1,p,s,l,w,b;for(f===undefined&&(f="text"),w=f==="float"||f==="number"||f==="currency"||f==="numeric"?function(n){var t=parseFloat(String(n).replace(v,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:f==="int"||f==="integer"?function(n){return n?parseFloat(String(n).replace(v,"")):Number.NEGATIVE_INFINITY}:f==="date"||f==="datetime"?function(n){return $.jgrid.parseDate.call(t,e,n).getTime()}:$.isFunction(f)?f:function(n){return n=n?$.trim(String(n)):"",h?n:n.toLowerCase()},$.each(n,function(n,t){s=i!==""?$.jgrid.getAccessor(t,i):t;s===undefined&&(s="");s=w(s,t);c.push({vSort:s,index:n})}),$.isFunction(o)?c.sort(function(n,t){return n=n.vSort,t=t.vSort,o.call(this,n,t,y)}):c.sort(function(n,t){return n=n.vSort,t=t.vSort,r._compare(n,t,y)}),l=0,b=n.length;l<b;)p=c[l].index,a.push(n[p]),l++;return a},this._getGroup=function(n,t,i,u,f){var s=[],e=null,h=null,o;return $.each(r._getOrder(n,t,i,u,f),function(n,i){o=$.jgrid.getAccessor(i,t);o==null&&(o="");r._equals(h,o)||(h=o,e!==null&&s.push(e),e=r._group(t,o));e.items.push(i)}),e!==null&&s.push(e),s},this.ignoreCase=function(){return h=!1,r},this.useCase=function(){return h=!0,r},this.trim=function(){return o=!0,r},this.noTrim=function(){return o=!1,r},this.execute=function(){var match=f,results=[];return match===null?r:($.each(u,function(){eval(match)&&results.push(this)}),u=results,r)},this.data=function(){return u},this.select=function(n){if(r._performSort(),!r._hasData())return[];if(r.execute(),$.isFunction(n)){var t=[];return $.each(u,function(i,r){t.push(n(r))}),t}return u},this.hasMatch=function(){return r._hasData()?(r.execute(),u.length>0):!1},this.andNot=function(n,t,i){return e=!e,r.and(n,t,i)},this.orNot=function(n,t,i){return e=!e,r.or(n,t,i)},this.not=function(n,t,i){return r.andNot(n,t,i)},this.and=function(n,t,i){return(a=" && ",n===undefined)?r:r._repeatCommand(n,t,i)},this.or=function(n,t,i){return(a=" || ",n===undefined)?r:r._repeatCommand(n,t,i)},this.orBegin=function(){return p++,r},this.orEnd=function(){return f!==null&&(f+=")"),r},this.isNot=function(n){return e=!e,r.is(n)},this.is=function(n){return r._append("this."+n),r._resetNegate(),r},this._compareValues=function(n,i,u,f,e){var s,o,h;if(s=l?"jQuery.jgrid.getAccessor(this,'"+i+"')":"this",u===undefined&&(u=null),o=u,h=e.stype===undefined?"text":e.stype,u!==null)switch(h){case"int":case"integer":o=isNaN(Number(o))||o===""?"0":o;s="parseInt("+s+",10)";o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(v,"");o=isNaN(Number(o))||o===""?"0":o;s="parseFloat("+s+")";o="parseFloat("+o+")";break;case"date":case"datetime":o=String($.jgrid.parseDate.call(t,e.srcfmt||"Y-m-d",o).getTime());s='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID(t.p.id)+'")[0],"'+e.srcfmt+'",'+s+").getTime()";break;default:s=r._getStr(s);o=r._getStr('"'+r._toStr(o)+'"')}return r._append(s+" "+f+" "+o),r._setCommand(n,i),r._resetNegate(),r},this.equals=function(n,t,i){return r._compareValues(r.equals,n,t,"==",i)},this.notEquals=function(n,t,i){return r._compareValues(r.equals,n,t,"!==",i)},this.isNull=function(n,t,i){return r._compareValues(r.equals,n,null,"===",i)},this.greater=function(n,t,i){return r._compareValues(r.greater,n,t,">",i)},this.less=function(n,t,i){return r._compareValues(r.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return r._compareValues(r.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return r._compareValues(r.lessOrEquals,n,t,"<=",i)},this.startsWith=function(n,t){var u=t==null?n:t,i=o?$.trim(u.toString()).length:u.toString().length;return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr(0,"+i+") == "+r._getStr('"'+r._toStr(t)+'"')):(t!=null&&(i=o?$.trim(t.toString()).length:t.toString().length),r._append(r._getStr("this")+".substr(0,"+i+") == "+r._getStr('"'+r._toStr(n)+'"'))),r._setCommand(r.startsWith,n),r._resetNegate(),r},this.endsWith=function(n,t){var i=t==null?n:t,u=o?$.trim(i.toString()).length:i.toString().length;return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr("+r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".length-"+u+","+u+') == "'+r._toStr(t)+'"'):r._append(r._getStr("this")+".substr("+r._getStr("this")+'.length-"'+r._toStr(n)+'".length,"'+r._toStr(n)+'".length) == "'+r._toStr(n)+'"'),r._setCommand(r.endsWith,n),r._resetNegate(),r},this.contains=function(n,t){return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+r._toStr(t)+'",0) > -1'):r._append(r._getStr("this")+'.indexOf("'+r._toStr(n)+'",0) > -1'),r._setCommand(r.contains,n),r._resetNegate(),r},this.groupBy=function(n,t,i,f){return r._hasData()?r._getGroup(u,n,t,i,f):null},this.orderBy=function(n,t,i,u,f){return t=t==null?"a":$.trim(t.toString().toLowerCase()),i==null&&(i="text"),u==null&&(u="Y-m-d"),f==null&&(f=!1),(t==="desc"||t==="descending")&&(t="d"),(t==="asc"||t==="ascending")&&(t="a"),s.push({by:n,dir:t,type:i,datefmt:u,sfunc:f}),r},r};return new i(n,null)},getMethod:function(n){return this.getAccessor($.fn.jqGrid,n)},extend:function(n){$.extend($.fn.jqGrid,n);this.no_legacy_api||$.fn.extend(n)},clearBeforeUnload:function(n){var i=$("#"+$.jgrid.jqID(n))[0],r,t,f,u;if(i.grid){for(r=i.grid,$.isFunction(r.emptyRows)&&r.emptyRows.call(i,!0,!0),$(document).unbind("mouseup.jqGrid"+i.p.id),$(r.hDiv).unbind("mousemove"),$(i).unbind(),f=r.headers.length,u=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p"],t=0;t<f;t++)r.headers[t].el=null;for(t in r)r.hasOwnProperty(t)&&(r[t]=null);for(t in i.p)i.p.hasOwnProperty(t)&&(i.p[t]=$.isArray(i.p[t])?[]:null);for(f=u.length,t=0;t<f;t++)i.hasOwnProperty(u[t])&&(i[u[t]]=null,delete i[u[t]])}},gridUnload:function(n){var t,u,r,i;n&&(n=$.trim(n),n.indexOf("#")===0&&(n=n.substring(1)),t=$("#"+$.jgrid.jqID(n))[0],t.grid)&&(u={id:$(t).attr("id"),cl:$(t).attr("class")},t.p.pager&&$(t.p.pager).unbind().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),r=document.createElement("table"),r.className=u.cl,i=$.jgrid.jqID(t.id),$(r).removeClass("ui-jqgrid-btable").insertBefore("#gbox_"+i),$(t.p.pager).parents("#gbox_"+i).length===1&&$(t.p.pager).insertBefore("#gbox_"+i),$.jgrid.clearBeforeUnload(n),$("#gbox_"+i).remove(),$(r).attr({id:u.id}),$("#alertmod_"+$.jgrid.jqID(n)).remove())},gridDestroy:function(n){if(n){n=$.trim(n);n.indexOf("#")===0&&(n=n.substring(1));var t=$("#"+$.jgrid.jqID(n))[0];if(t.grid){t.p.pager&&$(t.p.pager).remove();try{$.jgrid.clearBeforeUnload(n);$("#gbox_"+$.jgrid.jqID(n)).remove()}catch(i){}}}}});$.fn.jqGrid=function(n){var t,i;if(typeof n=="string"){if(t=$.jgrid.getMethod(n),!t)throw"jqGrid - No such method: "+n;return i=$.makeArray(arguments).slice(1),t.apply(this,i)}return this.each(function(){var ot,r,t,i,u,s,v,pt,p,ki,ut,k,ti,ft,ii,et,o,l,ri,yt,gi;if(!this.grid){if(n!=null&&n.data!==undefined&&(ot=n.data,n.data=[]),r=$.extend(!0,{url:"",serializeObject:"123",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{serializeObject:"serializeObject",c:"c",page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:!1,regional:"en"},$.jgrid.defaults,n),ot!==undefined&&(r.data=ot,n.data=ot),t=this,i={headers:[],cols:[],footers:[],dragStart:function(n,i,u){var f=$(this.bDiv).offset().left;this.resizing={idx:n,startX:i.pageX,sOL:i.pageX-f};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(r.id),"#gbox_"+$.jgrid.jqID(r.id));this.curGbox.css({display:"block",left:i.pageX-f,top:u[1],height:u[2]});$(t).triggerHandler("jqGridResizeStart",[i,n]);$.isFunction(r.resizeStart)&&r.resizeStart.call(t,i,n);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.pageX-this.resizing.startX,i=this.headers[this.resizing.idx],f=r.direction==="ltr"?i.width+t:i.width-t,u,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),r.forceFit===!0?(u=this.headers[this.resizing.idx+r.nv],e=r.direction==="ltr"?u.width-t:u.width+t,e>r.minColWidth&&(i.newWidth=f,u.newWidth=e)):(this.newWidth=r.direction==="ltr"?r.tblwidth+t:r.tblwidth-t,i.newWidth=f))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var n=this.resizing.idx,i=this.headers[n].newWidth||this.headers[n].width;i=parseInt(i,10);this.resizing=!1;$("#rs_m"+$.jgrid.jqID(r.id)).css("display","none");r.colModel[n].width=i;this.headers[n].width=i;this.headers[n].el.style.width=i+"px";this.cols[n].style.width=i+"px";this.footers.length>0&&(this.footers[n].style.width=i+"px");r.forceFit===!0?(i=this.headers[n+r.nv].newWidth||this.headers[n+r.nv].width,this.headers[n+r.nv].width=i,this.headers[n+r.nv].el.style.width=i+"px",this.cols[n+r.nv].style.width=i+"px",this.footers.length>0&&(this.footers[n+r.nv].style.width=i+"px"),r.colModel[n+r.nv].width=i):(r.tblwidth=this.newWidth||r.tblwidth,$("table:first",this.bDiv).css("width",r.tblwidth+"px"),$("table:first",this.hDiv).css("width",r.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,r.footerrow&&($("table:first",this.sDiv).css("width",r.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));$(t).triggerHandler("jqGridResizeStop",[i,n]);$.isFunction(r.resizeStop)&&r.resizeStop.call(t,i,n)}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var s,n,a,e;if(i.timer&&clearTimeout(i.timer),i.timer=null,s=$(i.bDiv).height(),s){if(n=$("table:first",i.bDiv),n[0].rows.length)try{a=n[0].rows[1];e=a?$(a).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(p){e=i.prevRowHeight}if(e){i.prevRowHeight=e;var y=r.rowNum,o=i.scrollTop=i.bDiv.scrollTop,h=Math.round(n.position().top)-o,c=h+n.height(),u=e*y,f,l,v;if(c<s&&h<=0&&(r.lastpage===undefined||(parseInt((c+o+u-1)/u,10)||0)<=r.lastpage)&&(l=parseInt((s-c+u-1)/u,10)||1,c>=0||l<2||r.scroll===!0?(f=(Math.round((c+o)/u)||0)+1,h=-1):h=1),h>0&&(f=(parseInt(o/u,10)||0)+1,l=(parseInt((o+s)/u,10)||0)+2-f,v=!0),l){if(r.lastpage&&(f>r.lastpage||r.lastpage===1||f===r.page&&f===r.lastpage))return;i.hDiv.loading?i.timer=setTimeout(i.populateVisible,r.scrollTimeout):(r.page=f,v&&(i.selectionPreserver(n[0]),i.emptyRows.call(n[0],!1,!1)),i.populate(l));r.scrollPopUp&&r.lastpage!=null&&($("#scroll_g"+r.id).show().html($.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",r.pgtext),r.page,r.lastpage)).css({top:r.scrollTopOffset+o*((parseInt(r.height,10)-45)/(parseInt(e,10)*parseInt(r.records,10)))+"px",left:r.scrollLeftOffset}),$(this).mouseout(function(){$("#scroll_g"+r.id).hide()}))}}}},scrollGrid:function(n){if(r.scroll){var t=i.bDiv.scrollTop;i.scrollTop===undefined&&(i.scrollTop=0);t!==i.scrollTop&&(i.scrollTop=t,i.timer&&clearTimeout(i.timer),i.timer=setTimeout(i.populateVisible,r.scrollTimeout))}i.hDiv.scrollLeft=i.bDiv.scrollLeft;r.footerrow&&(i.sDiv.scrollLeft=i.bDiv.scrollLeft);n&&n.stopPropagation()},selectionPreserver:function(n){var t=n.p,r=t.selrow,i=t.selarrrow?$.makeArray(t.selarrrow):null,f=n.grid.bDiv.scrollLeft,u=function(){var e;if(t.selrow=null,t.selarrrow=[],t.multiselect&&i&&i.length>0)for(e=0;e<i.length;e++)i[e]!==r&&$(n).jqGrid("setSelection",i[e],!1,null);r&&$(n).jqGrid("setSelection",r,!1,null);n.grid.bDiv.scrollLeft=f;$(n).unbind(".selectionPreserver",u)};$(n).bind("jqGridGridComplete.selectionPreserver",u)}},this.tagName.toUpperCase()!=="TABLE"||this.id==null){alert("Element is not a table or has no id!");return}if(document.documentMode!==undefined&&document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}if($(this).empty().attr("tabindex","0"),this.p=r,this.p.useProp=!!$.fn.prop,this.p.colNames.length===0)for(u=0;u<this.p.colModel.length;u++)this.p.colNames[u]=this.p.colModel[u].label||this.p.colModel[u].name;if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.getRegional(this,"errors.model"));return}v=$("<div class='ui-jqgrid-view' role='grid'><\/div>");pt=$.jgrid.msie;t.p.direction=$.trim(t.p.direction.toLowerCase());t.p._ald=!1;$.inArray(t.p.direction,["ltr","rtl"])===-1&&(t.p.direction="ltr");s=t.p.direction;$(v).insertBefore(this);$(this).removeClass("scroll").appendTo(v);p=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'><\/div>");$(p).attr({id:"gbox_"+this.id,dir:s}).insertBefore(v);$(v).attr("id","gview_"+this.id).appendTo(p);$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'><\/div>").insertBefore(v);$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+$.jgrid.getRegional(t,"defaults.loadtext",this.p.loadtext)+"<\/div>").insertBefore(v);$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var h=function(n,t){return(n=parseInt(n,10),isNaN(n))?t||0:n},g=function(n,r,u,f,e,o){var s=t.p.colModel[n],v,y=s.align,c='style="',a=s.classes,p=s.name,l,h=[];return y&&(c+="text-align:"+y+";"),s.hidden===!0&&(c+="display:none;"),r===0?c+="width: "+i.headers[n].width+"px;":($.isFunction(s.cellattr)||typeof s.cellattr=="string"&&$.jgrid.cellattr!=null&&$.isFunction($.jgrid.cellattr[s.cellattr]))&&(v=$.isFunction(s.cellattr)?s.cellattr:$.jgrid.cellattr[s.cellattr],l=v.call(t,e,u,f,s,o),l&&typeof l=="string"&&(l=l.replace(/style/i,"style").replace(/title/i,"title"),l.indexOf("title")>-1&&(s.title=!1),l.indexOf("class")>-1&&(a=undefined),h=l.replace(/\-style/g,"-sti").split(/style/),h.length===2?(h[1]=$.trim(h[1].replace(/\-sti/g,"-style").replace("=","")),(h[1].indexOf("'")===0||h[1].indexOf('"')===0)&&(h[1]=h[1].substring(1)),c+=h[1].replace(/'/gi,'"')):c+='"')),h.length||(h[0]="",c+='"'),c+=(a!==undefined?' class="'+a+'"':"")+(s.title&&u?' title="'+$.jgrid.stripHtml(u)+'"':""),c+=' aria-describedby="'+t.p.id+"_"+p+'"',c+h[0]},ui=function(n){return n==null||n===""?"&#160;":t.p.autoencode?$.jgrid.htmlEncode(n):String(n)},fi=function(n,i,r,u,f){var e=t.p.colModel[r],o,s;return e.formatter!==undefined?(n=String(t.p.idPrefix)!==""?$.jgrid.stripPref(t.p.idPrefix,n):n,s={rowId:n,colModel:e,gid:t.p.id,pos:r},o=$.isFunction(e.formatter)?e.formatter.call(t,i,s,u,f):$.fmatter?$.fn.fmatter.call(t,e.formatter,i,s,u,f):ui(i)):o=ui(i),o},wt=function(n,t,i,r,u,f){var e,o;return e=fi(n,t,i,u,"add"),o=g(i,r,e,u,n,f),'<td role="gridcell" '+o+">"+e+"<\/td>"},ei=function(n,i,r,u){var f='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+n+'" class="cbox" name="jqg_'+t.p.id+"_"+n+'"'+(u?'checked="checked"':"")+"/>",e=g(i,r,"",null,n,!0);return'<td role="gridcell" '+e+">"+f+"<\/td>"},oi=function(n,t,i,r){var u=(parseInt(i,10)-1)*parseInt(r,10)+1+t,f=g(n,t,u,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+u+"<\/td>"},bt=function(n){for(var i,u=[],f=0,r=0;r<t.p.colModel.length;r++)i=t.p.colModel[r],i.name!=="cb"&&i.name!=="subgrid"&&i.name!=="rn"&&(u[f]=n==="local"?i.name:n==="xml"||n==="xmlstring"?i.xmlmap||i.name:i.jsonmap||i.name,t.p.keyName!==!1&&i.key===!0&&(t.p.keyName=u[f]),f++);return u},st=function(n){var i=t.p.remapColumns;return i&&i.length||(i=$.map(t.p.colModel,function(n,t){return t})),n&&(i=$.map(i,function(t){return t<n?null:t-n})),i},nt=function(n,t){var i;this.p.deepempty?$(this.rows).slice(1).remove():(i=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(i));n&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),this.grid.bDiv.scrollTop!==0&&(this.grid.bDiv.scrollTop=0));t===!0&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},si=function(){var n=t.p,h=n.data,k=h.length,f,o,i,u,r,s,p,c,e=n.localReader,v=n.colModel,l=e.cell,a=(n.multiselect===!0?1:0)+(n.subGrid===!0?1:0)+(n.rownumbers===!0?1:0),d=n.scroll?$.jgrid.randId():1,w,b,y;if(n.datatype==="local"&&e.repeatitems===!0)for(w=st(a),b=bt("local"),u=n.keyIndex===!1?$.isFunction(e.id)?e.id.call(t,h):e.id:n.keyIndex,f=0;f<k;f++){for(i=h[f],r=$.jgrid.getAccessor(i,u),r===undefined&&(typeof u=="number"&&v[u+a]!=null&&(r=$.jgrid.getAccessor(i,v[u+a].name)),r===undefined&&(r=d+f,l&&(s=$.jgrid.getAccessor(i,l)||i,r=s!=null&&s[u]!==undefined?s[u]:r,s=null))),c={},c[e.id]=r,l&&(i=$.jgrid.getAccessor(i,l)||i),y=$.isArray(i)?w:b,o=0;o<y.length;o++)p=$.jgrid.getAccessor(i,y[o]),c[v[o+a].name]=p;$.extend(!0,h[f],c)}},kt=function(){var u=t.p.data.length,r,n,i;for(r=t.p.keyName===!1||t.p.loadonce===!0?t.p.localReader.id:t.p.keyName,t.p._index=[],n=0;n<u;n++)i=$.jgrid.getAccessor(t.p.data[n],r),i===undefined&&(i=String(n+1)),t.p._index[i]=n},dt=function(n,i,r,u,f,e){var c="-1",l="",s,h=i?"display:none;":"",a="ui-widget-content jqgrow ui-row-"+t.p.direction+(r?" "+r:"")+(e?" ui-state-highlight":""),o=$(t).triggerHandler("jqGridRowAttr",[u,f,n]);if(typeof o!="object"&&(o=$.isFunction(t.p.rowattr)?t.p.rowattr.call(t,u,f,n):typeof t.p.rowattr=="string"&&$.jgrid.rowattr!=null&&$.isFunction($.jgrid.rowattr[t.p.rowattr])?$.jgrid.rowattr[t.p.rowattr].call(t,u,f,n):{}),!$.isEmptyObject(o)){o.hasOwnProperty("id")&&(n=o.id,delete o.id);o.hasOwnProperty("tabindex")&&(c=o.tabindex,delete o.tabindex);o.hasOwnProperty("style")&&(h+=o.style,delete o.style);o.hasOwnProperty("class")&&(a+=" "+o["class"],delete o["class"]);try{delete o.role}catch(v){}for(s in o)o.hasOwnProperty(s)&&(l+=" "+s+"="+o[s])}return'<tr role="row" id="'+n+'" tabindex="'+c+'" class="'+a+'"'+(h===""?"":' style="'+h+'"')+l+">"},gt=function(n,i,r,u){var ri=new Date,rt=t.p.datatype!=="local"&&t.p.loadonce||t.p.datatype==="xmlstring",ut="_id_",e=t.p.xmlReader,ui=t.p.datatype==="local"?"local":"xml",d,gt,lt,at,ni,ti,ii;if(rt&&(t.p.data=[],t.p._index={},t.p.localReader.id=ut),t.p.reccount=0,$.isXMLDoc(n))t.p.treeANode!==-1||t.p.scroll?i=i>1?i:1:(nt.call(t,!1,!0),i=1);else return;var k=$(t),a,ft,p=0,w,v=t.p.multiselect===!0?1:0,b=0,vt,l=t.p.rownumbers===!0?1:0,et,ct,tt=[],it,f={},c,s,o=[],fi=t.p.altRows===!0?t.p.altclass:"",yt;t.p.subGrid===!0&&(b=1,vt=$.jgrid.getMethod("addSubGridCell"));e.repeatitems||(tt=bt(ui));et=t.p.keyName===!1?$.isFunction(e.id)?e.id.call(t,n):e.id:t.p.keyName;ct=String(et).indexOf("[")===-1?tt.length?function(n,t){return $(et,n).text()||t}:function(n,t){return $(e.cell,n).eq(et).text()||t}:function(n,t){return n.getAttribute(et.replace(/[\[\]]/g,""))||t};t.p.userData={};t.p.page=h($.jgrid.getXmlData(n,e.page),t.p.page);t.p.lastpage=h($.jgrid.getXmlData(n,e.total),1);t.p.records=h($.jgrid.getXmlData(n,e.records));$.isFunction(e.userdata)?t.p.userData=e.userdata.call(t,n)||{}:$.jgrid.getXmlData(n,e.userdata,!0).each(function(){t.p.userData[this.getAttribute("name")]=$(this).text()});d=$.jgrid.getXmlData(n,e.root,!0);d=$.jgrid.getXmlData(d,e.row,!0);d||(d=[]);var g=d.length,y=0,ot=[],ht=parseInt(t.p.rowNum,10),pt=t.p.scroll?$.jgrid.randId():1,kt;if(g>0&&t.p.page<=0&&(t.p.page=1),d&&g)for(u&&(ht*=u+1),gt=$.isFunction(t.p.afterInsertRow),lt=!1,t.p.grouping&&(lt=t.p.groupingView.groupCollapse===!0,at=$.jgrid.getMethod("groupingPrepare"));y<g;){if(c=d[y],s=ct(c,pt+y),s=t.p.idPrefix+s,kt=i===0?0:i+1,yt=(kt+y)%2==1?fi:"",ni=o.length,o.push(""),l&&o.push(oi(0,y,t.p.page,t.p.rowNum)),v&&o.push(ei(s,l,y,!1)),b&&o.push(vt.call(k,v+l,y+i)),e.repeatitems)it||(it=st(v+b+l)),ti=$.jgrid.getXmlData(c,e.cell,!0),$.each(it,function(n){var r=ti[this];if(!r)return!1;w=r.textContent||r.text;f[t.p.colModel[n+v+b+l].name]=w;o.push(wt(s,w,n+v+b+l,y+i,c,f))});else for(a=0;a<tt.length;a++)w=$.jgrid.getXmlData(c,tt[a]),f[t.p.colModel[a+v+b+l].name]=w,o.push(wt(s,w,a+v+b+l,y+i,c,f));if(o[ni]=dt(s,lt,yt,f,c,!1),o.push("<\/tr>"),t.p.grouping&&(ot.push(o),t.p.groupingView._locgr||at.call(k,f,y),o=[]),(rt||t.p.treeGrid===!0&&!t.p._ald)&&(f[ut]=$.jgrid.stripPref(t.p.idPrefix,s),t.p.data.push(f),t.p._index[f[ut]]=t.p.data.length-1),t.p.gridview===!1&&($("tbody:first",t.grid.bDiv).append(o.join("")),k.triggerHandler("jqGridAfterInsertRow",[s,f,c]),gt&&t.p.afterInsertRow.call(t,s,f,c),o=[]),f={},p++,y++,p===ht)break}if(t.p.gridview===!0&&(ft=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?rt||(k.jqGrid("groupingRender",ot,t.p.colModel.length,t.p.page,ht),ot=null):t.p.treeGrid===!0&&ft>0?$(t.rows[ft]).after(o.join("")):(t.firstElementChild?t.firstElementChild.innerHTML+=o.join(""):$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(o.join("")),t.grid.cols=t.rows[0].cells)),t.p.subGrid===!0)try{k.jqGrid("addSubGrid",v+l)}catch(si){}if(t.p.totaltime=new Date-ri,p>0&&t.p.records===0&&(t.p.records=g),o=null,t.p.treeGrid===!0)try{k.jqGrid("setTreeNode",ft+1,p+ft+1)}catch(hi){}if(t.p.reccount=p,t.p.treeANode=-1,t.p.userDataOnFooter&&k.jqGrid("footerData","set",t.p.userData,!0),rt&&(t.p.records=g,t.p.lastpage=Math.ceil(g/ht)),r||t.updatepager(!1,!0),rt){while(p<g){if(c=d[p],s=ct(c,p+pt),s=t.p.idPrefix+s,e.repeatitems)it||(it=st(v+b+l)),ii=$.jgrid.getXmlData(c,e.cell,!0),$.each(it,function(n){var i=ii[this];if(!i)return!1;w=i.textContent||i.text;f[t.p.colModel[n+v+b+l].name]=w});else for(a=0;a<tt.length;a++)w=$.jgrid.getXmlData(c,tt[a]),f[t.p.colModel[a+v+b+l].name]=w;f[ut]=$.jgrid.stripPref(t.p.idPrefix,s);t.p.grouping&&at.call(k,f,p);t.p.data.push(f);t.p._index[f[ut]]=t.p.data.length-1;f={};p++}t.p.grouping&&(t.p.groupingView._locgr=!0,k.jqGrid("groupingRender",ot,t.p.colModel.length,t.p.page,ht),ot=null)}},ht=function(n,i,r,u){var si=new Date,o,it,ct,rt,ot,fi,ht;if(n)t.p.treeANode!==-1||t.p.scroll?i=i>1?i:1:(nt.call(t,!1,!0),i=1);else return;it="_id_";rt=t.p.datatype!=="local"&&t.p.loadonce||t.p.datatype==="jsonstring";rt&&(t.p.data=[],t.p._index={},t.p.localReader.id=it);t.p.reccount=0;t.p.datatype==="local"?(o=t.p.localReader,ct="local"):(o=t.p.jsonReader,ct="json");var k=$(t),v=0,lt,y,p,yt=[],e,w=t.p.multiselect?1:0,b=t.p.subGrid===!0?1:0,pt,a=t.p.rownumbers===!0?1:0,kt=st(w+b+a),gt=bt(ct),g,tt,d,l,s={},ut,f,c=[],hi=t.p.altRows===!0?t.p.altclass:"",ni;t.p.page=h($.jgrid.getAccessor(n,o.page),t.p.page);t.p.lastpage=h($.jgrid.getAccessor(n,o.total),1);t.p.records=h($.jgrid.getAccessor(n,o.records));t.p.userData=$.jgrid.getAccessor(n,o.userdata)||{};b&&(pt=$.jgrid.getMethod("addSubGridCell"));l=t.p.keyName===!1?$.isFunction(o.id)?o.id.call(t,n):o.id:t.p.keyName;d=$.jgrid.getAccessor(n,o.root);d==null&&$.isArray(n)&&(d=n);d||(d=[]);tt=d.length;y=0;tt>0&&t.p.page<=0&&(t.p.page=1);var ft=parseInt(t.p.rowNum,10),ti=t.p.scroll?$.jgrid.randId():1,ii,ri=!1,at;u&&(ft*=u+1);t.p.datatype!=="local"||t.p.deselectAfterSort||(ri=!0);var ci=$.isFunction(t.p.afterInsertRow),et=[],ui=!1,vt;for(t.p.grouping&&(ui=t.p.groupingView.groupCollapse===!0,vt=$.jgrid.getMethod("groupingPrepare"));y<tt;){for(e=d[y],f=$.jgrid.getAccessor(e,l),f===undefined&&(typeof l=="number"&&t.p.colModel[l+w+b+a]!=null&&(f=$.jgrid.getAccessor(e,t.p.colModel[l+w+b+a].name)),f===undefined&&(f=ti+y,yt.length===0&&o.cell&&(ot=$.jgrid.getAccessor(e,o.cell)||e,f=ot!=null&&ot[l]!==undefined?ot[l]:f,ot=null))),f=t.p.idPrefix+f,ii=i===1?0:i,ni=(ii+y)%2==1?hi:"",ri&&(at=t.p.multiselect?$.inArray(f,t.p.selarrrow)!==-1:f===t.p.selrow),fi=c.length,c.push(""),a&&c.push(oi(0,y,t.p.page,t.p.rowNum)),w&&c.push(ei(f,a,y,at)),b&&c.push(pt.call(k,w+a,y+i)),g=gt,o.repeatitems&&(o.cell&&(e=$.jgrid.getAccessor(e,o.cell)||e),$.isArray(e)&&(g=kt)),p=0;p<g.length;p++)lt=$.jgrid.getAccessor(e,g[p]),s[t.p.colModel[p+w+b+a].name]=lt,c.push(wt(f,lt,p+w+b+a,y+i,e,s));if(c[fi]=dt(f,ui,ni,s,e,at),c.push("<\/tr>"),t.p.grouping&&(et.push(c),t.p.groupingView._locgr||vt.call(k,s,y),c=[]),(rt||t.p.treeGrid===!0&&!t.p._ald)&&(s[it]=$.jgrid.stripPref(t.p.idPrefix,f),t.p.data.push(s),t.p._index[s[it]]=t.p.data.length-1),t.p.gridview===!1&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(c.join("")),k.triggerHandler("jqGridAfterInsertRow",[f,s,e]),ci&&t.p.afterInsertRow.call(t,f,s,e),c=[]),s={},v++,y++,v===ft)break}if(t.p.gridview===!0&&(ut=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?rt||(k.jqGrid("groupingRender",et,t.p.colModel.length,t.p.page,ft),et=null):t.p.treeGrid===!0&&ut>0?$(t.rows[ut]).after(c.join("")):(t.firstElementChild?t.firstElementChild.innerHTML+=c.join(""):$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").append(c.join("")),t.grid.cols=t.rows[0].cells)),t.p.subGrid===!0)try{k.jqGrid("addSubGrid",w+a)}catch(li){}if(t.p.totaltime=new Date-si,v>0&&t.p.records===0&&(t.p.records=tt),c=null,t.p.treeGrid===!0)try{k.jqGrid("setTreeNode",ut+1,v+ut+1)}catch(ai){}if(t.p.reccount=v,t.p.treeANode=-1,t.p.userDataOnFooter&&k.jqGrid("footerData","set",t.p.userData,!0),rt&&(t.p.records=tt,t.p.lastpage=Math.ceil(tt/ft)),r||t.updatepager(!1,!0),rt){while(v<tt&&d[v]){if(e=d[v],f=$.jgrid.getAccessor(e,l),f===undefined&&(typeof l=="number"&&t.p.colModel[l+w+b+a]!=null&&(f=$.jgrid.getAccessor(e,t.p.colModel[l+w+b+a].name)),f===undefined&&(f=ti+v,yt.length===0&&o.cell&&(ht=$.jgrid.getAccessor(e,o.cell)||e,f=ht!=null&&ht[l]!==undefined?ht[l]:f,ht=null))),e){for(f=t.p.idPrefix+f,g=gt,o.repeatitems&&(o.cell&&(e=$.jgrid.getAccessor(e,o.cell)||e),$.isArray(e)&&(g=kt)),p=0;p<g.length;p++)s[t.p.colModel[p+w+b+a].name]=$.jgrid.getAccessor(e,g[p]);s[it]=$.jgrid.stripPref(t.p.idPrefix,f);t.p.grouping&&vt.call(k,s,v);t.p.data.push(s);t.p._index[s[it]]=t.p.data.length-1;s={}}v++}t.p.grouping&&(t.p.groupingView._locgr=!0,k.jqGrid("groupingRender",et,t.p.colModel.length,t.p.page,ft),et=null)}},nr=function(){function rt(r){var o=0,f,s,c,h,u,e;if(r.groups!=null){for(s=r.groups.length&&r.groupOp.toString().toUpperCase()==="OR",s&&n.orBegin(),f=0;f<r.groups.length;f++){o>0&&s&&n.or();try{rt(r.groups[f])}catch(l){alert(l)}o++}s&&n.orEnd()}if(r.rules!=null)try{for(c=r.rules.length&&r.groupOp.toString().toUpperCase()==="OR",c&&n.orBegin(),f=0;f<r.rules.length;f++)u=r.rules[f],h=r.groupOp.toString().toUpperCase(),w[u.op]&&u.field&&(o>0&&h&&h==="OR"&&(n=n.or()),e=i[u.field],e.stype==="date"&&e.srcfmt&&e.newfmt&&e.srcfmt!==e.newfmt&&(u.data=$.jgrid.parseDate.call(t,e.newfmt,u.data,e.srcfmt)),n=w[u.op](n,h)(u.field,u.data,i[u.field])),o++;c&&n.orEnd()}catch(a){alert(a)}}var r=t.p.multiSort?[]:"",tt=[],k=!1,i={},d=[],it=[],a,l,v,f,y,p,u,w,n,s,c,ut,o,ft;if($.isArray(t.p.data)){if(y=t.p.grouping?t.p.groupingView:!1,$.each(t.p.colModel,function(){var n,f;if(l=this.sorttype||"text",l==="date"||l==="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?(a=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.getRegional(t,"formatter.date.srcformat"),v=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.getRegional(t,"formatter.date.newformat")):a=v=this.datefmt||"Y-m-d",i[this.name]={stype:l,srcfmt:a,newfmt:v,sfunc:this.sortfunc||null}):i[this.name]={stype:l,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},t.p.grouping)for(u=0,p=y.groupField.length;u<p;u++)this.name===y.groupField[u]&&(n=this.name,this.index&&(n=this.index),d[u]=i[n],it[u]=n);t.p.multiSort?this.lso&&(r.push(this.name),f=this.lso.split("-"),tt.push(f[f.length-1])):k||this.index!==t.p.sortname&&this.name!==t.p.sortname||(r=this.name,k=!0)}),t.p.treeGrid&&t.p._sort){$(t).jqGrid("SortTree",r,t.p.sortorder,i[r].stype||"text",i[r].srcfmt||"");return}if(w={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},n=$.jgrid.from.call(t,t.p.data),t.p.ignoreCase&&(n=n.ignoreCase()),t.p.search===!0)if(s=t.p.postData.filters,s)typeof s=="string"&&(s=$.jgrid.parse(s)),rt(s);else try{f=i[t.p.postData.searchField];f.stype==="date"&&f.srcfmt&&f.newfmt&&f.srcfmt!==f.newfmt&&(t.p.postData.searchString=$.jgrid.parseDate.call(t,f.newfmt,t.p.postData.searchString,f.srcfmt));n=w[t.p.postData.searchOper](n)(t.p.postData.searchField,t.p.postData.searchString,i[t.p.postData.searchField])}catch(ot){}else t.p.treeGrid&&t.p.treeGridModel==="nested"&&n.orderBy(t.p.treeReader.left_field,"asc","integer","",null);if(t.p.treeGrid&&t.p.treeGridModel==="adjacency"&&(p=0,r=null),t.p.grouping)for(u=0;u<p;u++)n.orderBy(it[u],y.groupOrder[u],d[u].stype,d[u].srcfmt);t.p.multiSort?$.each(r,function(t){n.orderBy(this,tt[t],i[this].stype,i[this].srcfmt,i[this].sfunc)}):r&&t.p.sortorder&&k&&(t.p.sortorder.toUpperCase()==="DESC"?n.orderBy(t.p.sortname,"d",i[r].stype,i[r].srcfmt,i[r].sfunc):n.orderBy(t.p.sortname,"a",i[r].stype,i[r].srcfmt,i[r].sfunc));var e=n.select(),b=parseInt(t.p.rowNum,10),g=e.length,nt=parseInt(t.p.page,10),et=Math.ceil(g/b),h={};if((t.p.search||t.p.resetsearch)&&t.p.grouping&&t.p.groupingView._locgr){if(t.p.groupingView.groups=[],ut=$.jgrid.getMethod("groupingPrepare"),t.p.footerrow&&t.p.userDataOnFooter){for(o in t.p.userData)t.p.userData.hasOwnProperty(o)&&(t.p.userData[o]=0);ft=!0}for(c=0;c<g;c++){if(ft)for(o in t.p.userData)t.p.userData.hasOwnProperty(o)&&(t.p.userData[o]+=parseFloat(e[c][o]||0));ut.call($(t),e[c],c,b)}}return e=t.p.treeGrid&&t.p.search?$(t).jqGrid("searchTree",e):e.slice((nt-1)*b,nt*b),n=null,i=null,h[t.p.localReader.total]=et,h[t.p.localReader.page]=nt,h[t.p.localReader.records]=g,h[t.p.localReader.root]=e,h[t.p.localReader.userdata]=t.p.userData,e=null,h}},tr=function(n,i){var o,w,u,a,s,v,c,e="",k,y=t.p.pager?$.jgrid.jqID(t.p.pager.substr(1)):"",r=y?"_"+y:"",f=t.p.toppager?"_"+t.p.toppager.substr(1):"",p,l,b,d,g;u=parseInt(t.p.page,10)-1;u<0&&(u=0);u=u*parseInt(t.p.rowNum,10);s=u+t.p.reccount;t.p.scroll&&(p=$("tbody:first > tr:gt(0)",t.grid.bDiv),u=s-p.length,t.p.reccount=p.length,l=p.outerHeight()||t.grid.prevRowHeight,l&&(b=u*l,d=parseInt(t.p.records,10)*l,$(">div:first",t.grid.bDiv).css({height:d}).children("div:first").css({height:b,display:b?"":"none"}),t.grid.bDiv.scrollTop===0&&t.p.page>1&&(t.grid.bDiv.scrollTop=t.p.rowNum*(t.p.page-1)*l)),t.grid.bDiv.scrollLeft=t.grid.hDiv.scrollLeft);e=t.p.pager||"";e+=t.p.toppager?e?","+t.p.toppager:t.p.toppager:"";e&&(c=$.jgrid.getRegional(t,"formatter.integer"),o=h(t.p.page),w=h(t.p.lastpage),$(".selbox",e)[this.p.useProp?"prop":"attr"]("disabled",!1),t.p.pginput===!0&&($("#input"+r).html($.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",t.p.pgtext)||"","<input class='ui-pg-input ui-corner-all' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(y)+"'><\/span>")),t.p.toppager&&$("#input_t"+f).html($.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",t.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(y)+"_toppager'><\/span>")),$(".ui-pg-input",e).val(t.p.page),k=t.p.toppager?"#sp_1"+r+",#sp_1"+f:"#sp_1"+r,$(k).html($.fmatter?$.fmatter.util.NumberFormat(t.p.lastpage,c):t.p.lastpage)),t.p.viewrecords&&(t.p.reccount===0?$(".ui-paging-info",e).html($.jgrid.getRegional(t,"defaults.emptyrecords",t.p.emptyrecords)):(a=u+1,v=t.p.records,$.fmatter&&(a=$.fmatter.util.NumberFormat(a,c),s=$.fmatter.util.NumberFormat(s,c),v=$.fmatter.util.NumberFormat(v,c)),g=$.jgrid.getRegional(t,"defaults.recordtext",t.p.recordtext),$(".ui-paging-info",e).html($.jgrid.template(g,a,s,v)))),t.p.pgbuttons===!0&&(o<=0&&(o=w=0),o===1||o===0?($("#first"+r+", #prev"+r).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#first_t"+f+", #prev_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+r+", #prev"+r).removeClass("ui-state-disabled"),t.p.toppager&&$("#first_t"+f+", #prev_t"+f).removeClass("ui-state-disabled")),o===w||o===0?($("#next"+r+", #last"+r).addClass("ui-state-disabled").removeClass("ui-state-hover"),t.p.toppager&&$("#next_t"+f+", #last_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+r+", #last"+r).removeClass("ui-state-disabled"),t.p.toppager&&$("#next_t"+f+", #last_t"+f).removeClass("ui-state-disabled"))));n===!0&&t.p.rownumbers===!0&&$(">td.jqgrid-rownum",t.rows).each(function(n){$(this).html(u+1+n)});i&&t.p.jqgdnd&&$(t).jqGrid("gridDnD","updateDnD");$(t).triggerHandler("jqGridGridComplete");$.isFunction(t.p.gridComplete)&&t.p.gridComplete.call(t);$(t).triggerHandler("jqGridAfterGridComplete")},tt=function(){(t.grid.hDiv.loading=!0,t.p.hiddengrid)||$(t).jqGrid("progressBar",{method:"show",loadtype:t.p.loadui,htmlcontent:$.jgrid.getRegional(t,"defaults.loadtext",t.p.loadtext)})},w=function(){t.grid.hDiv.loading=!1;$(t).jqGrid("progressBar",{method:"hide",loadtype:t.p.loadui})},y=function(n){var v,s,b,p,h,f,c;if(!t.grid.hDiv.loading){var k=t.p.scroll&&n===!1,r={},l,u,i=t.p.prmNames;t.p.page<=0&&(t.p.page=Math.min(1,t.p.lastpage));i.c!==null&&(r[i.c]=$(t.grid.hDiv).parents("form:first").attr("action"));i.serializeObject!==null&&(r[i.serializeObject]=t.p.serializeObject);i.search!==null&&(r[i.search]=t.p.search);i.nd!==null&&(r[i.nd]=(new Date).getTime());i.rows!==null&&(r[i.rows]=t.p.rowNum);i.page!==null&&(r[i.page]=t.p.page);i.sort!==null&&(r[i.sort]=t.p.sortname);i.order!==null&&(r[i.order]=t.p.sortorder);t.p.rowTotal!==null&&i.totalrows!==null&&(r[i.totalrows]=t.p.rowTotal);var a=$.isFunction(t.p.loadComplete),e=a?t.p.loadComplete:null,o=0;if(n=n||1,n>1?i.npage!==null?(r[i.npage]=n,o=n-1,n=1):e=function(i){t.p.page++;t.grid.hDiv.loading=!1;a&&t.p.loadComplete.call(t,i);y(n-1)}:i.npage!==null&&delete t.p.postData[i.npage],t.p.grouping){for($(t).jqGrid("groupingSetup"),v=t.p.groupingView,b="",s=0;s<v.groupField.length;s++)p=v.groupField[s],$.each(t.p.colModel,function(n,t){t.name===p&&t.index&&(p=t.index)}),b+=p+" "+v.groupOrder[s]+", ";r[i.sort]=b+r[i.sort]}if($.extend(t.p.postData,r),h=t.p.scroll?t.rows.length-1:1,f=$(t).triggerHandler("jqGridBeforeRequest"),f===!1||f==="stop")return;if($.isFunction(t.p.datatype)){t.p.datatype.call(t,t.p.postData,"load_"+t.p.id,h,n,o);return}if($.isFunction(t.p.beforeRequest)&&(f=t.p.beforeRequest.call(t),f===undefined&&(f=!0),f===!1))return;l=t.p.datatype.toLowerCase();switch(l){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:t.p.url,type:t.p.mtype,dataType:l,data:$.isFunction(t.p.serializeGridData)?t.p.serializeGridData.call(t,t.p.postData):t.p.postData,success:function(i,r,u){if($.isFunction(t.p.beforeProcessing)&&t.p.beforeProcessing.call(t,i,r,u)===!1){w();return}l==="xml"?gt(i,h,n>1,o):ht(i,h,n>1,o);$(t).triggerHandler("jqGridLoadComplete",[i]);e&&e.call(t,i);$(t).triggerHandler("jqGridAfterLoadComplete",[i]);k&&t.grid.populateVisible();(t.p.loadonce||t.p.treeGrid)&&(t.p.datatype="local");i=null;n===1&&w()},error:function(i,r,u){$.isFunction(t.p.loadError)&&t.p.loadError.call(t,i,r,u);n===1&&w();i=null},beforeSend:function(n,i){var r=!0;if($.isFunction(t.p.loadBeforeSend)&&(r=t.p.loadBeforeSend.call(t,n,i)),r===undefined&&(r=!0),r===!1)return!1;tt()}},$.jgrid.ajaxOptions,t.p.ajaxGridOptions));break;case"xmlstring":tt();u=typeof t.p.datastr!="string"?t.p.datastr:$.parseXML(t.p.datastr);gt(u);$(t).triggerHandler("jqGridLoadComplete",[u]);a&&t.p.loadComplete.call(t,u);$(t).triggerHandler("jqGridAfterLoadComplete",[u]);t.p.datatype="local";t.p.datastr=null;w();break;case"jsonstring":tt();u=typeof t.p.datastr=="string"?$.jgrid.parse(t.p.datastr):t.p.datastr;ht(u);$(t).triggerHandler("jqGridLoadComplete",[u]);a&&t.p.loadComplete.call(t,u);$(t).triggerHandler("jqGridAfterLoadComplete",[u]);t.p.datatype="local";t.p.datastr=null;w();break;case"local":case"clientside":tt();t.p.datatype="local";t.p._ald=!0;c=nr();ht(c,h,n>1,o);$(t).triggerHandler("jqGridLoadComplete",[c]);e&&e.call(t,c);$(t).triggerHandler("jqGridAfterLoadComplete",[c]);k&&t.grid.populateVisible();w();t.p._ald=!1}t.p._sort=!1}},ct=function(n){$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv)[t.p.useProp?"prop":"attr"]("checked",n);var i=t.p.frozenColumns?t.p.id+"_frozen":"";i&&$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.fhDiv)[t.p.useProp?"prop":"attr"]("checked",n)},hi=function(n,i){var p="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",e="",r="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",o="",u,w,b,k,c,d,a,v=function(n){var i;return($.isFunction(t.p.onPaging)&&(i=t.p.onPaging.call(t,n)),i==="stop")?!1:(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],ct(!1)),t.p.savedRow=[],!0)},f,l;if(n=n.substr(1),i+="_"+n,u="pg_"+n,w=n+"_left",b=n+"_center",k=n+"_right",$("#"+$.jgrid.jqID(n)).append("<div id='"+u+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+w+"' align='left'><\/td><td id='"+b+"' align='center' style='white-space:pre;'><\/td><td id='"+k+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),t.p.rowList.length>0){for(o='<td dir="'+s+'">',o+='<select class="ui-pg-selbox ui-widget-content ui-corner-all" role="listbox" title="'+($.jgrid.getRegional(t,"defaults.pgrecs",t.p.pgrecs)||"")+'">',a=0;a<t.p.rowList.length;a++)f=t.p.rowList[a].toString().split(":"),f.length===1&&(f[1]=f[0]),o+='<option role="option" value="'+f[0]+'"'+(h(t.p.rowNum,0)===h(f[0],0)?' selected="selected"':"")+">"+f[1]+"<\/option>";o+="<\/select><\/td>"}if(s==="rtl"&&(r+=o),t.p.pginput===!0&&(e="<td id='input"+i+"' dir='"+s+"'>"+$.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",t.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(n)+"'><\/span>")+"<\/td>"),t.p.pgbuttons===!0?(l=["first"+i,"prev"+i,"next"+i,"last"+i],s==="rtl"&&l.reverse(),r+="<td id='"+l[0]+"' class='ui-pg-button ui-corner-all' title='"+($.jgrid.getRegional(t,"defaults.pgfirst",t.p.pgfirst)||"")+"'><span class='ui-icon ace-icon fa fa-angle-double-left bigger-140'><\/span><\/td>",r+="<td id='"+l[1]+"' class='ui-pg-button ui-corner-all' title='"+($.jgrid.getRegional(t,"defaults.pgprev",t.p.pgprev)||"")+"'><span class='ui-icon ace-icon fa fa-angle-left bigger-140'><\/span><\/td>",r+=e!==""?p+e+p:"",r+="<td id='"+l[2]+"' class='ui-pg-button ui-corner-all' title='"+($.jgrid.getRegional(t,"defaults.pgnext",t.p.pgnext)||"")+"'><span class='ui-icon ace-icon fa fa-angle-right bigger-140'><\/span><\/td>",r+="<td id='"+l[3]+"' class='ui-pg-button ui-corner-all' title='"+($.jgrid.getRegional(t,"defaults.pglast",t.p.pglast)||"")+"'><span class='ui-icon ace-icon fa fa-angle-double-right bigger-140'><\/span><\/td>"):e!==""&&(r+=e),s==="ltr"&&(r+=o),r+="<\/tr><\/tbody><\/table>",t.p.viewrecords===!0&&$("td#"+n+"_"+t.p.recordpos,"#"+u).append("<div dir='"+s+"' style='text-align:"+t.p.recordpos+"' class='ui-paging-info'><\/div>"),$("td#"+n+"_"+t.p.pagerpos,"#"+u).append(r),d=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ><\/div>"),c=$(r).clone().appendTo("#testpg").width(),$("#testpg").remove(),c>0&&(e!==""&&(c+=50),$("td#"+n+"_"+t.p.pagerpos,"#"+u).width(c)),t.p._nvtd=[],t.p._nvtd[0]=c?Math.floor((t.p.width-c)/2):Math.floor(t.p.width/3),t.p._nvtd[1]=0,r=null,$(".ui-pg-selbox","#"+u).bind("change",function(){return v("records")?(t.p.page=Math.round(t.p.rowNum*(t.p.page-1)/this.value-.5)+1,t.p.rowNum=this.value,t.p.pager&&$(".ui-pg-selbox",t.p.pager).val(this.value),t.p.toppager&&$(".ui-pg-selbox",t.p.toppager).val(this.value),y(),!1):!1}),t.p.pgbuttons===!0&&($(".ui-pg-button","#"+u).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(i)+", #prev"+$.jgrid.jqID(i)+", #next"+$.jgrid.jqID(i)+", #last"+$.jgrid.jqID(i)).click(function(){if($(this).hasClass("ui-state-disabled"))return!1;var n=h(t.p.page,1),r=h(t.p.lastpage,1),u=!1,o=!0,s=!0,f=!0,e=!0;return(r===0||r===1?(o=!1,s=!1,f=!1,e=!1):r>1&&n>=1?n===1?(o=!1,s=!1):n===r&&(f=!1,e=!1):r>1&&n===0&&(f=!1,e=!1,n=r-1),!v(this.id.split("_")[0]))?!1:(this.id==="first"+i&&o&&(t.p.page=1,u=!0),this.id==="prev"+i&&s&&(t.p.page=n-1,u=!0),this.id==="next"+i&&f&&(t.p.page=n+1,u=!0),this.id==="last"+i&&e&&(t.p.page=r,u=!0),u&&y(),!1)})),t.p.pginput===!0)$("#"+u).on("keypress","input.ui-pg-input",function(n){var i=n.charCode||n.keyCode||0;return i===13?v("user")?($(this).val(h($(this).val(),1)),t.p.page=$(this).val()>0?$(this).val():t.p.page,y(),!1):!1:this})},ir=function(n,i){var e,u="",r=t.p.colModel,s=!1,h,f=t.p.frozenColumns?i:t.grid.headers[n].el,o="";$("span.ui-grid-ico-sort",f).addClass("ui-state-disabled");$(f).attr("aria-selected","false");r[n].lso?r[n].lso==="asc"?(r[n].lso+="-desc",o="desc"):r[n].lso==="desc"?(r[n].lso+="-asc",o="asc"):(r[n].lso==="asc-desc"||r[n].lso==="desc-asc")&&(r[n].lso=""):r[n].lso=o=r[n].firstsortorder||"asc";o?($("span.s-ico",f).show(),$("span.ui-icon-"+o,f).removeClass("ui-state-disabled"),$(f).attr("aria-selected","true")):t.p.viewsortcols[0]||$("span.s-ico",f).hide();t.p.sortorder="";$.each(r,function(n){this.lso&&(n>0&&s&&(u+=", "),e=this.lso.split("-"),u+=r[n].index||r[n].name,u+=" "+e[e.length-1],s=!0,t.p.sortorder=e[e.length-1])});h=u.lastIndexOf(t.p.sortorder);u=u.substring(0,h);t.p.sortname=u},ci=function(n,i,r,u,f){var o,e,s;if(t.p.colModel[i].sortable&&!(t.p.savedRow.length>0)){if(r||(t.p.lastsort===i&&t.p.sortname!==""?t.p.sortorder==="asc"?t.p.sortorder="desc":t.p.sortorder==="desc"&&(t.p.sortorder="asc"):t.p.sortorder=t.p.colModel[i].firstsortorder||"asc",t.p.page=1),t.p.multiSort)ir(i,f);else{if(u){if(t.p.lastsort===i&&t.p.sortorder===u&&!r)return;t.p.sortorder=u}o=t.grid.headers[t.p.lastsort]?t.grid.headers[t.p.lastsort].el:null;e=t.p.frozenColumns?f:t.grid.headers[i].el;$("span.ui-grid-ico-sort",o).addClass("ui-state-disabled");$(o).attr("aria-selected","false");t.p.frozenColumns&&(t.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),t.grid.fhDiv.find("th").attr("aria-selected","false"));$("span.ui-icon-"+t.p.sortorder,e).removeClass("ui-state-disabled");$(e).attr("aria-selected","true");t.p.viewsortcols[0]||(t.p.lastsort!==i?(t.p.frozenColumns&&t.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",o).hide(),$("span.s-ico",e).show()):t.p.sortname===""&&$("span.s-ico",e).show());n=n.substring(5+t.p.id.length+1);t.p.sortname=t.p.colModel[i].index||n}if($(t).triggerHandler("jqGridSortCol",[t.p.sortname,i,t.p.sortorder])==="stop"){t.p.lastsort=i;return}if($.isFunction(t.p.onSortCol)&&t.p.onSortCol.call(t,t.p.sortname,i,t.p.sortorder)==="stop"){t.p.lastsort=i;return}t.p.datatype==="local"?t.p.deselectAfterSort&&$(t).jqGrid("resetSelection"):(t.p.selrow=null,t.p.multiselect&&ct(!1),t.p.selarrrow=[],t.p.savedRow=[]);t.p.scroll&&(s=t.grid.bDiv.scrollLeft,nt.call(t,!0,!1),t.grid.hDiv.scrollLeft=s);t.p.subGrid&&t.p.datatype==="local"&&$("td.sgexpanded","#"+$.jgrid.jqID(t.p.id)).each(function(){$(this).trigger("click")});t.p._sort=!0;y();t.p.lastsort=i;t.p.sortname!==n&&i&&(t.p.lastsort=i)}},rr=function(){var n=0,r=$.jgrid.cell_width?0:h(t.p.cellLayout,0),u=0,c,s=h(t.p.scrollOffset,0),e,l=!1,a,f=0,o;$.each(t.p.colModel,function(){if(this.hidden===undefined&&(this.hidden=!1),t.p.grouping&&t.p.autowidth){var i=$.inArray(this.name,t.p.groupingView.groupField);i>=0&&t.p.groupingView.groupColumnShow.length>i&&(this.hidden=!t.p.groupingView.groupColumnShow[i])}this.widthOrg=e=h(this.width,0);this.hidden===!1&&(n+=e+r,this.fixed?f+=e+r:u++)});isNaN(t.p.width)&&(t.p.width=n+(t.p.shrinkToFit===!1&&!isNaN(t.p.height)?s:0));i.width=t.p.width;t.p.tblwidth=n;t.p.shrinkToFit===!1&&t.p.forceFit===!0&&(t.p.forceFit=!1);t.p.shrinkToFit===!0&&u>0&&(a=i.width-r*u-f,isNaN(t.p.height)||(a-=s,l=!0),n=0,$.each(t.p.colModel,function(i){this.hidden!==!1||this.fixed||(e=Math.round(a*this.width/(t.p.tblwidth-r*u-f)),this.width=e,n+=e,c=i)}),o=0,l?i.width-f-(n+r*u)!==s&&(o=i.width-f-(n+r*u)-s):l||Math.abs(i.width-f-(n+r*u))===1||(o=i.width-f-(n+r*u)),t.p.colModel[c].width+=o,t.p.tblwidth=n+o+r*u+f,t.p.tblwidth>t.p.width&&(t.p.colModel[c].width-=t.p.tblwidth-parseInt(t.p.width,10),t.p.tblwidth=t.p.width))},ur=function(n){for(var u=n,r=n,i=n+1;i<t.p.colModel.length;i++)if(t.p.colModel[i].hidden!==!0){r=i;break}return r-u},fr=function(n){var r=$(t.grid.headers[n].el),i=[r.position().left+r.outerWidth()];return t.p.direction==="rtl"&&(i[0]=t.p.width-i[0]),i[0]-=t.grid.bDiv.scrollLeft,i.push($(t.grid.hDiv).position().top),i.push($(t.grid.bDiv).offset().top-$(t.grid.hDiv).offset().top+$(t.grid.bDiv).height()),i},li=function(n){for(var r=t.grid.headers,u=$.jgrid.getCellIndex(n),i=0;i<r.length;i++)if(n===r[i].el){u=i;break}return u},ai;for(this.p.id=this.id,$.inArray(t.p.multikey,["shiftKey","altKey","ctrlKey"])===-1&&(t.p.multikey=!1),t.p.keyName=!1,u=0;u<t.p.colModel.length;u++)ai=typeof t.p.colModel[u].template=="string"?$.jgrid.cmTemplate!=null&&typeof $.jgrid.cmTemplate[t.p.colModel[u].template]=="object"?$.jgrid.cmTemplate[t.p.colModel[u].template]:{}:t.p.colModel[u].template,t.p.colModel[u]=$.extend(!0,{},t.p.cmTemplate,ai||{},t.p.colModel[u]),t.p.keyName===!1&&t.p.colModel[u].key===!0&&(t.p.keyName=t.p.colModel[u].name);if(t.p.sortorder=t.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),t.p.grouping===!0&&(t.p.scroll=!1,t.p.rownumbers=!1,t.p.treeGrid=!1,t.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(er){}t.p.datatype!=="local"&&(t.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(t).jqGrid("setSubGrid")}catch(or){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?t.p.multiselectWidth+t.p.cellLayout:t.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:t.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));t.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},t.p.xmlReader);t.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.jsonReader);t.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.localReader);t.p.scroll&&(t.p.pgbuttons=!1,t.p.pginput=!1,t.p.rowList=[]);t.p.data.length&&(si(),kt());var a="<thead><tr class='ui-jqgrid-labels' role='row'>",vi,ni,lt,it,at,e,f,yi,vt,pi="",wi="",rt=[],bi=[],b=[];if(t.p.shrinkToFit===!0&&t.p.forceFit===!0)for(u=t.p.colModel.length-1;u>=0;u--)if(!t.p.colModel[u].hidden){t.p.colModel[u].resizable=!1;break}if(t.p.viewsortcols[1]==="horizontal"&&(pi=" ui-i-asc",wi=" ui-i-desc"),vi=pt?"class='ui-th-div-ie'":"",vt="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+pi+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+s+"'><\/span>",vt+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+wi+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+s+"'><\/span><\/span>",t.p.multiSort)for(rt=t.p.sortname.split(","),u=0;u<rt.length;u++)b=$.trim(rt[u]).split(" "),rt[u]=$.trim(b[0]),bi[u]=b[1]?$.trim(b[1]):t.p.sortorder||"asc";for(u=0;u<this.p.colNames.length;u++)ki=t.p.headertitles?' title="'+$.jgrid.stripHtml(t.p.colNames[u])+'"':"",a+="<th id='"+t.p.id+"_"+t.p.colModel[u].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+s+"'"+ki+">",ni=t.p.colModel[u].index||t.p.colModel[u].name,a+="<div id='jqgh_"+t.p.id+"_"+t.p.colModel[u].name+"' "+vi+">"+t.p.colNames[u],t.p.colModel[u].width=t.p.colModel[u].width?parseInt(t.p.colModel[u].width,10):150,typeof t.p.colModel[u].title!="boolean"&&(t.p.colModel[u].title=!0),t.p.colModel[u].lso="",ni===t.p.sortname&&(t.p.lastsort=u),t.p.multiSort&&(b=$.inArray(ni,rt),b!==-1&&(t.p.colModel[u].lso=bi[b])),a+=vt+"<\/div><\/th>";if(a+="<\/tr><\/thead>",vt=null,$(this).append(a),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect&&(ut=[],$("#cb_"+$.jgrid.jqID(t.p.id),this).bind("click",function(){t.p.selarrrow=[];var n=t.p.frozenColumns===!0?t.p.id+"_frozen":"";this.checked?($(t.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id))[t.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),t.p.selarrrow.push(this.id),t.p.selrow=this.id,n&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id),t.grid.fbDiv)[t.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),t.grid.fbDiv).addClass("ui-state-highlight"))))}),k=!0,ut=[]):($(t.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id))[t.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),ut.push(this.id),n&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id),t.grid.fbDiv)[t.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),t.grid.fbDiv).removeClass("ui-state-highlight"))))}),t.p.selrow=null,k=!1);$(t).triggerHandler("jqGridSelectAll",[k?t.p.selarrrow:ut,k]);$.isFunction(t.p.onSelectAll)&&t.p.onSelectAll.call(t,k?t.p.selarrrow:ut,k)})),t.p.autowidth===!0&&(ti=$(p).innerWidth(),t.p.width=ti>0?ti:"nw"),rr(),$(p).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+t.p.id+"'>&#160;<\/div>"),t.p.scrollPopUp&&$(p).append("<div class='loading ui-scroll-popup ui-widget-content' id='scroll_g"+t.p.id+"'><\/div>"),$(v).css("width",i.width+"px"),a=$("thead:first",t).get(0),ft="",t.p.footerrow&&(ft+="<table role='presentation' style='width:"+t.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+s+"'>"),ii=$("tr:first",a),et="<tr class='jqgfirstrow' role='row' style='height:auto'>",t.p.disableClick=!1,$("th",ii).each(function(n){var u,r;lt=t.p.colModel[n].width;t.p.colModel[n].resizable===undefined&&(t.p.colModel[n].resizable=!0);t.p.colModel[n].resizable?(it=document.createElement("span"),$(it).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+s).css("cursor","col-resize"),$(this).addClass(t.p.resizeclass)):it="";$(this).css("width",lt+"px").prepend(it);it=null;u="";t.p.colModel[n].hidden&&($(this).css("display","none"),u="display:none;");et+="<td role='gridcell' style='height:0px;width:"+lt+"px;"+u+"'><\/td>";i.headers[n]={width:lt,el:this};at=t.p.colModel[n].sortable;typeof at!="boolean"&&(t.p.colModel[n].sortable=!0,at=!0);r=t.p.colModel[n].name;r==="cb"||r==="subgrid"||r==="rn"||t.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable");at&&(t.p.multiSort?t.p.viewsortcols[0]?($("div span.s-ico",this).show(),t.p.colModel[n].lso&&$("div span.ui-icon-"+t.p.colModel[n].lso,this).removeClass("ui-state-disabled")):t.p.colModel[n].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.colModel[n].lso,this).removeClass("ui-state-disabled")):t.p.viewsortcols[0]?($("div span.s-ico",this).show(),n===t.p.lastsort&&$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")):n===t.p.lastsort&&t.p.sortname!==""&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.sortorder,this).removeClass("ui-state-disabled")));t.p.footerrow&&(ft+="<td role='gridcell' "+g(n,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(n){if($(n.target).closest("th>span.ui-jqgrid-resize").length===1){var r=li(this);return t.p.forceFit===!0&&(t.p.nv=ur(r)),i.dragStart(r,n,fr(r)),!1}}).click(function(n){var r,f,e,u,i,o;return t.p.disableClick?(t.p.disableClick=!1,!1):(r="th>div.ui-jqgrid-sortable",t.p.viewsortcols[2]||(r="th>div>span>span.ui-grid-ico-sort"),u=$(n.target).closest(r),u.length!==1)?void 0:(t.p.frozenColumns?(o=$(this)[0].id.substring(t.p.id.length+1),$(t.p.colModel).each(function(n){if(this.name===o)return i=n,!1})):i=li(this),t.p.viewsortcols[2]||(f=!0,e=u.attr("sort")),i!=null&&ci($("div",this)[0].id,i,f,e,this),!1)}),t.p.sortable&&$.fn.sortable)try{$(t).jqGrid("sortableColumns",ii)}catch(sr){}t.p.footerrow&&(ft+="<\/tr><\/tbody><\/table>");et+="<\/tr>";yi=document.createElement("tbody");this.appendChild(yi);$(this).addClass("ui-jqgrid-btable").append(et);et=null;var di=$("<table class='ui-jqgrid-htable' style='width:"+t.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'><\/table>").append(a),c=t.p.caption&&t.p.hiddengrid===!0?!0:!1,d=$("<div class='ui-jqgrid-hbox"+(s==="rtl"?"-rtl":"")+"'><\/div>");a=null;i.hDiv=document.createElement("div");$(i.hDiv).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(d);$(d).append(di);di=null;c&&$(i.hDiv).hide();t.p.pager&&(typeof t.p.pager=="string"?t.p.pager.substr(0,1)!=="#"&&(t.p.pager="#"+t.p.pager):t.p.pager="#"+$(t.p.pager).attr("id"),$(t.p.pager).css({width:i.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(p),c&&$(t.p.pager).hide(),hi(t.p.pager,""));t.p.cellEdit===!1&&t.p.hoverrows===!0&&$(t).bind("mouseover",function(n){f=$(n.target).closest("tr.jqgrow");$(f).attr("class")!=="ui-subgrid"&&$(f).addClass("ui-state-hover")}).bind("mouseout",function(n){f=$(n.target).closest("tr.jqgrow");$(f).removeClass("ui-state-hover")});$(t).before(i.hDiv).click(function(n){var i,r,s,u;if(e=n.target,f=$(e,t.rows).closest("tr.jqgrow"),$(f).length===0||f[0].className.indexOf("ui-state-disabled")>-1||($(e,t).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==t.id)return this;if(i=$(e).hasClass("cbox"),r=$(t).triggerHandler("jqGridBeforeSelectRow",[f[0].id,n]),r=r===!1||r==="stop"?!1:!0,$.isFunction(t.p.beforeSelectRow)&&(s=t.p.beforeSelectRow.call(t,f[0].id,n),(s===!1||s==="stop")&&(r=!1)),e.tagName!=="A"&&(e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&e.tagName!=="OPTION"&&e.tagName!=="SELECT"||i)){if(o=f[0].id,e=$(e).closest("tr.jqgrow>td"),e.length>0&&(l=$.jgrid.getCellIndex(e),ri=$(e).closest("td,th").html(),$(t).triggerHandler("jqGridCellSelect",[o,l,ri,n]),$.isFunction(t.p.onCellSelect)&&t.p.onCellSelect.call(t,o,l,ri,n)),t.p.cellEdit===!0)if(t.p.multiselect&&i&&r)$(t).jqGrid("setSelection",o,!0,n);else if(e.length>0){o=f[0].rowIndex;try{$(t).jqGrid("editCell",o,l,!0)}catch(h){}}r&&(t.p.multikey?n[t.p.multikey]?$(t).jqGrid("setSelection",o,!0,n):t.p.multiselect&&i&&(i=$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+o).is(":checked"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+o)[t.p.useProp?"prop":"attr"]("checked",i)):t.p.multiselect&&t.p.multiboxonly?i?$(t).jqGrid("setSelection",o,!0,n):(u=t.p.frozenColumns?t.p.id+"_frozen":"",$(t.p.selarrrow).each(function(n,i){var r=$(t).jqGrid("getGridRowById",i);r&&$(r).removeClass("ui-state-highlight");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1);u&&($("#"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(u)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(u))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.p.selarrrow=[],$(t).jqGrid("setSelection",o,!0,n)):$(t).jqGrid("setSelection",o,!0,n))}}).bind("reloadGrid",function(n,i){if(t.p.treeGrid===!0&&(t.p.datatype=t.p.treedatatype),i&&i.current&&t.grid.selectionPreserver(t),t.p.datatype==="local"?($(t).jqGrid("resetSelection"),t.p.data.length&&(si(),kt())):t.p.treeGrid||(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],ct(!1)),t.p.savedRow=[]),t.p.scroll&&nt.call(t,!0,!1),i&&i.page){var r=i.page;r>t.p.lastpage&&(r=t.p.lastpage);r<1&&(r=1);t.p.page=r;t.grid.bDiv.scrollTop=t.grid.prevRowHeight?(r-1)*t.grid.prevRowHeight*t.p.rowNum:0}return t.grid.prevRowHeight&&t.p.scroll?(delete t.p.lastpage,t.grid.populateVisible()):t.grid.populate(),t.p.inlineNav===!0&&$(t).jqGrid("showAddEditButtons"),!1}).dblclick(function(n){if(e=n.target,f=$(e,t.rows).closest("tr.jqgrow"),$(f).length!==0){o=f[0].rowIndex;l=$.jgrid.getCellIndex(e);var i=$(t).triggerHandler("jqGridDblClickRow",[$(f).attr("id"),o,l,n]);return i!=null?i:$.isFunction(t.p.ondblClickRow)&&(i=t.p.ondblClickRow.call(t,$(f).attr("id"),o,l,n),i!=null)?i:void 0}}).bind("contextmenu",function(n){if(e=n.target,f=$(e,t.rows).closest("tr.jqgrow"),$(f).length!==0){t.p.multiselect||$(t).jqGrid("setSelection",f[0].id,!0,n);o=f[0].rowIndex;l=$.jgrid.getCellIndex(e);var i=$(t).triggerHandler("jqGridRightClickRow",[$(f).attr("id"),o,l,n]);return i!=null?i:$.isFunction(t.p.onRightClickRow)&&(i=t.p.onRightClickRow.call(t,$(f).attr("id"),o,l,n),i!=null)?i:void 0}});i.bDiv=document.createElement("div");pt&&String(t.p.height).toLowerCase()==="auto"&&(t.p.height="100%");$(i.bDiv).append($('<div style="position:relative;"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:t.p.height+(isNaN(t.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid);$("table:first",i.bDiv).css({width:t.p.tblwidth+"px"});$.support.tbody||$("tbody",this).length===2&&$("tbody:gt(0)",this).remove();t.p.multikey&&($.jgrid.msie?$(i.bDiv).bind("selectstart",function(){return!1}):$(i.bDiv).bind("mousedown",function(){return!1}));c&&$(i.bDiv).hide();i.cDiv=document.createElement("div");yt=t.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' title='"+($.jgrid.getRegional(t,"defaults.showhide",t.p.showhide)||"")+"' />").hover(function(){yt.addClass("ui-state-hover")},function(){yt.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'><\/span>").css(s==="rtl"?"left":"right","0px"):"";$(i.cDiv).append(yt).append("<span class='ui-jqgrid-title'>"+t.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(s==="rtl"?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");$(i.cDiv).insertBefore(i.hDiv);t.p.toolbar[0]&&(i.uDiv=document.createElement("div"),t.p.toolbar[1]==="top"?$(i.uDiv).insertBefore(i.hDiv):t.p.toolbar[1]==="bottom"&&$(i.uDiv).insertAfter(i.hDiv),t.p.toolbar[1]==="both"?(i.ubDiv=document.createElement("div"),$(i.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(i.hDiv),$(i.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(i.hDiv),c&&$(i.ubDiv).hide()):$(i.uDiv).width(i.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),c&&$(i.uDiv).hide());t.p.toppager&&(t.p.toppager=$.jgrid.jqID(t.p.id)+"_toppager",i.topDiv=$("<div id='"+t.p.toppager+"'><\/div>")[0],t.p.toppager="#"+t.p.toppager,$(i.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(i.width).insertBefore(i.hDiv),hi(t.p.toppager,"_t"));t.p.footerrow&&(i.sDiv=$("<div class='ui-jqgrid-sdiv'><\/div>")[0],d=$("<div class='ui-jqgrid-hbox"+(s==="rtl"?"-rtl":"")+"'><\/div>"),$(i.sDiv).append(d).width(i.width).insertAfter(i.hDiv),$(d).append(ft),i.footers=$(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells,t.p.rownumbers&&(i.footers[0].className="ui-state-default jqgrid-rownum"),c&&$(i.sDiv).hide());d=null;t.p.caption?(gi=t.p.datatype,t.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",i.cDiv).click(function(n){var f=$.isFunction(t.p.onHeaderClick),r=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",u,e=this;return t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&(r+=", #"+$(i.ubDiv).attr("id")),r+=", #"+$(i.uDiv).attr("id")),u=$(r,"#gview_"+$.jgrid.jqID(t.p.id)).length,t.p.gridstate==="visible"?$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast",function(){u--;u===0&&($("span",e).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),t.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).hide(),$(t).triggerHandler("jqGridHeaderClick",[t.p.gridstate,n]),f&&(c||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}):t.p.gridstate==="hidden"&&$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast",function(){u--;u===0&&($("span",e).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),c&&(t.p.datatype=gi,y(),c=!1),t.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).show(),$(t).triggerHandler("jqGridHeaderClick",[t.p.gridstate,n]),f&&(c||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}),!1}),c&&(t.p.datatype="local",$(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")))):($(i.cDiv).hide(),t.p.toppager||$(i.hDiv).addClass("ui-corner-top"));$(i.hDiv).after(i.bDiv).mousemove(function(n){if(i.resizing)return i.dragMove(n),!1});$(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return!1});$(document).bind("mouseup.jqGrid"+t.p.id,function(){return i.resizing?(i.dragEnd(),!1):!0});t.formatCol=g;t.sortData=ci;t.updatepager=tr;t.refreshIndex=kt;t.setHeadCheckBox=ct;t.constructTr=dt;t.formatter=function(n,t,i,r,u){return fi(n,t,i,r,u)};$.extend(i,{populate:y,emptyRows:nt,beginReq:tt,endReq:w});this.grid=i;t.addXmlData=function(n){gt(n)};t.addJSONData=function(n){ht(n)};this.grid.cols=this.rows[0].cells;$(t).triggerHandler("jqGridInitGrid");$.isFunction(t.p.onInitGrid)&&t.p.onInitGrid.call(t);y();t.p.hiddengrid=!1}})};$.jgrid.extend({getGridParam:function(n,t){var r=this[0],i;if(r&&r.grid){if(t===undefined&&typeof t!="string"&&(t="jqGrid"),i=r.p,t!=="jqGrid")try{i=$(r).data(t)}catch(u){i=r.p}return n?i[n]!==undefined?i[n]:null:i}},setGridParam:function(n,t){return this.each(function(){if(t==null&&(t=!1),this.grid&&typeof n=="object")if(t===!0){var i=$.extend({},this.p,n);this.p=i}else $.extend(!0,this.p,n)})},getGridRowById:function(n){var t;return this.each(function(){try{for(var i=this.rows.length;i--;)if(n.toString()===this.rows[i].id){t=this.rows[i];break}}catch(r){t=$(this.grid.bDiv).find("#"+$.jgrid.jqID(n))}}),t},getDataIDs:function(){var i=[],n=0,t,r=0;return this.each(function(){if(t=this.rows.length,t&&t>0)while(n<t)$(this.rows[n]).hasClass("jqgrow")&&(i[r]=this.rows[n].id,r++),n++}),i},setSelection:function(n,t,i){return this.each(function(){function l(n){var u=$(r.grid.bDiv)[0].clientHeight,t=$(r.grid.bDiv)[0].scrollTop,i=$(r.rows[n]).position().top,f=r.rows[n].clientHeight;i+f>=u+t?$(r.grid.bDiv)[0].scrollTop=i-(u+t)+f+t:i<u+t&&i<t&&($(r.grid.bDiv)[0].scrollTop=i)}var r=this,f,u,s,o,h,e,c;n!==undefined&&((t=t===!1?!1:!0,u=$(r).jqGrid("getGridRowById",n),!u||!u.className||u.className.indexOf("ui-state-disabled")>-1)||(r.p.scrollrows===!0&&(s=$(r).jqGrid("getGridRowById",n).rowIndex,s>=0&&l(s)),r.p.frozenColumns===!0&&(e=r.p.id+"_frozen"),r.p.multiselect?(r.setHeadCheckBox(!1),r.p.selrow=u.id,o=$.inArray(r.p.selrow,r.p.selarrrow),o===-1?(u.className!=="ui-subgrid"&&$(u).addClass("ui-state-highlight").attr("aria-selected","true"),f=!0,r.p.selarrrow.push(r.p.selrow)):(u.className!=="ui-subgrid"&&$(u).removeClass("ui-state-highlight").attr("aria-selected","false"),f=!1,r.p.selarrrow.splice(o,1),h=r.p.selarrrow[0],r.p.selrow=h===undefined?null:h),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(u.id))[r.p.useProp?"prop":"attr"]("checked",f),e&&(o===-1?$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e))[r.p.useProp?"prop":"attr"]("checked",f)),t&&($(r).triggerHandler("jqGridSelectRow",[u.id,f,i]),r.p.onSelectRow&&r.p.onSelectRow.call(r,u.id,f,i))):u.className!=="ui-subgrid"&&(r.p.selrow!==u.id?(c=$(r).jqGrid("getGridRowById",r.p.selrow),c&&$(c).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(u).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),e&&($("#"+$.jgrid.jqID(r.p.selrow),"#"+$.jgrid.jqID(e)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).addClass("ui-state-highlight")),f=!0):f=!1,r.p.selrow=u.id,t&&($(r).triggerHandler("jqGridSelectRow",[u.id,f,i]),r.p.onSelectRow&&r.p.onSelectRow.call(r,u.id,f,i)))))})},resetSelection:function(n){return this.each(function(){var t=this,r,i,u;t.p.frozenColumns===!0&&(i=t.p.id+"_frozen");n!==undefined?(r=n===t.p.selrow?t.p.selrow:n,$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),t.p.multiselect&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",!1),i&&$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1),t.setHeadCheckBox(!1),u=$.inArray($.jgrid.jqID(r),t.p.selarrrow),u!==-1&&t.p.selarrrow.splice(u,1)),r=null):t.p.multiselect?($(t.p.selarrrow).each(function(n,r){$($(t).jqGrid("getGridRowById",r)).removeClass("ui-state-highlight").attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r))[t.p.useProp?"prop":"attr"]("checked",!1);i&&($("#"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.setHeadCheckBox(!1),t.p.selarrrow=[],t.p.selrow=null):t.p.selrow&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight"),t.p.selrow=null);t.p.cellEdit===!0&&parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&($("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(t.rows[t.p.iRow]).removeClass("selected-row ui-state-hover"));t.p.savedRow=[]})},getRowData:function(n,t){var i={},r,u=!1,f,e=0;return this.each(function(){var o=this,s,h;if(n==null)u=!0,r=[],f=o.rows.length;else{if(h=$(o).jqGrid("getGridRowById",n),!h)return i;f=2}for(t&&t===!0&&o.p.data.length>0||(t=!1);e<f;)u&&(h=o.rows[e]),$(h).hasClass("jqgrow")&&(t?i=o.p.data[o.p._index[h.id]]:$('td[role="gridcell"]',h).each(function(n){if(s=o.p.colModel[n].name,s!=="cb"&&s!=="subgrid"&&s!=="rn")if(o.p.treeGrid===!0&&s===o.p.ExpandColumn)i[s]=$.jgrid.htmlDecode($("span:first",this).html());else try{i[s]=$.unformat.call(o,this,{rowId:h.id,colModel:o.p.colModel[n]},n)}catch(t){i[s]=$.jgrid.htmlDecode($(this).html())}}),u&&(r.push(i),i={})),e++}),r||i},delRowData:function(n){var i=!1,t,r,u;return this.each(function(){var f=this,s,e,o;if(t=$(f).jqGrid("getGridRowById",n),!t)return!1;f.p.subGrid&&(u=$(t).next(),u.hasClass("ui-subgrid")&&u.remove());$(t).remove();f.p.records--;f.p.reccount--;f.updatepager(!0,!1);i=!0;f.p.multiselect&&(r=$.inArray(n,f.p.selarrrow),r!==-1&&f.p.selarrrow.splice(r,1));f.p.selrow=f.p.multiselect&&f.p.selarrrow.length>0?f.p.selarrrow[f.p.selarrrow.length-1]:null;f.p.datatype==="local"&&(s=$.jgrid.stripPref(f.p.idPrefix,n),e=f.p._index[s],e!==undefined&&(f.p.data.splice(e,1),f.refreshIndex()));f.p.altRows===!0&&i&&(o=f.p.altclass,$(f.rows).each(function(n){n%2==1?$(this).addClass(o):$(this).removeClass(o)}))}),i},setRowData:function(n,t,i){var r,u=!0,f;return this.each(function(){var v,c,l;if(!this.grid)return!1;var e=this,h,o,a=typeof i,s={};if(o=$(this).jqGrid("getGridRowById",n),!o)return!1;if(t)try{if($(this.p.colModel).each(function(i){r=this.name;var u=$.jgrid.getAccessor(t,r);u!==undefined&&(s[r]=this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?$.unformat.date.call(e,u,this):u,h=e.formatter(n,s[r],i,t,"edit"),f=this.title?{title:$.jgrid.stripHtml(h)}:{},e.p.treeGrid===!0&&r===e.p.ExpandColumn?$("td[role='gridcell']:eq("+i+") > span:first",o).html(h).attr(f):$("td[role='gridcell']:eq("+i+")",o).html(h).attr(f))}),e.p.datatype==="local"){if(v=$.jgrid.stripPref(e.p.idPrefix,n),c=e.p._index[v],e.p.treeGrid)for(l in e.p.treeReader)e.p.treeReader.hasOwnProperty(l)&&delete s[e.p.treeReader[l]];c!==undefined&&(e.p.data[c]=$.extend(!0,e.p.data[c],s));s=null}}catch(y){u=!1}u&&(a==="string"?$(o).addClass(i):i!==null&&a==="object"&&$(o).css(i),$(e).triggerHandler("jqGridAfterGridComplete"))}),u},addRowData:function(n,t,i,r){["first","last","before","after"].indexOf(i)==-1&&(i="last");var k=!1,p,u,c,w,o,f,s,l,h="",a,v,y,e,d,b;return t&&($.isArray(t)?(a=!0,v=n):(t=[t],a=!1),this.each(function(){var g=this,rt=t.length;o=g.p.rownumbers===!0?1:0;c=g.p.multiselect===!0?1:0;w=g.p.subGrid===!0?1:0;a||(n!==undefined?n=String(n):(n=$.jgrid.randId(),g.p.keyName!==!1&&(v=g.p.keyName,t[0][v]!==undefined&&(n=t[0][v]))));y=g.p.altclass;for(var tt=0,it="",nt={},ut=$.isFunction(g.p.afterInsertRow)?!0:!1;tt<rt;){if(e=t[tt],u=[],a){try{n=e[v];n===undefined&&(n=$.jgrid.randId())}catch(ft){n=$.jgrid.randId()}it=g.p.altRows===!0?(g.rows.length-1)%2==0?y:"":""}for(b=n,n=g.p.idPrefix+n,o&&(h=g.formatCol(0,1,"",null,n,!0),u[u.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+h+">0<\/td>"),c&&(l='<input role="checkbox" type="checkbox" id="jqg_'+g.p.id+"_"+n+'" class="cbox"/>',h=g.formatCol(o,1,"",null,n,!0),u[u.length]='<td role="gridcell" '+h+">"+l+"<\/td>"),w&&(u[u.length]=$(g).jqGrid("addSubGridCell",c+o,1)),s=c+w+o;s<g.p.colModel.length;s++)d=g.p.colModel[s],p=d.name,nt[p]=e[p],l=g.formatter(n,$.jgrid.getAccessor(e,p),s,e),h=g.formatCol(s,1,l,e,n,nt),u[u.length]='<td role="gridcell" '+h+">"+l+"<\/td>";if(u.unshift(g.constructTr(n,!1,it,nt,e,!1)),u[u.length]="<\/tr>",g.rows.length===0)$("table:first",g.grid.bDiv).append(u.join(""));else switch(i){case"last":$(g.rows[g.rows.length-1]).after(u.join(""));f=g.rows.length-1;break;case"first":$(g.rows[0]).after(u.join(""));f=1;break;case"after":f=$(g).jqGrid("getGridRowById",r);f&&($(g.rows[f.rowIndex+1]).hasClass("ui-subgrid")?$(g.rows[f.rowIndex+1]).after(u):$(f).after(u.join("")),f=f.rowIndex+1);break;case"before":f=$(g).jqGrid("getGridRowById",r);f&&($(f).before(u.join("")),f=f.rowIndex-1)}g.p.subGrid===!0&&$(g).jqGrid("addSubGrid",c+o,f);g.p.records++;g.p.reccount++;$(g).triggerHandler("jqGridAfterInsertRow",[n,e,e]);ut&&g.p.afterInsertRow.call(g,n,e,e);tt++;g.p.datatype==="local"&&(nt[g.p.localReader.id]=b,g.p._index[b]=g.p.data.length,g.p.data.push(nt),nt={})}g.p.altRows!==!0||a||(i==="last"?(g.rows.length-1)%2==1&&$(g.rows[g.rows.length-1]).addClass(y):$(g.rows).each(function(n){n%2==1?$(this).addClass(y):$(this).removeClass(y)}));g.updatepager(!0,!0);k=!0})),k},footerData:function(n,t,i){function o(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var r,u=!1,f={},e;return n===undefined&&(n="get"),typeof i!="boolean"&&(i=!0),n=n.toLowerCase(),this.each(function(){var s=this,h;if(!s.grid||!s.p.footerrow||n==="set"&&o(t))return!1;u=!0;$(this.p.colModel).each(function(o){r=this.name;n==="set"?t[r]!==undefined&&(h=i?s.formatter("",t[r],o,t,"edit"):t[r],e=this.title?{title:$.jgrid.stripHtml(h)}:{},$("tr.footrow td:eq("+o+")",s.grid.sDiv).html(h).attr(e),u=!0):n==="get"&&(f[r]=$("tr.footrow td:eq("+o+")",s.grid.sDiv).html())})}),n==="get"?f:u},showHideCol:function(n,t){return this.each(function(){var i=this,e=!1,o=$.jgrid.cell_width?0:i.p.cellLayout,u,r,f;i.grid&&(typeof n=="string"&&(n=[n]),t=t!=="none"?"":"none",r=t===""?!0:!1,f=i.p.groupHeader&&(typeof i.p.groupHeader=="object"||$.isFunction(i.p.groupHeader)),f&&$(i).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(f){if($.inArray(this.name,n)!==-1&&this.hidden===r){if(i.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=row]",i.grid.hDiv).each(function(){$(this.cells[f]).css("display",t)});$(i.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[f]).css("display",t)});i.p.footerrow&&$("tr.footrow td:eq("+f+")",i.grid.sDiv).css("display",t);u=parseInt(this.width,10);t==="none"?i.p.tblwidth-=u+o:i.p.tblwidth+=u+o;this.hidden=!r;e=!0;$(i).triggerHandler("jqGridShowHideCol",[r,this.name,f])}}),e===!0&&(i.p.shrinkToFit!==!0||isNaN(i.p.height)||(i.p.tblwidth+=parseInt(i.p.scrollOffset,10)),$(i).jqGrid("setGridWidth",i.p.shrinkToFit===!0?i.p.tblwidth:i.p.width)),f&&$(i).jqGrid("setGroupHeaders",i.p.groupHeader))})},hideCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"none")})},showCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"")})},remapColumns:function(n,t,i){function u(t){var i;i=t.length?$.makeArray(t):$.extend({},t);$.each(n,function(n){t[n]=i[this]})}function f(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(n,function(){var n=i[this];n&&t.appendChild(n)})})}var r=this.get(0);u(r.p.colModel);u(r.p.colNames);u(r.grid.headers);f($("thead:first",r.grid.hDiv),i&&":not(.ui-jqgrid-labels)");t&&f($("#"+$.jgrid.jqID(r.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");r.p.footerrow&&f($("tbody:first",r.grid.sDiv));r.p.remapColumns&&(r.p.remapColumns.length?u(r.p.remapColumns):r.p.remapColumns=$.makeArray(n));r.p.lastsort=$.inArray(r.p.lastsort,n);r.p.treeGrid&&(r.p.expColInd=$.inArray(r.p.expColInd,n));$(r).triggerHandler("jqGridRemapColumns",[n,t,i])},setGridWidth:function(n,t){return this.each(function(){var a,y;if(this.grid){var i=this,r,f=0,e=$.jgrid.cell_width?0:i.p.cellLayout,u,o=0,v=!1,c=i.p.scrollOffset,l,s=0,h;if(typeof t!="boolean"&&(t=i.p.shrinkToFit),!isNaN(n)){if(n=parseInt(n,10),i.grid.width=i.p.width=n,$("#gbox_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$("#gview_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$(i.grid.bDiv).css("width",n+"px"),$(i.grid.hDiv).css("width",n+"px"),i.p.pager&&$(i.p.pager).css("width",n+"px"),i.p.toppager&&$(i.p.toppager).css("width",n+"px"),i.p.toolbar[0]===!0&&($(i.grid.uDiv).css("width",n+"px"),i.p.toolbar[1]==="both"&&$(i.grid.ubDiv).css("width",n+"px")),i.p.footerrow&&$(i.grid.sDiv).css("width",n+"px"),t===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),t===!0){if($.each(i.p.colModel,function(){this.hidden===!1&&(r=this.widthOrg,f+=r+e,this.fixed?s+=r+e:o++)}),o===0)return;if(i.p.tblwidth=f,l=n-e*o-s,isNaN(i.p.height)||($(i.grid.bDiv)[0].clientHeight<$(i.grid.bDiv)[0].scrollHeight||i.rows.length===1)&&(v=!0,l-=c),f=0,a=i.grid.cols.length>0,$.each(i.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(r=this.widthOrg,r=Math.round(l*r/(i.p.tblwidth-e*o-s)),r<0)return;this.width=r;f+=r;i.grid.headers[n].width=r;i.grid.headers[n].el.style.width=r+"px";i.p.footerrow&&(i.grid.footers[n].style.width=r+"px");a&&(i.grid.cols[n].style.width=r+"px");u=n}}),!u)return;h=0;v?n-s-(f+e*o)!==c&&(h=n-s-(f+e*o)-c):Math.abs(n-s-(f+e*o))!==1&&(h=n-s-(f+e*o));i.p.colModel[u].width+=h;i.p.tblwidth=f+h+e*o+s;i.p.tblwidth>n?(y=i.p.tblwidth-parseInt(n,10),i.p.tblwidth=n,r=i.p.colModel[u].width=i.p.colModel[u].width-y):r=i.p.colModel[u].width;i.grid.headers[u].width=r;i.grid.headers[u].el.style.width=r+"px";a&&(i.grid.cols[u].style.width=r+"px");i.p.footerrow&&(i.grid.footers[u].style.width=r+"px")}i.p.tblwidth&&($("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px"),$("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px"),i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft,i.p.footerrow&&$("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px"))}}})},setGridHeight:function(n){return this.each(function(){var t=this,i;t.grid&&(i=$(t.grid.bDiv),i.css({height:n+(isNaN(n)?"":"px")}),t.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(i.height()-16),t.p.height=n,t.p.scroll&&t.grid.populateVisible())})},setCaption:function(n){return this.each(function(){this.p.caption=n;$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(n);$(this.grid.cDiv).show();$(this.grid.hDiv).removeClass("ui-corner-top")})},setLabel:function(n,t,i,r){return this.each(function(){var f=this,e=-1,u,o;if(f.grid){if(n!==undefined)$(f.p.colModel).each(function(t){if(this.name===n)return e=t,!1});else return;e>=0&&(u=$("tr.ui-jqgrid-labels th:eq("+e+")",f.grid.hDiv),t&&(o=$(".s-ico",u),$("[id^=jqgh_]",u).empty().html(t).append(o),f.p.colNames[e]=t),i&&(typeof i=="string"?$(u).addClass(i):$(u).css(i)),typeof r=="object"&&$(u).attr(r))}})},setCell:function(n,t,i,r,u,f){return this.each(function(){var e=this,o=-1,l,a,s,c,y;if(e.grid&&(isNaN(t)?$(e.p.colModel).each(function(n){if(this.name===t)return o=n,!1}):o=parseInt(t,10),o>=0&&(s=$(e).jqGrid("getGridRowById",n),s))){var h=$("td:eq("+o+")",s),v=0,p=[];if(i!==""||f===!0){if(s.cells!==undefined)while(v<s.cells.length)p.push(s.cells[v].innerHTML),v++;l=e.formatter(n,i,o,p,"edit");a=e.p.colModel[o].title?{title:$.jgrid.stripHtml(l)}:{};e.p.treeGrid&&$(".tree-wrap",$(h)).length>0?$("span",$(h)).html(l).attr(a):$(h).html(l).attr(a);e.p.datatype==="local"&&(c=e.p.colModel[o],i=c.formatter&&typeof c.formatter=="string"&&c.formatter==="date"?$.unformat.date.call(e,i,c):i,y=e.p._index[$.jgrid.stripPref(e.p.idPrefix,n)],y!==undefined&&(e.p.data[y][c.name]=i))}typeof r=="string"?$(h).addClass(r):r&&$(h).css(r);typeof u=="object"&&$(h).attr(u)}})},getCell:function(n,t){var i=!1;return this.each(function(){var u=this,r=-1,f;if(u.grid&&(isNaN(t)?$(u.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10),r>=0&&(f=$(u).jqGrid("getGridRowById",n),f)))try{i=$.unformat.call(u,$("td:eq("+r+")",f),{rowId:f.id,colModel:u.p.colModel[r]},r)}catch(e){i=$.jgrid.htmlDecode($("td:eq("+r+")",f).html())}}),i},getCol:function(n,t,i){var r=[],f,s=0,o,e,u;return t=typeof t!="boolean"?!1:t,i===undefined&&(i=!1),this.each(function(){var h=this,c=-1;if(h.grid&&(isNaN(n)?$(h.p.colModel).each(function(t){if(this.name===n)return c=t,!1}):c=parseInt(n,10),c>=0)){var a=h.rows.length,l=0,v=0;if(a&&a>0){while(l<a){if($(h.rows[l]).hasClass("jqgrow")){try{f=$.unformat.call(h,$(h.rows[l].cells[c]),{rowId:h.rows[l].id,colModel:h.p.colModel[c]},c)}catch(y){f=$.jgrid.htmlDecode(h.rows[l].cells[c].innerHTML)}i?(u=parseFloat(f),isNaN(u)||(s+=u,e===undefined&&(e=o=u),o=Math.min(o,u),e=Math.max(e,u),v++)):t?r.push({id:h.rows[l].id,value:f}):r.push(f)}l++}if(i)switch(i.toLowerCase()){case"sum":r=s;break;case"avg":r=s/v;break;case"count":r=a-1;break;case"min":r=o;break;case"max":r=e}}}}),r},clearGridData:function(n){return this.each(function(){var t=this,i;t.grid&&(typeof n!="boolean"&&(n=!1),t.p.deepempty?$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove():(i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0],$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)),t.p.footerrow&&n&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=$(this).jqGrid("getGridRowById",n);i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(n){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},n||{});return this.each(function(){var n=this;$("body").is("[role]")||$("body").attr("role","application");n.p.scrollrows=t.scrollingRows;$(n).keydown(function(i){var f=$(n).find("tr[tabindex=0]")[0],u,r,e,o=n.p.treeReader.expanded_field;if(f)if(e=n.p._index[$.jgrid.stripPref(n.p.idPrefix,f.id)],i.keyCode===37||i.keyCode===38||i.keyCode===39||i.keyCode===40){if(i.keyCode===38){if(r=f.previousSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u,!0,i);i.preventDefault()}if(i.keyCode===40){if(r=f.nextSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u,!0,i);i.preventDefault()}i.keyCode===37&&(n.p.treeGrid&&n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$(n).triggerHandler("jqGridKeyLeft",[n.p.selrow]),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(n,n.p.selrow));i.keyCode===39&&(n.p.treeGrid&&!n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$(n).triggerHandler("jqGridKeyRight",[n.p.selrow]),$.isFunction(t.onRightKey)&&t.onRightKey.call(n,n.p.selrow))}else i.keyCode===13?($(n).triggerHandler("jqGridKeyEnter",[n.p.selrow]),$.isFunction(t.onEnter)&&t.onEnter.call(n,n.p.selrow)):i.keyCode===32&&($(n).triggerHandler("jqGridKeySpace",[n.p.selrow]),$.isFunction(t.onSpace)&&t.onSpace.call(n,n.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(n){var i=!1,t;return this.each(function(){n!==undefined&&(t=this.p._index[$.jgrid.stripPref(this.p.idPrefix,n)],t>=0&&(i=this.p.data[t]))}),i},progressBar:function(n){return n=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},n||{}),this.each(function(){var t=n.method==="show"?!0:!1;n.htmlcontent!==""&&$("#load_"+$.jgrid.jqID(this.p.id)).html(n.htmlcontent);switch(n.loadtype){case"enable":$("#load_"+$.jgrid.jqID(this.p.id)).toggle(t);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(t);$("#load_"+$.jgrid.jqID(this.p.id)).toggle(t)}})},getColProp:function(n){var r={},u=this[0],i,t;if(!u.grid)return!1;for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name===n){r=i[t];break}return r},setColProp:function(n,t){return this.each(function(){if(this.grid&&t)for(var r=this.p.colModel,i=0;i<r.length;i++)if(r[i].name===n){$.extend(!0,this.p.colModel[i],t);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,f=-1,u,e=!1,o;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index===n||r.p.colModel[u].name===n){f=u;r.p.frozenColumns===!0&&r.p.colModel[u].frozen===!0&&(e=r.grid.fhDiv.find("#"+r.p.id+"_"+n));break}f!==-1&&(o=r.p.colModel[f].sortable,e||(e=r.grid.headers[f].el),typeof o!="boolean"&&(o=!0),typeof t!="boolean"&&(t=!1),o&&r.sortData("jqgh_"+r.p.id+"_"+n,f,t,i,e))}})},setGridState:function(n){return this.each(function(){if(this.grid){var t=this;n==="hidden"?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideUp("fast"),t.p.pager&&$(t.p.pager).slideUp("fast"),t.p.toppager&&$(t.p.toppager).slideUp("fast"),t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&$(t.grid.ubDiv).slideUp("fast"),$(t.grid.uDiv).slideUp("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),t.p.gridstate="hidden"):n==="visible"&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideDown("fast"),t.p.pager&&$(t.p.pager).slideDown("fast"),t.p.toppager&&$(t.p.toppager).slideDown("fast"),t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&$(t.grid.ubDiv).slideDown("fast"),$(t.grid.uDiv).slideDown("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),t.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){var i,o,r,f,e,h,a,v,s;if(this.grid){var n=this,c=n.p.colModel,u=0,y=c.length,t=-1,l=!1;if(n.p.subGrid!==!0&&n.p.treeGrid!==!0&&n.p.cellEdit!==!0&&!n.p.sortable&&!n.p.scroll){for(n.p.rownumbers&&u++,n.p.multiselect&&u++;u<y;){if(c[u].frozen===!0)l=!0,t=u;else break;u++}t>=0&&l&&(i=n.p.caption?$(n.grid.cDiv).outerHeight():0,o=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(n.p.id)).height(),n.p.toppager&&(i=i+$(n.grid.topDiv).outerHeight()),n.p.toolbar[0]===!0&&n.p.toolbar[1]!=="bottom"&&(i=i+$(n.grid.uDiv).outerHeight()),n.grid.fhDiv=$('<div style="position:absolute;left:0px;top:'+i+"px;height:"+o+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"><\/div>'),n.grid.fbDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(i,10)+parseInt(o,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"><\/div>'),$("#gview_"+$.jgrid.jqID(n.p.id)).append(n.grid.fhDiv),r=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(n.p.id)).clone(!0),n.p.groupHeader?($("tr.jqg-first-row-header, tr.jqg-third-row-header",r).each(function(){$("th:gt("+t+")",this).remove()}),f=-1,e=-1,$("tr.jqg-second-row-header th",r).each(function(){return h=parseInt($(this).attr("colspan"),10),a=parseInt($(this).attr("rowspan"),10),a&&(f++,e++),h&&(f=f+h,e++),f===t?!1:void 0}),f!==t&&(e=t),$("tr.jqg-second-row-header",r).each(function(){$("th:gt("+e+")",this).remove()})):$("tr",r).each(function(){$("th:gt("+t+")",this).remove()}),$(r).width(1),$(n.grid.fhDiv).append(r).mousemove(function(t){if(n.grid.resizing)return n.grid.dragMove(t),!1}),n.p.footerrow&&(v=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(n.p.id)).height(),n.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(i,10)+parseInt(o,10)+parseInt(v,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"><\/div>'),$("#gview_"+$.jgrid.jqID(n.p.id)).append(n.grid.fsDiv),s=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(n.p.id)).clone(!0),$("tr",s).each(function(){$("td:gt("+t+")",this).remove()}),$(s).width(1),$(n.grid.fsDiv).append(s)),$(n).bind("jqGridResizeStop.setFrozenColumns",function(t,i,r){var e=$(".ui-jqgrid-htable",n.grid.fhDiv),u,f;$("th:eq("+r+")",e).width(i);u=$(".ui-jqgrid-btable",n.grid.fbDiv);$("tr:first td:eq("+r+")",u).width(i);n.p.footerrow&&(f=$(".ui-jqgrid-ftable",n.grid.fsDiv),$("tr:first td:eq("+r+")",f).width(i))}),$(n).bind("jqGridSortCol.setFrozenColumns",function(t,i,r){var u=$("tr.ui-jqgrid-labels:last th:eq("+n.p.lastsort+")",n.grid.fhDiv),f=$("tr.ui-jqgrid-labels:last th:eq("+r+")",n.grid.fhDiv);$("span.ui-grid-ico-sort",u).addClass("ui-state-disabled");$(u).attr("aria-selected","false");$("span.ui-icon-"+n.p.sortorder,f).removeClass("ui-state-disabled");$(f).attr("aria-selected","true");n.p.viewsortcols[0]||n.p.lastsort!==r&&($("span.s-ico",u).hide(),$("span.s-ico",f).show())}),$("#gview_"+$.jgrid.jqID(n.p.id)).append(n.grid.fbDiv),$(n.grid.bDiv).scroll(function(){$(n.grid.fbDiv).scrollTop($(this).scrollTop())}),n.p.hoverrows===!0&&$("#"+$.jgrid.jqID(n.p.id)).unbind("mouseover").unbind("mouseout"),$(n).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(n.p.id)+"_frozen").remove();$(n.grid.fbDiv).height($(n.grid.bDiv).height()-16);var i=$("#"+$.jgrid.jqID(n.p.id)).clone(!0);$("tr[role=row]",i).each(function(){$("td[role=gridcell]:gt("+t+")",this).remove()});$(i).width(1).attr("id",n.p.id+"_frozen");$(n.grid.fbDiv).append(i);n.p.hoverrows===!0&&($("tr.jqgrow",i).hover(function(){$(this).addClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)).removeClass("ui-state-hover")}),$("tr.jqgrow","#"+$.jgrid.jqID(n.p.id)).hover(function(){$(this).addClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)+"_frozen").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover");$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)+"_frozen").removeClass("ui-state-hover")}));i=null}),n.grid.hDiv.loading||$(n).triggerHandler("jqGridAfterGridComplete"),n.p.frozenColumns=!0)}}})},destroyFrozenColumns:function(){return this.each(function(){var n,t;this.grid&&this.p.frozenColumns===!0&&(n=this,$(n.grid.fhDiv).remove(),$(n.grid.fbDiv).remove(),n.grid.fhDiv=null,n.grid.fbDiv=null,n.p.footerrow&&($(n.grid.fsDiv).remove(),n.grid.fsDiv=null),$(this).unbind(".setFrozenColumns"),n.p.hoverrows===!0&&$("#"+$.jgrid.jqID(n.p.id)).bind("mouseover",function(n){t=$(n.target).closest("tr.jqgrow");$(t).attr("class")!=="ui-subgrid"&&$(t).addClass("ui-state-hover")}).bind("mouseout",function(n){t=$(n.target).closest("tr.jqgrow");$(t).removeClass("ui-state-hover")}),this.p.frozenColumns=!1)})}});$.jgrid.extend({editCell:function(n,t,i){return this.each(function(){var r=this,f,u,e,o,h,c,s;if(r.grid&&r.p.cellEdit===!0){if(t=parseInt(t,10),r.p.selrow=r.rows[n].id,r.p.knv||$(r).jqGrid("GridNav"),r.p.savedRow.length>0){if(i===!0&&n==r.p.iRow&&t==r.p.iCol)return;$(r).jqGrid("saveCell",r.p.savedRow[0].id,r.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},1);if(o=r.p.colModel[t],f=o.name,f!=="subgrid"&&f!=="cb"&&f!=="rn"){if(e=$("td:eq("+t+")",r.rows[n]),o.editable!==!0||i!==!0||e.hasClass("not-editable-cell")||$.isFunction(r.p.isCellEditable)&&!r.p.isCellEditable.call(r,f,n,t))parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&($("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover")),e.addClass("edit-cell ui-state-highlight"),$(r.rows[n]).addClass("selected-row ui-state-hover"),u=e.html().replace(/\&#160\;/ig,""),$(r).triggerHandler("jqGridSelectCell",[r.rows[n].id,f,u,n,t]),$.isFunction(r.p.onSelectCell)&&r.p.onSelectCell.call(r,r.rows[n].id,f,u,n,t);else{parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&($("td:eq("+r.p.iCol+")",r.rows[r.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(r.rows[r.p.iRow]).removeClass("selected-row ui-state-hover"));$(e).addClass("edit-cell ui-state-highlight");$(r.rows[n]).addClass("selected-row ui-state-hover");try{u=$.unformat.call(r,e,{rowId:r.rows[n].id,colModel:o},t)}catch(l){u=o.edittype&&o.edittype==="textarea"?$(e).text():$(e).html()}r.p.autoencode&&(u=$.jgrid.htmlDecode(u));o.edittype||(o.edittype="text");r.p.savedRow.push({id:n,ic:t,name:f,v:u});(u==="&nbsp;"||u==="&#160;"||u.length===1&&u.charCodeAt(0)===160)&&(u="");$.isFunction(r.p.formatCell)&&(h=r.p.formatCell.call(r,r.rows[n].id,f,u,n,t),h!==undefined&&(u=h));$(r).triggerHandler("jqGridBeforeEditCell",[r.rows[n].id,f,u,n,t]);$.isFunction(r.p.beforeEditCell)&&r.p.beforeEditCell.call(r,r.rows[n].id,f,u,n,t);c=$.extend({},o.editoptions||{},{id:n+"_"+f,name:f,rowId:r.rows[n].id,oper:"edit"});s=$.jgrid.createEl.call(r,o.edittype,c,u,!0,$.extend({},$.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));$(e).html("").append(s).attr("tabindex","0");$.jgrid.bindEv.call(r,s,c);window.setTimeout(function(){$(s).focus()},1);$("input, select, textarea",e).bind("keydown",function(i){if(i.keyCode===27&&($("input.hasDatepicker",e).length>0?$(".ui-datepicker").is(":hidden")?$(r).jqGrid("restoreCell",n,t):$("input.hasDatepicker",e).datepicker("hide"):$(r).jqGrid("restoreCell",n,t)),i.keyCode===13&&!i.shiftKey)return $(r).jqGrid("saveCell",n,t),!1;if(i.keyCode===9){if(r.grid.hDiv.loading)return!1;i.shiftKey?$(r).jqGrid("prevCell",n,t):$(r).jqGrid("nextCell",n,t)}i.stopPropagation()});$(r).triggerHandler("jqGridAfterEditCell",[r.rows[n].id,f,u,n,t]);$.isFunction(r.p.afterEditCell)&&r.p.afterEditCell.call(r,r.rows[n].id,f,u,n,t)}r.p.iCol=t;r.p.iRow=n}}})},saveCell:function(n,t){return this.each(function(){var i=this,b,h=$.jgrid.getRegional(this,"errors"),o=$.jgrid.getRegional(this,"edit"),k,d,v,y,p,nt,a,e,tt,it,w;if(i.grid&&i.p.cellEdit===!0){if(b=i.p.savedRow.length>=1?0:null,b!==null){var c=$("td:eq("+t+")",i.rows[n]),r,f,s=i.p.colModel[t],u=s.name,l=$.jgrid.jqID(u);switch(s.edittype){case"select":s.editoptions.multiple?(k=$("#"+n+"_"+l,i.rows[n]),d=[],r=$(k).val(),r?r.join(","):r="",$("option:selected",k).each(function(n,t){d[n]=$(t).text()}),f=d.join(",")):(r=$("#"+n+"_"+l+" option:selected",i.rows[n]).val(),f=$("#"+n+"_"+l+" option:selected",i.rows[n]).text());s.formatter&&(f=r);break;case"checkbox":v=["Yes","No"];s.editoptions&&(v=s.editoptions.value.split(":"));r=$("#"+n+"_"+l,i.rows[n]).is(":checked")?v[0]:v[1];f=r;break;case"password":case"text":case"textarea":case"button":r=$("#"+n+"_"+l,i.rows[n]).val();f=r;break;case"custom":try{if(s.editoptions&&$.isFunction(s.editoptions.custom_value))if(r=s.editoptions.custom_value.call(i,$(".customelement",c),"get"),r===undefined)throw"e2";else f=r;else throw"e1";}catch(g){g==="e1"&&$.jgrid.info_dialog(h.errcap,"function 'custom_value' "+o.msg.nodefined,o.bClose);g==="e2"?$.jgrid.info_dialog(h.errcap,"function 'custom_value' "+o.msg.novalue,o.bClose):$.jgrid.info_dialog(h.errcap,g.message,o.bClose)}}if(f!==i.p.savedRow[b].v)if(y=$(i).triggerHandler("jqGridBeforeSaveCell",[i.rows[n].id,u,r,n,t]),y&&(r=y,f=y),$.isFunction(i.p.beforeSaveCell)&&(p=i.p.beforeSaveCell.call(i,i.rows[n].id,u,r,n,t),p&&(r=p,f=p)),nt=$.jgrid.checkValues.call(i,r,t),nt[0]===!0){if(a=$(i).triggerHandler("jqGridBeforeSubmitCell",[i.rows[n].id,u,r,n,t])||{},$.isFunction(i.p.beforeSubmitCell)&&(a=i.p.beforeSubmitCell.call(i,i.rows[n].id,u,r,n,t),a||(a={})),$("input.hasDatepicker",c).length>0&&$("input.hasDatepicker",c).datepicker("hide"),i.p.cellsubmit==="remote")if(i.p.cellurl)e={},i.p.autoencode&&(r=$.jgrid.htmlEncode(r)),e[u]=r,w=i.p.prmNames,tt=w.id,it=w.oper,e[tt]=$.jgrid.stripPref(i.p.idPrefix,i.rows[n].id),e[it]=w.editoper,e=$.extend(a,e),$(i).jqGrid("progressBar",{method:"show",loadtype:i.p.loadui,htmlcontent:$.jgrid.getRegional(i,"defaults.savetext")}),i.grid.hDiv.loading=!0,$.ajax($.extend({url:i.p.cellurl,data:$.isFunction(i.p.serializeCellData)?i.p.serializeCellData.call(i,e):e,type:"POST",complete:function(s,l){if($(i).jqGrid("progressBar",{method:"hide",loadtype:i.p.loadui}),i.grid.hDiv.loading=!1,l==="success"){var a=$(i).triggerHandler("jqGridAfterSubmitCell",[i,s,e.id,u,r,n,t])||[!0,""];a[0]===!0&&$.isFunction(i.p.afterSubmitCell)&&(a=i.p.afterSubmitCell.call(i,s,e.id,u,r,n,t));a[0]===!0?($(c).empty(),$(i).jqGrid("setCell",i.rows[n].id,t,f,!1,!1,!0),$(c).addClass("dirty-cell"),$(i.rows[n]).addClass("edited"),$(i).triggerHandler("jqGridAfterSaveCell",[i.rows[n].id,u,r,n,t]),$.isFunction(i.p.afterSaveCell)&&i.p.afterSaveCell.call(i,i.rows[n].id,u,r,n,t),i.p.savedRow.splice(0,1)):($.jgrid.info_dialog(h.errcap,a[1],o.bClose),$(i).jqGrid("restoreCell",n,t))}},error:function(r,u,f){$("#lui_"+$.jgrid.jqID(i.p.id)).hide();i.grid.hDiv.loading=!1;$(i).triggerHandler("jqGridErrorCell",[r,u,f]);$.isFunction(i.p.errorCell)?(i.p.errorCell.call(i,r,u,f),$(i).jqGrid("restoreCell",n,t)):($.jgrid.info_dialog(h.errcap,r.status+" : "+r.statusText+"<br/>"+u,o.bClose),$(i).jqGrid("restoreCell",n,t))}},$.jgrid.ajaxOptions,i.p.ajaxCellOptions||{}));else try{$.jgrid.info_dialog(h.errcap,h.nourl,o.bClose);$(i).jqGrid("restoreCell",n,t)}catch(g){}i.p.cellsubmit==="clientArray"&&($(c).empty(),$(i).jqGrid("setCell",i.rows[n].id,t,f,!1,!1,!0),$(c).addClass("dirty-cell"),$(i.rows[n]).addClass("edited"),$(i).triggerHandler("jqGridAfterSaveCell",[i.rows[n].id,u,r,n,t]),$.isFunction(i.p.afterSaveCell)&&i.p.afterSaveCell.call(i,i.rows[n].id,u,r,n,t),i.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){$.jgrid.info_dialog(h.errcap,r+" "+nt[1],o.bClose)},100);$(i).jqGrid("restoreCell",n,t)}catch(g){}else $(i).jqGrid("restoreCell",n,t)}window.setTimeout(function(){$("#"+$.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(n,t){return this.each(function(){var i=this,r,u;if(i.grid&&i.p.cellEdit===!0){if(r=i.p.savedRow.length>=1?0:null,r!==null){if(u=$("td:eq("+t+")",i.rows[n]),$.isFunction($.fn.datepicker))try{$("input.hasDatepicker",u).datepicker("hide")}catch(f){}$(u).empty().attr("tabindex","-1");$(i).jqGrid("setCell",i.rows[n].id,t,i.p.savedRow[r].v,!1,!1,!0);$(i).triggerHandler("jqGridAfterRestoreCell",[i.rows[n].id,i.p.savedRow[r].v,n,t]);$.isFunction(i.p.afterRestoreCell)&&i.p.afterRestoreCell.call(i,i.rows[n].id,i.p.savedRow[r].v,n,t);i.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+i.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(n,t){return this.each(function(){var i=this,u=!1,r;if(i.grid&&i.p.cellEdit===!0){for(r=t+1;r<i.p.colModel.length;r++)if(i.p.colModel[r].editable===!0&&(!$.isFunction(i.p.isCellEditable)||i.p.isCellEditable.call(i,i.p.colModel[r].name,n,r))){u=r;break}u!==!1?$(i).jqGrid("editCell",n,u,!0):i.p.savedRow.length>0&&$(i).jqGrid("saveCell",n,t)}})},prevCell:function(n,t){return this.each(function(){var i=this,u=!1,r;if(i.grid&&i.p.cellEdit===!0){for(r=t-1;r>=0;r--)if(i.p.colModel[r].editable===!0&&(!$.isFunction(i.p.isCellEditable)||i.p.isCellEditable.call(i,i.p.colModel[r].name,n,r))){u=r;break}u!==!1?$(i).jqGrid("editCell",n,u,!0):i.p.savedRow.length>0&&$(i).jqGrid("saveCell",n,t)}})},GridNav:function(){return this.each(function(){function r(t,i,r){if(r.substr(0,1)==="v"){var f=$(n.grid.bDiv)[0].clientHeight,e=$(n.grid.bDiv)[0].scrollTop,o=n.rows[t].offsetTop+n.rows[t].clientHeight,s=n.rows[t].offsetTop;r==="vd"&&o>=f&&($(n.grid.bDiv)[0].scrollTop=$(n.grid.bDiv)[0].scrollTop+n.rows[t].clientHeight);r==="vu"&&s<e&&($(n.grid.bDiv)[0].scrollTop=$(n.grid.bDiv)[0].scrollTop-n.rows[t].clientHeight)}if(r==="h"){var h=$(n.grid.bDiv)[0].clientWidth,u=$(n.grid.bDiv)[0].scrollLeft,c=n.rows[t].cells[i].offsetLeft+n.rows[t].cells[i].clientWidth,l=n.rows[t].cells[i].offsetLeft;c>=h+parseInt(u,10)?$(n.grid.bDiv)[0].scrollLeft=$(n.grid.bDiv)[0].scrollLeft+n.rows[t].cells[i].clientWidth:l<u&&($(n.grid.bDiv)[0].scrollLeft=$(n.grid.bDiv)[0].scrollLeft-n.rows[t].cells[i].clientWidth)}}function f(t,i){var u,r;if(i==="lft")for(u=t+1,r=t;r>=0;r--)if(n.p.colModel[r].hidden!==!0){u=r;break}if(i==="rgt")for(u=t-1,r=t;r<n.p.colModel.length;r++)if(n.p.colModel[r].hidden!==!0){u=r;break}return u}var n=this,u,t,i;n.grid&&n.p.cellEdit===!0&&(n.p.knv=n.p.id+"_kn",u=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+n.p.knv+"'><\/div><\/div>"),$(u).insertBefore(n.grid.cDiv),$("#"+n.p.knv).focus().keydown(function(u){i=u.keyCode;n.p.direction==="rtl"&&(i===37?i=39:i===39&&(i=37));switch(i){case 38:n.p.iRow-1>0&&(r(n.p.iRow-1,n.p.iCol,"vu"),$(n).jqGrid("editCell",n.p.iRow-1,n.p.iCol,!1));break;case 40:n.p.iRow+1<=n.rows.length-1&&(r(n.p.iRow+1,n.p.iCol,"vd"),$(n).jqGrid("editCell",n.p.iRow+1,n.p.iCol,!1));break;case 37:n.p.iCol-1>=0&&(t=f(n.p.iCol-1,"lft"),r(n.p.iRow,t,"h"),$(n).jqGrid("editCell",n.p.iRow,t,!1));break;case 39:n.p.iCol+1<=n.p.colModel.length-1&&(t=f(n.p.iCol+1,"rgt"),r(n.p.iRow,t,"h"),$(n).jqGrid("editCell",n.p.iRow,t,!1));break;case 13:parseInt(n.p.iCol,10)>=0&&parseInt(n.p.iRow,10)>=0&&$(n).jqGrid("editCell",n.p.iRow,n.p.iCol,!0);break;default:return!0}return!1}))})},getChangedCells:function(n){var t=[];return n||(n="all"),this.each(function(){var i=this,r;i.grid&&i.p.cellEdit===!0&&$(i.rows).each(function(u){var f={};$(this).hasClass("edited")&&($("td",this).each(function(t){if(r=i.p.colModel[t].name,r!=="cb"&&r!=="subgrid")if(n==="dirty"){if($(this).hasClass("dirty-cell"))try{f[r]=$.unformat.call(i,this,{rowId:i.rows[u].id,colModel:i.p.colModel[t]},t)}catch(e){f[r]=$.jgrid.htmlDecode($(this).html())}}else try{f[r]=$.unformat.call(i,this,{rowId:i.rows[u].id,colModel:i.p.colModel[t]},t)}catch(e){f[r]=$.jgrid.htmlDecode($(this).html())}}),f.id=this.id,t.push(f))})}),t}});$.extend($.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal:function(n,t){var i,f,r,u,e;if(t=$.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},t||{}),i=t.gb&&typeof t.gb=="string"&&t.gb.substr(0,6)==="#gbox_"?$("#"+t.gb.substr(6))[0]:!1,!t.onClose||(f=i?t.onClose.call(i,n):t.onClose(n),typeof f!="boolean"||f)){if(t.formprop&&i&&t.form&&(r=$(n)[0].style.height,r.indexOf("px")>-1&&(r=parseFloat(r)),t.form==="edit"?(u="#"+$.jgrid.jqID("FrmGrid_"+t.gb.substr(6)),e="formProp"):t.form==="view"&&(u="#"+$.jgrid.jqID("ViewGrid_"+t.gb.substr(6)),e="viewProp"),$(i).data(e,{top:parseFloat($(n).css("top")),left:parseFloat($(n).css("left")),width:$(n).width(),height:r,dataheight:$(u).height(),datawidth:$(u).width()})),$.fn.jqm&&t.jqm===!0)$(n).attr("aria-hidden","true").jqmHide();else{if(t.gb!=="")try{$(".jqgrid-overlay:first",t.gb).hide()}catch(o){}$(n).hide().attr("aria-hidden","true")}t.removemodal&&$(n).remove()}},findPos:function(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]},createModal:function(n,t,i,r,u,f,e){var o,v,y,s,c,l,h,a,p,w;if(i=$.extend(!0,{},$.jgrid.jqModal||{},i),o=document.createElement("div"),y=this,e=$.extend({},e||{}),v=$(i.gbox).attr("dir")==="rtl"?!0:!1,o.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",o.id=n.themodal,s=document.createElement("div"),s.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",s.id=n.modalhead,$(s).append("<span class='ui-jqdialog-title'>"+i.caption+"<\/span>"),c=$("<a class='ui-jqdialog-titlebar-close ui-corner-all'><\/a>").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'><\/span>"),$(s).append(c),v?(o.dir="rtl",$(".ui-jqdialog-title",s).css("float","right"),$(".ui-jqdialog-titlebar-close",s).css("left",.3+"em")):(o.dir="ltr",$(".ui-jqdialog-title",s).css("float","left"),$(".ui-jqdialog-titlebar-close",s).css("right",.3+"em")),l=document.createElement("div"),$(l).addClass("ui-jqdialog-content ui-widget-content").attr("id",n.modalcontent),$(l).append(t),o.appendChild(l),$(o).prepend(s),f===!0?$("body").append(o):typeof f=="string"?$(f).append(o):$(o).insertBefore(r),$(o).css(e),i.jqModal===undefined&&(i.jqModal=!0),h={},$.fn.jqm&&i.jqModal===!0?(i.left===0&&i.top===0&&i.overlay&&(a=[],a=$.jgrid.findPos(u),i.left=a[0]+4,i.top=a[1]+4),h.top=i.top+"px",h.left=i.left):(i.left!==0||i.top!==0)&&(h.left=i.left,h.top=i.top+"px"),$("a.ui-jqdialog-titlebar-close",s).click(function(){var t=$("#"+$.jgrid.jqID(n.themodal)).data("onClose")||i.onClose,r=$("#"+$.jgrid.jqID(n.themodal)).data("gbox")||i.gbox;return y.hideModal("#"+$.jgrid.jqID(n.themodal),{gb:r,jqm:i.jqModal,onClose:t,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""}),!1}),i.width!==0&&i.width||(i.width=300),i.height!==0&&i.height||(i.height=200),i.zIndex||(p=$(r).parents("*[role=dialog]").filter(":first").css("z-index"),i.zIndex=p?parseInt(p,10)+2:950),w=0,v&&h.left&&!f&&(w=$(i.gbox).width()-(isNaN(i.width)?0:parseInt(i.width,10))-8,h.left=parseInt(h.left,10)+parseInt(w,10)),h.left&&(h.left+="px"),$(o).css($.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},h)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":n.modalhead,"aria-hidden":"true"}),i.drag===undefined&&(i.drag=!0),i.resize===undefined&&(i.resize=!0),i.drag)if($(s).css("cursor","move"),$.fn.jqDrag)$(o).jqDrag(s);else try{$(o).draggable({handle:$("#"+$.jgrid.jqID(s.id))})}catch(b){}if(i.resize)if($.fn.jqResize)$(o).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'><\/div>"),$("#"+$.jgrid.jqID(n.themodal)).jqResize(".jqResize",n.scrollelm?"#"+$.jgrid.jqID(n.scrollelm):!1);else try{$(o).resizable({handles:"se, sw",alsoResize:n.scrollelm?"#"+$.jgrid.jqID(n.scrollelm):!1})}catch(k){}i.closeOnEscape===!0&&$(o).keydown(function(t){if(t.which===27){var r=$("#"+$.jgrid.jqID(n.themodal)).data("onClose")||i.onClose;y.hideModal("#"+$.jgrid.jqID(n.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:r,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""})}})},viewModal:function(n,t){if(t=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},t||{}),$.fn.jqm&&t.jqm===!0)t.jqM?$(n).attr("aria-hidden","false").jqm(t).jqmShow():$(n).attr("aria-hidden","false").jqmShow();else{t.gbox!==""&&($(".jqgrid-overlay:first",t.gbox).show(),$(n).data("gbox",t.gbox));$(n).show().attr("aria-hidden","false");try{$(":input:visible",n)[0].focus()}catch(i){}}},info_dialog:function(n,t,i,r){var u={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},e,h,o,f;if($.extend(!0,u,$.jgrid.jqModal||{},{caption:"<b>"+n+"<\/b>"},r||{}),e=u.jqModal,h=this,$.fn.jqm&&!e&&(e=!1),o="",u.buttons.length>0)for(f=0;f<u.buttons.length;f++)u.buttons[f].id===undefined&&(u.buttons[f].id="info_button_"+f),o+="<a id='"+u.buttons[f].id+"' class='fm-button ui-state-default ui-corner-all'>"+u.buttons[f].text+"<\/a>";var c=isNaN(u.dataheight)?u.dataheight:u.dataheight+"px",l="text-align:"+u.align+";",s="<div id='info_id'>";s+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+c+";"+l+"'>"+t+"<\/div>";s+=i?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+u.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+i+"<\/a>"+o+"<\/div>":o!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+u.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+o+"<\/div>":"";s+="<\/div>";try{$("#info_dialog").attr("aria-hidden")==="false"&&$.jgrid.hideModal("#info_dialog",{jqm:e});$("#info_dialog").remove()}catch(a){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},s,u,"","",!0);o&&$.each(u.buttons,function(n){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){return u.buttons[n].onClick.call($("#info_dialog")),!1})});$("#closedialog","#info_id").click(function(){return h.hideModal("#info_dialog",{jqm:e,onClose:$("#info_dialog").data("onClose")||u.onClose,gb:$("#info_dialog").data("gbox")||u.gbox}),!1});$(".fm-button","#info_dialog").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});$.isFunction(u.beforeOpen)&&u.beforeOpen();$.jgrid.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:u.modal,jqm:e});$.isFunction(u.afterOpen)&&u.afterOpen();try{$("#info_dialog").focus()}catch(v){}},bindEv:function(n,t){var i=this;$.isFunction(t.dataInit)&&t.dataInit.call(i,n,t);t.dataEvents&&$.each(t.dataEvents,function(){this.data!==undefined?$(n).bind(this.type,this.data,this.fn):$(n).bind(this.type,this.fn)})},createEl:function(n,t,i,r,u){function y(n,t,i){var r=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];i!==undefined&&$.isArray(i)&&$.merge(r,i);$.each(t,function(t,i){$.inArray(t,r)===-1&&$(n).attr(t,i)});t.hasOwnProperty("id")||$(n).attr("id",$.jgrid.randId())}var f="",o=this,tt,d,c,l,w,it,rt,v,e,ut,ft,a,g,h,s,et,k,nt,p;switch(n){case"textarea":f=document.createElement("textarea");r?t.cols||$(f).css({width:"98%"}):t.cols||(t.cols=20);t.rows||(t.rows=2);(i==="&nbsp;"||i==="&#160;"||i.length===1&&i.charCodeAt(0)===160)&&(i="");f.value=i;y(f,t);$(f).attr({role:"textbox",multiline:"true"});break;case"checkbox":f=document.createElement("input");f.type="checkbox";t.value?(d=t.value.split(":"),i===d[0]&&(f.checked=!0,f.defaultChecked=!0),f.value=d[0],$(f).attr("offval",d[1])):(tt=(i+"").toLowerCase(),tt.search(/(false|f|0|no|n|off|undefined)/i)<0&&tt!==""?(f.checked=!0,f.defaultChecked=!0,f.value=i):f.value="on",$(f).attr("offval","off"));y(f,t,["value"]);$(f).attr("role","checkbox");break;case"select":if(f=document.createElement("select"),f.setAttribute("role","select"),l=[],t.multiple===!0?(c=!0,f.multiple="multiple",$(f).attr("aria-multiselectable","true")):c=!1,t.dataUrl!=null){w=null;it=t.postData||u.postData;try{w=t.rowId}catch(b){}o.p&&o.p.idPrefix&&(w=$.jgrid.stripPref(o.p.idPrefix,w));$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(o,w,i,String(t.name)):t.dataUrl,contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",data:"{id:"+it.id+"}",context:{elem:f,options:t,vl:i},success:function(n){var i=[],f=this.elem,r=this.vl,t=$.extend({},this.options),h=t.multiple===!0,c=t.cacheUrlData===!0,e="",s,u=$.isFunction(t.buildSelect)?t.buildSelect.call(o,n):n;typeof u=="string"&&(u=$($.trim(u)).html());u&&($(f).append(u),y(f,t,it?["postData"]:undefined),t.size===undefined&&(t.size=h?3:1),h?(i=r.split(","),i=$.map(i,function(n){return $.trim(n)})):i[0]=$.trim(r),setTimeout(function(){if($("option",f).each(function(n){s=$(this).text();r=$(this).val()||s;c&&(e+=(n!==0?";":"")+r+":"+s);n===0&&f.multiple&&(this.selected=!1);$(this).attr("role","option");($.inArray($.trim(s),i)>-1||$.inArray($.trim(r),i)>-1)&&(this.selected="selected")}),c)if(t.oper==="edit")$(o).jqGrid("setColProp",t.name,{editoptions:{buildSelect:null,dataUrl:null,value:e}});else if(t.oper==="search")$(o).jqGrid("setColProp",t.name,{searchoptions:{dataUrl:null,value:e}});else if(t.oper==="filter"&&$("#fbox_"+o.p.id)[0].p){var u=$("#fbox_"+o.p.id)[0].p.columns,n;$.each(u,function(){return n=this.index||this.name,t.name===n?(this.searchoptions.dataUrl=null,this.searchoptions.value=e,!1):void 0})}},0))}},u||{}))}else if(t.value){if(t.size===undefined&&(t.size=c?3:1),c&&(l=i.split(","),l=$.map(l,function(n){return $.trim(n)})),typeof t.value=="function"&&(t.value=t.value()),ut=t.separator===undefined?":":t.separator,ft=t.delimiter===undefined?";":t.delimiter,typeof t.value=="string")for(rt=t.value.split(ft),a=0;a<rt.length;a++)v=rt[a].split(ut),v.length>2&&(v[1]=$.map(v,function(n,t){if(t>0)return n}).join(ut)),e=document.createElement("option"),e.setAttribute("role","option"),e.value=v[0],e.innerHTML=v[1],f.appendChild(e),c||$.trim(v[0])!==$.trim(i)&&$.trim(v[1])!==$.trim(i)||(e.selected="selected"),c&&($.inArray($.trim(v[1]),l)>-1||$.inArray($.trim(v[0]),l)>-1)&&(e.selected="selected");else if(Object.prototype.toString.call(t.value)==="[object Array]")for(h=t.value,a=0;a<h.length;a++)h[a].length===2&&(s=h[a][0],g=h[a][1],e=document.createElement("option"),e.setAttribute("role","option"),e.value=s,e.innerHTML=g,f.appendChild(e),c||$.trim(s)!==$.trim(i)&&$.trim(g)!==$.trim(i)||(e.selected="selected"),c&&($.inArray($.trim(g),l)>-1||$.inArray($.trim(s),l)>-1)&&(e.selected="selected"));else if(typeof t.value=="object"){h=t.value;for(s in h)h.hasOwnProperty(s)&&(e=document.createElement("option"),e.setAttribute("role","option"),e.value=s,e.innerHTML=h[s],f.appendChild(e),c||$.trim(s)!==$.trim(i)&&$.trim(h[s])!==$.trim(i)||(e.selected="selected"),c&&($.inArray($.trim(h[s]),l)>-1||$.inArray($.trim(s),l)>-1)&&(e.selected="selected"))}y(f,t,["value"])}break;case"text":case"password":case"button":et=n==="button"?"button":"textbox";f=document.createElement("input");f.type=n;f.value=i;y(f,t);n!=="button"&&(r?t.size||$(f).css({width:"98%"}):t.size||(t.size=20));$(f).attr("role",et);break;case"image":case"file":f=document.createElement("input");f.type=n;y(f,t);break;case"custom":f=document.createElement("span");try{if($.isFunction(t.custom_element))if(k=t.custom_element.call(o,i,t),k)k=$(k).addClass("customelement").attr({id:t.id,name:t.name}),$(f).empty().append(k);else throw"e2";else throw"e1";}catch(b){nt=$.jgrid.getRegional(o,"errors");p=$.jgrid.getRegional(o,"edit");b==="e1"&&$.jgrid.info_dialog(nt.errcap,"function 'custom_element' "+p.msg.nodefined,p.bClose);b==="e2"?$.jgrid.info_dialog(nt.errcap,"function 'custom_element' "+p.msg.novalue,p.bClose):$.jgrid.info_dialog(nt.errcap,typeof b=="string"?b:b.message,p.bClose)}}return f},checkDate:function(n,t){var a=function(n){return n%4==0&&(n%100!=0||n%400==0)?29:28},i={},h,c,l,s;if(n=n.toLowerCase(),h=n.indexOf("/")!==-1?"/":n.indexOf("-")!==-1?"-":n.indexOf(".")!==-1?".":"/",n=n.split(h),t=t.split(h),t.length!==3)return!1;for(var u=-1,f,e=-1,o=-1,r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],f.indexOf("y")!==-1&&(u=r),f.indexOf("m")!==-1&&(o=r),f.indexOf("d")!==-1&&(e=r);return(f=n[u]==="y"||n[u]==="yyyy"?4:n[u]==="yy"?2:-1,l=[0,31,29,31,30,31,30,31,31,30,31,30,31],u===-1)?!1:(s=i[n[u]].toString(),f===2&&s.length===1&&(f=1),s.length!==f||i[n[u]]===0&&t[u]!=="00")?!1:o===-1?!1:(s=i[n[o]].toString(),s.length<1||i[n[o]]<1||i[n[o]]>12)?!1:e===-1?!1:(s=i[n[e]].toString(),s.length<1||i[n[e]]<1||i[n[e]]>31||i[n[o]]===2&&i[n[e]]>a(i[n[u]])||i[n[e]]>l[i[n[o]]])?!1:!0},isEmpty:function(n){return n.match(/^\s+$/)||n===""?!0:!1},checkTime:function(n){var t;if(!$.jgrid.isEmpty(n))if(t=n.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/),t){if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}else return!1;return!0},checkValues:function(n,t,i,r){var u,s,f,c,p,l=this,o=l.p.colModel,e=$.jgrid.getRegional(this,"edit.msg"),a,h,v,y;if(i===undefined)if(typeof t=="string"){for(s=0,p=o.length;s<p;s++)if(o[s].name===t){u=o[s].editrules;t=s;o[s].formoptions!=null&&(f=o[s].formoptions.label);break}}else t>=0&&(u=o[t].editrules);else u=i,f=r===undefined?"_":r;if(u){if(f||(f=l.p.colNames!=null?l.p.colNames[t]:o[t].label),u.required===!0&&$.jgrid.isEmpty(n))return[!1,f+": "+e.required,""];if(h=u.required===!1?!1:!0,u.number===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&isNaN(n))return[!1,f+": "+e.number,""];if(u.minValue!==undefined&&!isNaN(u.minValue)&&parseFloat(n)<parseFloat(u.minValue))return[!1,f+": "+e.minValue+" "+u.minValue,""];if(u.maxValue!==undefined&&!isNaN(u.maxValue)&&parseFloat(n)>parseFloat(u.maxValue))return[!1,f+": "+e.maxValue+" "+u.maxValue,""];if(u.email===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&(v=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!v.test(n)))return[!1,f+": "+e.email,""];if(u.integer===!0&&!(h===!1&&$.jgrid.isEmpty(n))){if(isNaN(n))return[!1,f+": "+e.integer,""];if(n%1!=0||n.indexOf(".")!==-1)return[!1,f+": "+e.integer,""]}if(u.date===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&(o[t].formatoptions&&o[t].formatoptions.newformat?(c=o[t].formatoptions.newformat,a=$.jgrid.getRegional(l,"formatter.date.masks"),a&&a.hasOwnProperty(c)&&(c=a[c])):c=o[t].datefmt||"Y-m-d",!$.jgrid.checkDate(c,n)))return[!1,f+": "+e.date+" - "+c,""];if(u.time===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&!$.jgrid.checkTime(n))return[!1,f+": "+e.date+" - hh:mm (am/pm)",""];if(u.url===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&(v=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!v.test(n)))return[!1,f+": "+e.url,""];if(u.custom===!0&&!(h===!1&&$.jgrid.isEmpty(n)))return $.isFunction(u.custom_func)?(y=u.custom_func.call(l,n,f,t),$.isArray(y)?y:[!1,e.customarray,""]):[!1,e.customfcheck,""]}return[!0,"",""]}});$.fn.jqFilter=function(n){var i,r,t;if(typeof n=="string"){if(i=$.fn.jqFilter[n],!i)throw"jqFilter - No such method: "+n;return r=$.makeArray(arguments).slice(1),i.apply(this,r)}return t=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},$.jgrid.filter,n||{}),this.each(function(){var i,r,n,u,f,e;if(!this.filter&&(this.p=t,(this.p.filter===null||this.p.filter===undefined)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),r=this.p.columns.length,u=/msie/i.test(navigator.userAgent)&&!window.opera,this.p.initFilter=$.extend(!0,{},this.p.filter),r)){for(i=0;i<r;i++)n=this.p.columns[i],n.stype?n.inputtype=n.stype:n.inputtype||(n.inputtype="text"),n.sorttype?n.searchtype=n.sorttype:n.searchtype||(n.searchtype="string"),n.hidden===undefined&&(n.hidden=!1),n.label||(n.label=n.name),n.index&&(n.name=n.index),n.hasOwnProperty("searchoptions")||(n.searchoptions={}),n.hasOwnProperty("searchrules")||(n.searchrules={});this.p.showQuery&&$(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'><\/td><\/tr><\/tbody><\/table>");f=function(){return $("#"+$.jgrid.jqID(t.id))[0]||null};e=function(n,i){var r=[!0,""],u=f();if($.isFunction(i.searchrules))r=i.searchrules.call(u,n,i);else if($.jgrid&&$.jgrid.checkValues)try{r=$.jgrid.checkValues.call(u,n,-1,i.searchrules,i.label)}catch(e){}r&&r.length&&r[0]===!1&&(t.error=!r[0],t.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",$.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){$("table.group:first",this).remove();var n=this.createTableForGroup(t.filter,null);$(this).append(n);$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(n,i){var u=this,r,f=$("<table class='group ui-widget ui-widget-content ui-search-table' style='border:0px none;'><tbody><\/tbody><\/table>"),l="left",a,e,s,v,b,h,y,o,p,c,k,w;if(this.p.direction==="rtl"&&(l="right",f.attr("dir","rtl")),i===null&&f.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+l+"'><\/th><\/tr>"),a=$("<tr><\/tr>"),f.append(a),e=$("<th colspan='5' align='"+l+"'><\/th>"),a.append(e),this.p.ruleButtons===!0){for(s=$("<select class='opsel ui-widget-content ui-corner-all'><\/select>"),e.append(s),v="",r=0;r<t.groupOps.length;r++)b=n.groupOp===u.p.groupOps[r].op?" selected='selected'":"",v+="<option value='"+u.p.groupOps[r].op+"'"+b+">"+u.p.groupOps[r].text+"<\/option>";s.append(v).bind("change",function(){n.groupOp=$(s).val();u.onchange()})}if(h="<span><\/span>",this.p.groupButton&&(h=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group ui-widget-content ui-corner-all'/>"),h.bind("click",function(){return n.groups===undefined&&(n.groups=[]),n.groups.push({groupOp:t.groupOps[0].op,rules:[],groups:[]}),u.reDraw(),u.onchange(),!1})),e.append(h),this.p.ruleButtons===!0&&(y=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add ui-widget-content ui-corner-all'/>"),y.bind("click",function(){var i;for(n.rules===undefined&&(n.rules=[]),r=0;r<u.p.columns.length;r++){var t=u.p.columns[r].search===undefined?!0:u.p.columns[r].search,f=u.p.columns[r].hidden===!0,e=u.p.columns[r].searchoptions.searchhidden===!0;if(e&&t||t&&!f){o=u.p.columns[r];break}}return i=o.searchoptions.sopt?o.searchoptions.sopt:u.p.sopt?u.p.sopt:$.inArray(o.searchtype,u.p.strarr)!==-1?u.p.stropts:u.p.numopts,n.rules.push({field:o.name,op:i[0],data:""}),u.reDraw(),!1}),e.append(y)),i!==null&&(p=$("<input type='button' value='-' title='Delete group' class='delete-group ui-widget-content ui-corner-all'/>"),e.append(p),p.bind("click",function(){for(r=0;r<i.groups.length;r++)if(i.groups[r]===n){i.groups.splice(r,1);break}return u.reDraw(),u.onchange(),!1})),n.groups!==undefined)for(r=0;r<n.groups.length;r++)c=$("<tr><\/tr>"),f.append(c),k=$("<td class='first'><\/td>"),c.append(k),w=$("<td colspan='4'><\/td>"),w.append(this.createTableForGroup(n.groups[r],n)),c.append(w);if(n.groupOp===undefined&&(n.groupOp=u.p.groupOps[0].op),n.rules!==undefined)for(r=0;r<n.rules.length;r++)f.append(this.createTableRowForRule(n.rules[r],n));return f};this.createTableRowForRule=function(n,i){var r=this,l=f(),a=$("<tr><\/tr>"),o,c,s,e,p="",w,d,b,h,v,g,nt,y,k,tt,it,rt;for(a.append("<td class='first'><\/td>"),d=$("<td class='columns'><\/td>"),a.append(d),b=$("<select class='ui-widget-content ui-corner-all'><\/select>"),v=[],d.append(b),b.bind("change",function(){var t,i,f,a;for(n.field=$(b).val(),s=$(this).parents("tr:first"),o=0;o<r.p.columns.length;o++)if(r.p.columns[o].name===n.field){e=r.p.columns[o];break}if(e){for(e.searchoptions.id=$.jgrid.randId(),e.searchoptions.name=n.field,e.searchoptions.oper="filter",u&&e.inputtype==="text"&&(e.searchoptions.size||(e.searchoptions.size=10)),t=$.jgrid.createEl.call(l,e.inputtype,e.searchoptions,"",!0,r.p.ajaxSelectOptions||{},!0),$(t).addClass("input-elm ui-widget-content ui-corner-all"),c=e.searchoptions.sopt?e.searchoptions.sopt:r.p.sopt?r.p.sopt:$.inArray(e.searchtype,r.p.strarr)!==-1?r.p.stropts:r.p.numopts,i="",f=0,v=[],$.each(r.p.ops,function(){v.push(this.oper)}),o=0;o<c.length;o++)h=$.inArray(c[o],v),h!==-1&&(f===0&&(n.op=r.p.ops[h].oper),i+="<option value='"+r.p.ops[h].oper+"'>"+r.p.ops[h].text+"<\/option>",f++);$(".selectopts",s).empty().append(i);$(".selectopts",s)[0].selectedIndex=0;$.jgrid.msie&&$.jgrid.msiever()<9&&(a=parseInt($("select.selectopts",s)[0].offsetWidth,10)+1,$(".selectopts",s).width(a),$(".selectopts",s).css("width","auto"));$(".data",s).empty().append(t);$.jgrid.bindEv.call(l,t,e.searchoptions);$(".input-elm",s).bind("change",function(t){var i=t.target;n.data=i.nodeName.toUpperCase()==="SPAN"&&e.searchoptions&&$.isFunction(e.searchoptions.custom_value)?e.searchoptions.custom_value.call(l,$(i).children(".customelement:first"),"get"):i.value;r.onchange()});setTimeout(function(){n.data=$(t).val();r.onchange()},0)}}),g=0,o=0;o<r.p.columns.length;o++){var ut=r.p.columns[o].search===undefined?!0:r.p.columns[o].search,ft=r.p.columns[o].hidden===!0,et=r.p.columns[o].searchoptions.searchhidden===!0;(et&&ut||ut&&!ft)&&(w="",n.field===r.p.columns[o].name&&(w=" selected='selected'",g=o),p+="<option value='"+r.p.columns[o].name+"'"+w+">"+r.p.columns[o].label+"<\/option>")}for(b.append(p),nt=$("<td class='operators'><\/td>"),a.append(nt),e=t.columns[g],e.searchoptions.id=$.jgrid.randId(),u&&e.inputtype==="text"&&(e.searchoptions.size||(e.searchoptions.size=10)),e.searchoptions.name=n.field,e.searchoptions.oper="filter",y=$.jgrid.createEl.call(l,e.inputtype,e.searchoptions,n.data,!0,r.p.ajaxSelectOptions||{},!0),(n.op==="nu"||n.op==="nn")&&($(y).attr("readonly","true"),$(y).attr("disabled","true")),k=$("<select class='selectopts ui-widget-content ui-corner-all'><\/select>"),nt.append(k),k.bind("change",function(){n.op=$(k).val();s=$(this).parents("tr:first");var t=$(".input-elm",s)[0];n.op==="nu"||n.op==="nn"?(n.data="",t.tagName.toUpperCase()!=="SELECT"&&(t.value=""),t.setAttribute("readonly","true"),t.setAttribute("disabled","true")):(t.tagName.toUpperCase()==="SELECT"&&(n.data=t.value),t.removeAttribute("readonly"),t.removeAttribute("disabled"));r.onchange()}),c=e.searchoptions.sopt?e.searchoptions.sopt:r.p.sopt?r.p.sopt:$.inArray(e.searchtype,r.p.strarr)!==-1?r.p.stropts:r.p.numopts,p="",$.each(r.p.ops,function(){v.push(this.oper)}),o=0;o<c.length;o++)h=$.inArray(c[o],v),h!==-1&&(w=n.op===r.p.ops[h].oper?" selected='selected'":"",p+="<option value='"+r.p.ops[h].oper+"'"+w+">"+r.p.ops[h].text+"<\/option>");return k.append(p),tt=$("<td class='data'><\/td>"),a.append(tt),tt.append(y),$.jgrid.bindEv.call(l,y,e.searchoptions),$(y).addClass("input-elm ui-widget-content ui-corner-all").bind("change",function(){n.data=e.inputtype==="custom"?e.searchoptions.custom_value.call(l,$(this).children(".customelement:first"),"get"):$(this).val();r.onchange()}),it=$("<td><\/td>"),a.append(it),this.p.ruleButtons===!0&&(rt=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del ui-widget-content ui-corner-all'/>"),it.append(rt),rt.bind("click",function(){for(o=0;o<i.rules.length;o++)if(i.rules[o]===n){i.rules.splice(o,1);break}return r.reDraw(),r.onchange(),!1})),a};this.getStringForGroup=function(n){var t="(",i;if(n.groups!==undefined)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(r){alert(r)}}if(n.rules!==undefined)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(u){alert(u)}return(t+=")",t==="()")?"":t};this.getStringForRule=function(n){for(var o="",i="",f,r,u=0;u<this.p.ops.length;u++)if(this.p.ops[u].oper===n.op){o=this.p.operands.hasOwnProperty(n.op)?this.p.operands[n.op]:"";i=this.p.ops[u].oper;break}for(u=0;u<this.p.columns.length;u++)if(this.p.columns[u].name===n.field){f=this.p.columns[u];break}return f===undefined?"":(r=n.data,(i==="bw"||i==="bn")&&(r=r+"%"),(i==="ew"||i==="en")&&(r="%"+r),(i==="cn"||i==="nc")&&(r="%"+r+"%"),(i==="in"||i==="ni")&&(r=" ("+r+")"),t.errorcheck&&e(n.data,f),$.inArray(f.searchtype,["int","integer","float","number","currency"])!==-1||i==="nn"||i==="nu"?n.field+" "+o+" "+r:n.field+" "+o+' "'+r+'"')};this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){$("th.ui-state-error",this).html("");$("tr.error",this).hide()};this.showError=function(){$("th.ui-state-error",this).html(this.p.errmsg);$("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(t.filter)};this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&e(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var r="(",u;if(n.groups!==undefined)for(u=0;u<n.groups.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=t(n.groups[u]);if(n.rules!==undefined)for(u=0;u<n.rules.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=i(n.rules[u]);return(r+=")",r==="()")?"":r}var n=this;return t(this.p.filter)};this.reDraw();this.p.showQuery&&this.onchange();this.filter=!0}})};$.extend($.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){return n!==undefined&&this.p.hasOwnProperty(n)?this.p[n]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(n){typeof n=="string"&&(n=$.jgrid.parse(n));this.each(function(){this.p.filter=n;this.reDraw();this.onchange()})}});$.jgrid.extend({filterToolbar:function(n){var t=$.jgrid.getRegional(this[0],"search");return n=$.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},t,n||{}),this.each(function(){var i=this;if(!i.p.filterToolbar){$(i).data("filterToolbar")||$(i).data("filterToolbar",n);i.p.force_regional&&(n=$.extend(n,t));var r=function(){var e={},c=0,o,u,l={},r,a,t,s,h,f;$.each(i.p.colModel,function(){var t=$("#gs_"+i.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);if(u=this.index||this.name,r=n.searchOperators?t.parent().prev().children("a").attr("soper")||n.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:this.stype==="select"?"eq":n.defaultSearch,o=this.stype==="custom"&&$.isFunction(this.searchoptions.custom_value)&&t.length>0&&t[0].nodeName.toUpperCase()==="SPAN"?this.searchoptions.custom_value.call(i,t.children(".customelement:first"),"get"):t.val(),o||r==="nu"||r==="nn")e[u]=o,l[u]=r,c++;else try{delete i.p.postData[u]}catch(f){}});a=c>0?!0:!1;n.stringResult===!0||i.p.datatype==="local"||n.searchOperators===!0?(t='{"groupOp":"'+n.groupOp+'","rules":[',s=0,$.each(e,function(n,i){s>0&&(t+=",");t+='{"field":"'+n+'",';t+='"op":"'+l[n]+'",';i+="";t+='"data":"'+i.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';s++}),t+="]}",$.extend(i.p.postData,{filters:t}),$.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):$.extend(i.p.postData,e);i.p.searchurl&&(h=i.p.url,$(i).jqGrid("setGridParam",{url:i.p.searchurl}));f=$(i).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?!0:!1;!f&&$.isFunction(n.beforeSearch)&&(f=n.beforeSearch.call(i));f||$(i).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]);h&&$(i).jqGrid("setGridParam",{url:h});$(i).triggerHandler("jqGridToolbarAfterSearch");$.isFunction(n.afterSearch)&&n.afterSearch.call(i)},e=function(t){var f={},o=0,u,c,r,s,h,e;t=typeof t!="boolean"?!0:t;$.each(i.p.colModel,function(){var n,t=$("#gs_"+i.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);this.searchoptions&&this.searchoptions.defaultValue!==undefined&&(n=this.searchoptions.defaultValue);u=this.index||this.name;switch(this.stype){case"select":if(t.find("option").each(function(t){return t===0&&(this.selected=!0),$(this).val()===n?(this.selected=!0,!1):void 0}),n!==undefined)f[u]=n,o++;else try{delete i.p.postData[u]}catch(r){}break;case"text":if(t.val(n||""),n!==undefined)f[u]=n,o++;else try{delete i.p.postData[u]}catch(e){}break;case"custom":$.isFunction(this.searchoptions.custom_value)&&t.length>0&&t[0].nodeName.toUpperCase()==="SPAN"&&this.searchoptions.custom_value.call(i,t.children(".customelement:first"),"set",n||"")}});c=o>0?!0:!1;i.p.resetsearch=!0;n.stringResult===!0||i.p.datatype==="local"?(r='{"groupOp":"'+n.groupOp+'","rules":[',s=0,$.each(f,function(n,t){s>0&&(r+=",");r+='{"field":"'+n+'",';r+='"op":"eq",';t+="";r+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';s++}),r+="]}",$.extend(i.p.postData,{filters:r}),$.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):$.extend(i.p.postData,f);i.p.searchurl&&(h=i.p.url,$(i).jqGrid("setGridParam",{url:i.p.searchurl}));e=$(i).triggerHandler("jqGridToolbarBeforeClear")==="stop"?!0:!1;!e&&$.isFunction(n.beforeClear)&&(e=n.beforeClear.call(i));e||t&&$(i).jqGrid("setGridParam",{search:c}).trigger("reloadGrid",[{page:1}]);h&&$(i).jqGrid("setGridParam",{url:h});$(i).triggerHandler("jqGridToolbarAfterClear");$.isFunction(n.afterClear)&&n.afterClear()},o=function(){var t=$("tr.ui-search-toolbar",i.grid.hDiv),n=i.p.frozenColumns===!0?$("tr.ui-search-toolbar",i.grid.fhDiv):!1;t.css("display")==="none"?(t.show(),n&&n.show()):(t.hide(),n&&n.hide())},s=function(t,u,f){var c,s;$("#sopt_menu").remove();u=parseInt(u,10)-150;f=parseInt(f,10)+18;for(var v=$(".ui-jqgrid-view").css("font-size")||"11px",h='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+v+";left:"+u+"px;top:"+f+'px;">',y=$(t).attr("soper"),l,a=[],o,e=0,p=$(t).attr("colname"),w=i.p.colModel.length;e<w;){if(i.p.colModel[e].name===p)break;e++}for(c=i.p.colModel[e],s=$.extend({},c.searchoptions),s.sopt||(s.sopt=[],s.sopt[0]=c.stype==="select"?"eq":n.defaultSearch),$.each(n.odata,function(){a.push(this.oper)}),e=0;e<s.sopt.length;e++)o=$.inArray(s.sopt[e],a),o!==-1&&(l=y===n.odata[o].oper?"ui-state-highlight":"",h+='<li class="ui-menu-item '+l+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+n.odata[o].oper+'" oper="'+n.operands[n.odata[o].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px" style="direction:ltr;">'+n.operands[n.odata[o].oper]+"<\/td><td>"+n.odata[o].text+"<\/td><\/tr><\/table><\/a><\/li>");h+="<\/ul>";$("body").append(h);$("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");$("#sopt_menu > li > a").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).click(function(){var u=$(this).attr("value"),f=$(this).attr("oper"),e;$(i).triggerHandler("jqGridToolbarSelectOper",[u,f,t]);$("#sopt_menu").hide();$(t).text(f).attr("soper",u);n.autosearch===!0&&(e=$(t).parent().next().children()[0],($(e).val()||u==="nu"||u==="nn")&&r())})},u=$("<tr class='ui-search-toolbar' role='row'><\/tr>"),f;if($.each(i.p.colModel,function(t){var o=this,e,y="",p="=",h,c,w,b,a,l,v=$("<th role='columnheader' class='ui-state-default ui-th-"+i.p.direction+"' id='gsh_"+i.p.id+"_"+o.name+"' ><\/th>"),k=$("<div><\/div>"),s=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''><\/td><td class='ui-search-input' headers=''><\/td><td class='ui-search-clear' headers=''><\/td><\/tr><\/table>");if(this.hidden===!0&&$(v).css("display","none"),this.search=this.search===!1?!1:!0,this.stype===undefined&&(this.stype="text"),e=$.extend({},this.searchoptions||{},{name:o.index||o.name,id:"gs_"+i.p.idPrefix+o.name,oper:"search"}),this.search){if(n.searchOperators){for(h=e.sopt?e.sopt[0]:o.stype==="select"?"eq":n.defaultSearch,c=0;c<n.odata.length;c++)if(n.odata[c].oper===h){p=n.operands[h]||"";break}w=e.searchtitle!=null?e.searchtitle:n.operandTitle;y="<a title='"+w+"' soper='"+h+"' class='soptclass' colname='"+this.name+"'>"+p+"<\/a>"}$("td:eq(0)",s).attr("colindex",t).append(y);e.clearSearch===undefined&&(e.clearSearch=!0);e.clearSearch?(b=n.resetTitle||"Clear Search Value",$("td:eq(2)",s).append("<a title='"+b+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+n.resetIcon+"<\/a>")):$("td:eq(2)",s).hide();this.surl&&(e.dataUrl=this.surl);a="";e.defaultValue&&(a=$.isFunction(e.defaultValue)?e.defaultValue.call(i):e.defaultValue);l=$.jgrid.createEl.call(i,this.stype,e,a,!1,$.extend({},$.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));$(l).css({width:"100%"}).addClass("ui-widget-content ui-corner-all "+o.class);$("td:eq(1)",s).append(l);$(k).append(s);switch(this.stype){case"select":n.autosearch===!0&&(e.dataEvents=[{type:"change",fn:function(){return r(),!1}}]);break;case"text":n.autosearch===!0&&(e.dataEvents=n.searchOnEnter?[{type:"keypress",fn:function(n){var t=n.charCode||n.keyCode||0;return t===13?(r(),!1):this}}]:[{type:"keydown",fn:function(t){var i=t.which;switch(i){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:f&&clearTimeout(f);f=setTimeout(function(){r()},n.autosearchDelay)}}}])}$.jgrid.bindEv.call(i,l,e)}$(v).append(k);$(u).append(v);n.searchOperators||$("td:eq(0)",s).hide()}),$("table thead",i.grid.hDiv).append(u),n.searchOperators){$(".soptclass",u).click(function(n){var t=$(this).offset(),i=t.left,r=t.top;s(this,i,r);n.stopPropagation()});$("body").on("click",function(n){n.target.className!=="soptclass"&&$("#sopt_menu").hide()})}$(".clearsearchclass",u).click(function(){var t=$(this).parents("tr:first"),f=parseInt($("td.ui-search-oper",t).attr("colindex"),10),e=$.extend({},i.p.colModel[f].searchoptions||{}),u=e.defaultValue?e.defaultValue:"";i.p.colModel[f].stype==="select"?u?$("td.ui-search-input select",t).val(u):$("td.ui-search-input select",t)[0].selectedIndex=0:$("td.ui-search-input input",t).val(u);n.autosearch===!0&&r()});this.p.filterToolbar=!0;this.triggerToolbar=r;this.clearToolbar=e;this.toggleToolbar=o}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},searchGrid:function(n){return $("#"+n).modal("show"),!0},searchGrid1:function(n){var t=$.jgrid.getRegional(this[0],"search");return n=$.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},t,n||{}),this.each(function(){function w(r){h=$(t).triggerHandler("jqGridFilterBeforeShow",[r]);h===undefined&&(h=!0);h&&$.isFunction(n.beforeShowSearch)&&(h=n.beforeShowSearch.call(t,r));h&&($.jgrid.viewModal("#"+$.jgrid.jqID(u.themodal),{gbox:"#gbox_"+$.jgrid.jqID(i),jqm:n.jqModal,modal:n.modal,overlay:n.overlay,toTop:n.toTop}),$(t).triggerHandler("jqGridFilterAfterShow",[r]),$.isFunction(n.afterShowSearch)&&n.afterShowSearch.call(t,r))}var t=this,y;if(t.grid){var i="fbox_"+t.p.id,h=!0,r=!0,u={themodal:"searchmod"+i,modalhead:"searchhd"+i,modalcontent:"searchcnt"+i,scrollelm:i},o=t.p.postData[n.sFilter],s;if(typeof o=="string"&&(o=$.jgrid.parse(o)),n.recreateFilter===!0&&$("#"+$.jgrid.jqID(u.themodal)).remove(),$("#"+$.jgrid.jqID(u.themodal))[0]!==undefined)w($("#fbox_"+$.jgrid.jqID(t.p.id)));else{var f=$("<div><div id='"+i+"' class='searchFilter' style='overflow:auto'><\/div><\/div>").insertBefore("#gview_"+$.jgrid.jqID(t.p.id)),b="left",k="";t.p.direction==="rtl"&&(b="right",k=" style='text-align:left'",f.attr("dir","rtl"));var e=$.extend([],t.p.colModel),g="<a id='"+i+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'><\/span>"+n.Find+"<\/a>",nt="<a id='"+i+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'><\/span>"+n.Reset+"<\/a>",p="",c="",v,l=!1,d,a=-1;n.showQuery&&(p="<a id='"+i+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'><\/span>Query<\/a>");n.columns.length?(e=n.columns,a=0,v=e[0].index||e[0].name):$.each(e,function(n,i){if(i.label||(i.label=t.p.colNames[n]),!l){var r=i.search===undefined?!0:i.search,u=i.hidden===!0,f=i.searchoptions&&i.searchoptions.searchhidden===!0;(f&&r||r&&!u)&&(l=!0,v=i.index||i.name,a=n)}});(!o&&v||n.multipleSearch===!1)&&(y="eq",a>=0&&e[a].searchoptions&&e[a].searchoptions.sopt?y=e[a].searchoptions.sopt[0]:n.sopt&&n.sopt.length&&(y=n.sopt[0]),o={groupOp:"AND",rules:[{field:v,op:y,data:""}]});l=!1;n.tmplNames&&n.tmplNames.length&&(l=!0,c=n.tmplLabel,c+="<select class='ui-template'>",c+="<option value='default'>Default<\/option>",$.each(n.tmplNames,function(n,t){c+="<option value='"+n+"'>"+t+"<\/option>"}),c+="<\/select>");d="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+i+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr><td class='EditButton' style='text-align:"+b+"'>"+nt+c+"<\/td><td class='EditButton' "+k+">"+p+g+"<\/td><\/tr><\/tbody><\/table>";i=$.jgrid.jqID(i);$("#"+i).jqFilter({columns:e,filter:n.loadDefaults?o:null,showQuery:n.showQuery,errorcheck:n.errorcheck,sopt:n.sopt,groupButton:n.multipleGroup,ruleButtons:n.multipleSearch,afterRedraw:n.afterRedraw,ops:n.odata,operands:n.operands,ajaxSelectOptions:t.p.ajaxSelectOptions,groupOps:n.groupOps,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString());$.isFunction(n.afterChange)&&n.afterChange.call(t,$("#"+i),n)},direction:t.p.direction,id:t.p.id});f.append(d);l&&n.tmplFilters&&n.tmplFilters.length&&$(".ui-template",f).bind("change",function(){var t=$(this).val();return t==="default"?$("#"+i).jqFilter("addFilter",o):$("#"+i).jqFilter("addFilter",n.tmplFilters[parseInt(t,10)]),!1});n.multipleGroup===!0&&(n.multipleSearch=!0);$(t).triggerHandler("jqGridFilterInitialize",[$("#"+i)]);$.isFunction(n.onInitializeSearch)&&n.onInitializeSearch.call(t,$("#"+i));n.gbox="#gbox_"+i;n.layer?$.jgrid.createModal(u,f,n,"#gview_"+$.jgrid.jqID(t.p.id),$("#gbox_"+$.jgrid.jqID(t.p.id))[0],"#"+$.jgrid.jqID(n.layer),{position:"relative"}):$.jgrid.createModal(u,f,n,"#gview_"+$.jgrid.jqID(t.p.id),$("#gbox_"+$.jgrid.jqID(t.p.id))[0]);(n.searchOnEnter||n.closeOnEscape)&&$("#"+$.jgrid.jqID(u.themodal)).keydown(function(t){var r=$(t.target);return n.searchOnEnter&&t.which===13&&!r.hasClass("add-group")&&!r.hasClass("add-rule")&&!r.hasClass("delete-group")&&!r.hasClass("delete-rule")&&(!r.hasClass("fm-button")||!r.is("[id$=_query]"))?($("#"+i+"_search").click(),!1):n.closeOnEscape&&t.which===27?($("#"+$.jgrid.jqID(u.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0});p&&$("#"+i+"_query").bind("click",function(){return $(".queryresult",f).toggle(),!1});n.stringResult===undefined&&(n.stringResult=n.multipleSearch);$("#"+i+"_search").bind("click",function(){var f={},o,e;if(s=$("#"+i),s.find(".input-elm:focus").change(),e=s.jqFilter("filterData"),n.errorcheck&&(s[0].hideError(),n.showQuery||s.jqFilter("toSQLString"),s[0].p.error))return s[0].showError(),!1;if(n.stringResult){try{o=JSON.stringify(e)}catch(h){}typeof o=="string"&&(f[n.sFilter]=o,$.each([n.sField,n.sValue,n.sOper],function(){f[this]=""}))}else n.multipleSearch?(f[n.sFilter]=e,$.each([n.sField,n.sValue,n.sOper],function(){f[this]=""})):(f[n.sField]=e.rules[0].field,f[n.sValue]=e.rules[0].data,f[n.sOper]=e.rules[0].op,f[n.sFilter]="");return t.p.search=!0,$.extend(t.p.postData,f),r=$(t).triggerHandler("jqGridFilterSearch"),r===undefined&&(r=!0),r&&$.isFunction(n.onSearch)&&(r=n.onSearch.call(t,t.p.filters)),r!==!1&&$(t).trigger("reloadGrid",[{page:1}]),n.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:n.jqModal,onClose:n.onClose}),!1});$("#"+i+"_reset").bind("click",function(){var e={},o=$("#"+i);return t.p.search=!1,t.p.resetsearch=!0,n.multipleSearch===!1?e[n.sField]=e[n.sValue]=e[n.sOper]="":e[n.sFilter]="",o[0].resetFilter(),l&&$(".ui-template",f).val("default"),$.extend(t.p.postData,e),r=$(t).triggerHandler("jqGridFilterReset"),r===undefined&&(r=!0),r&&$.isFunction(n.onReset)&&(r=n.onReset.call(t)),r!==!1&&$(t).trigger("reloadGrid",[{page:1}]),n.closeAfterReset&&$.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:n.jqModal,onClose:n.onClose}),!1});w($("#"+i));$(".fm-button:not(.ui-state-disabled)",f).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}}})}});n={};$.jgrid.extend({editGridRow:function(t,i){var r=$.jgrid.getRegional(this[0],"edit");return i=$.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay",removemodal:!0,form:"edit",template:null},r,i||{}),n[$(this)[0].p.id]=i,this.each(function(){function wt(){return $(l).find(".FormElement").each(function(){var i=$(".customelement",this),f,t,e,o;if(i.length)f=i[0],t=$(f).attr("name"),$.each(r.p.colModel,function(){if(this.name===t&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(u[t]=this.editoptions.custom_value.call(r,$("#"+$.jgrid.jqID(t),l),"get"),u[t]===undefined)throw"e1";}catch(i){i==="e1"?$.jgrid.info_dialog(p.errcap,"function 'custom_value' "+n[$(this)[0]].p.msg.novalue,n[$(this)[0]].p.bClose):$.jgrid.info_dialog(p.errcap,i.message,n[$(this)[0]].p.bClose)}return!0}});else{switch($(this).get(0).type){case"checkbox":$(this).is(":checked")?u[this.name]=$(this).val():(e=$(this).attr("offval"),u[this.name]=e);break;case"select-one":u[this.name]=$("option:selected",this).val();break;case"select-multiple":u[this.name]=$(this).val();u[this.name]=u[this.name]?u[this.name].join(","):"";o=[];$("option:selected",this).each(function(n,t){o[n]=$(t).text()});break;case"password":case"text":case"textarea":case"button":u[this.name]=$(this).val()}r.p.autoencode&&(u[this.name]=$.jgrid.htmlEncode(u[this.name]))}}),!0}function kt(t,i,u,e){for(var s,p,l,v=0,o,b,h,k=[],a=!1,g="",y,w=1;w<=e;w++)g+="<td class='CaptionTD'>&#160;<\/td><td class='DataTD'>&#160;<\/td>";return t!=="_empty"&&(a=$(i).jqGrid("getInd",t)),$(i.p.colModel).each(function(y){var it;if(s=this.name,p=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,b=p?"style='display:none'":"",s!=="cb"&&s!=="subgrid"&&this.editable===!0&&s!=="rn"){if(a===!1)o="";else if(s===i.p.ExpandColumn&&i.p.treeGrid===!0)o=$("td[role='gridcell']:eq("+y+")",i.rows[a]).text();else{try{o=$.unformat.call(i,$("td[role='gridcell']:eq("+y+")",i.rows[a]),{rowId:t,colModel:this},y)}catch(ut){o=this.edittype&&this.edittype==="textarea"?$("td[role='gridcell']:eq("+y+")",i.rows[a]).text():$("td[role='gridcell']:eq("+y+")",i.rows[a]).html()}o&&o!=="&nbsp;"&&o!=="&#160;"&&(o.length!==1||o.charCodeAt(0)!==160)||(o="")}var w=$.extend({},this.editoptions||{},{id:s,name:s,rowId:t,oper:"edit"}),nt=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),tt=parseInt(nt.rowpos,10)||v+1,rt=parseInt((parseInt(nt.colpos,10)||1)*2,10);t==="_empty"&&w.defaultValue&&(o=$.isFunction(w.defaultValue)?w.defaultValue.call(r):w.defaultValue);this.edittype||(this.edittype="text");r.p.autoencode&&(o=$.jgrid.htmlDecode(o));h=$.jgrid.createEl.call(r,this.edittype,w,o,!1,$.extend({},$.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));this.edittype==="select"&&(o=$(h).val(),$(h).get(0).type==="select-multiple"&&(o=o.join(",")));this.edittype==="checkbox"&&(o=$(h).is(":checked")?$(h).val():$(h).attr("offval"));(n[r.p.id].checkOnSubmit||n[r.p.id].checkOnUpdate)&&(n[r.p.id]._savedData[s]=o);$(h).addClass("FormElement");$.inArray(this.edittype,["text","textarea","password","select"])>-1&&$(h).addClass("ui-widget-content ui-corner-all");d?$(c).find("#"+s).replaceWith(h):(l=$(u).find("tr[rowpos="+tt+"]"),nt.rowabove&&(it=$("<tr><td class='contentinfo' colspan='"+e*2+"'>"+nt.rowcontent+"<\/td><\/tr>"),$(u).append(it),it[0].rp=tt),l.length===0&&(l=$("<tr "+b+" rowpos='"+tt+"'><\/tr>").addClass("FormData").attr("id","tr_"+s),$(l).append(g),$(u).append(l),l[0].rp=tt),$("td:eq("+(rt-2)+")",l[0]).html(nt.label===undefined?i.p.colNames[y]:nt.label),$("td:eq("+(rt-1)+")",l[0]).append(nt.elmprefix).append(h).append(nt.elmsuffix));this.edittype==="custom"&&$.isFunction(w.custom_value)&&w.custom_value.call(r,$("#"+s,f),"set",o);$.jgrid.bindEv.call(r,h,w);k[v]=y;v++}}),v>0&&(d?(y="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+i.p.id+"_id' value='"+t+"'/>",$(c).append(y)):(y=$("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(e*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+i.p.id+"_id' value='"+t+"'/><\/td><\/tr>"),y[0].rp=v+999,$(u).append(y)),(n[r.p.id].checkOnSubmit||n[r.p.id].checkOnUpdate)&&(n[r.p.id]._savedData[i.p.id+"_id"]=t)),k}function ht(t,i,u){var e,y=0,f,o,c,h,a,s,v;if((n[r.p.id].checkOnSubmit||n[r.p.id].checkOnUpdate)&&(n[r.p.id]._savedData={},n[r.p.id]._savedData[i.p.id+"_id"]=t),s=i.p.colModel,t==="_empty"){$(s).each(function(){e=this.name;c=$.extend({},this.editoptions||{});o=$("#"+$.jgrid.jqID(e),u);o&&o.length&&o[0]!==null&&(h="",this.edittype==="custom"&&$.isFunction(c.custom_value)?c.custom_value.call(r,$("#"+e,u),"set",h):c.defaultValue?(h=$.isFunction(c.defaultValue)?c.defaultValue.call(r):c.defaultValue,o[0].type==="checkbox"?(a=h.toLowerCase(),a.search(/(false|f|0|no|n|off|undefined)/i)<0&&a!==""?(o[0].checked=!0,o[0].defaultChecked=!0,o[0].value=h):(o[0].checked=!1,o[0].defaultChecked=!1)):o.val(h)):o[0].type==="checkbox"?(o[0].checked=!1,o[0].defaultChecked=!1,h=$(o).attr("offval")):o[0].type&&o[0].type.substr(0,6)==="select"?o[0].selectedIndex=0:o.val(h),(n[r.p.id].checkOnSubmit===!0||n[r.p.id].checkOnUpdate)&&(n[r.p.id]._savedData[e]=h))});$("#id_g",u).val(t);return}(v=$(i).jqGrid("getInd",t,!0),v)&&($('td[role="gridcell"]',v).each(function(o){var h,c;if(e=s[o].name,e!=="cb"&&e!=="subgrid"&&e!=="rn"&&s[o].editable===!0){if(e===i.p.ExpandColumn&&i.p.treeGrid===!0)f=$(this).text();else try{f=$.unformat.call(i,$(this),{rowId:t,colModel:s[o]},o)}catch(a){f=s[o].edittype==="textarea"?$(this).text():$(this).html()}r.p.autoencode&&(f=$.jgrid.htmlDecode(f));(n[r.p.id].checkOnSubmit===!0||n[r.p.id].checkOnUpdate)&&(n[r.p.id]._savedData[e]=f);e=$.jgrid.jqID(e);switch(s[o].edittype){case"password":case"text":case"button":case"image":case"textarea":(f==="&nbsp;"||f==="&#160;"||f.length===1&&f.charCodeAt(0)===160)&&(f="");$("#"+e,u).val(f);break;case"select":h=f.split(",");h=$.map(h,function(n){return $.trim(n)});$("#"+e+" option",u).each(function(){this.selected=s[o].editoptions.multiple||$.trim(f)!==$.trim($(this).text())&&h[0]!==$.trim($(this).text())&&h[0]!==$.trim($(this).val())?s[o].editoptions.multiple?$.inArray($.trim($(this).text()),h)>-1||$.inArray($.trim($(this).val()),h)>-1?!0:!1:!1:!0});(n[r.p.id].checkOnSubmit===!0||n[r.p.id].checkOnUpdate)&&(f=$("#"+e,u).val(),s[o].editoptions.multiple&&(f=f.join(",")),n[r.p.id]._savedData[e]=f);break;case"checkbox":f=String(f);s[o].editoptions&&s[o].editoptions.value?(c=s[o].editoptions.value.split(":"),c[0]===f?$("#"+e,u)[r.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+e,u)[r.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})):(f=f.toLowerCase(),f.search(/(false|f|0|no|n|off|undefined)/i)<0&&f!==""?($("#"+e,u)[r.p.useProp?"prop":"attr"]("checked",!0),$("#"+e,u)[r.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+e,u)[r.p.useProp?"prop":"attr"]("checked",!1),$("#"+e,u)[r.p.useProp?"prop":"attr"]("defaultChecked",!1)));(n[r.p.id].checkOnSubmit===!0||n[r.p.id].checkOnUpdate)&&(f=$("#"+e,u).is(":checked")?$("#"+e,u).val():$("#"+e,u).attr("offval"));break;case"custom":try{if(s[o].editoptions&&$.isFunction(s[o].editoptions.custom_value))s[o].editoptions.custom_value.call(r,$("#"+e,u),"set",f);else throw"e1";}catch(l){l==="e1"?$.jgrid.info_dialog(p.errcap,"function 'custom_value' "+n[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose):$.jgrid.info_dialog(p.errcap,l.message,$.rp_ge[$(this)[0]].p.bClose)}}y++}}),y>0&&$("#id_g",l).val(t))}function dt(){$.each(r.p.colModel,function(n,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&u.hasOwnProperty(t.name)&&u[t.name]===""&&(u[t.name]="null")})}function g(){var b,t=[!0,"",""],k={},c=r.p.prmNames,s,y,d,nt,g,tt,v=$(r).triggerHandler("jqGridAddEditBeforeCheckValues",[$(f),o]),rt,it,a,w;v&&typeof v=="object"&&(u=v);$.isFunction(n[r.p.id].beforeCheckValues)&&(v=n[r.p.id].beforeCheckValues.call(r,u,$(f),o),v&&typeof v=="object"&&(u=v));for(d in u)if(u.hasOwnProperty(d)&&(t=$.jgrid.checkValues.call(r,u[d],d),t[0]===!1))break;if(dt(),t[0]&&(k=$(r).triggerHandler("jqGridAddEditClickSubmit",[n[r.p.id],u,o]),k===undefined&&$.isFunction(n[r.p.id].onclickSubmit)&&(k=n[r.p.id].onclickSubmit.call(r,n[r.p.id],u,o)||{}),t=$(r).triggerHandler("jqGridAddEditBeforeSubmit",[u,$(f),o]),t===undefined&&(t=[!0,"",""]),t[0]&&$.isFunction(n[r.p.id].beforeSubmit)&&(t=n[r.p.id].beforeSubmit.call(r,u,$(f),o))),t[0]&&!n[r.p.id].processing){if(n[r.p.id].processing=!0,$("#sData",l+"_2").addClass("ui-state-active"),tt=n[r.p.id].url||$(r).jqGrid("getGridParam","editurl"),y=c.oper,s=tt==="clientArray"?r.p.keyName:c.id,u[y]=$.trim(u[r.p.id+"_id"])==="_empty"?c.addoper:c.editoper,u[y]!==c.addoper?u[s]=u[r.p.id+"_id"]:u[s]===undefined&&(u[s]=u[r.p.id+"_id"]),delete u[r.p.id+"_id"],u=$.extend(u,n[r.p.id].editData,k),r.p.treeGrid===!0){u[y]===c.addoper&&(nt=$(r).jqGrid("getGridParam","selrow"),rt=r.p.treeGridModel==="adjacency"?r.p.treeReader.parent_id_field:"parent_id",u[rt]=nt);for(g in r.p.treeReader)if(r.p.treeReader.hasOwnProperty(g)&&(it=r.p.treeReader[g],u.hasOwnProperty(it))){if(u[y]===c.addoper&&g==="parent_id_field")continue;delete u[it]}}u[s]=$.jgrid.stripPref(r.p.idPrefix,u[s]);a=$.extend({url:tt,type:n[r.p.id].mtype,data:$.isFunction(n[r.p.id].serializeEditData)?n[r.p.id].serializeEditData.call(r,u):u,complete:function(a,v){var p;if($("#sData",l+"_2").removeClass("ui-state-active"),u[s]=r.p.idPrefix+u[s],a.status>=300&&a.status!==304?(t[0]=!1,t[1]=$(r).triggerHandler("jqGridAddEditErrorTextFormat",[a,o]),t[1]=$.isFunction(n[r.p.id].errorTextFormat)?n[r.p.id].errorTextFormat.call(r,a,o):v+" Status: '"+a.statusText+"'. Error code: "+a.status):(t=$(r).triggerHandler("jqGridAddEditAfterSubmit",[a,u,o]),t===undefined&&(t=[!0,"",""]),t[0]&&$.isFunction(n[r.p.id].afterSubmit)&&(t=n[r.p.id].afterSubmit.call(r,a,u,o))),t[0]===!1)$(".FormError",f).html(t[1]),$(".FormError",f).show();else if(r.p.autoencode&&$.each(u,function(n,t){u[n]=$.jgrid.htmlDecode(t)}),u[y]===c.addoper?(t[2]||(t[2]=$.jgrid.randId()),u[s]==null||u[s]==="_empty"?u[s]=t[2]:t[2]=u[s],n[r.p.id].reloadAfterSubmit?$(r).trigger("reloadGrid"):r.p.treeGrid===!0?$(r).jqGrid("addChildNode",t[2],nt,u):$(r).jqGrid("addRowData",t[2],u,i.addedrow),n[r.p.id].closeAfterAdd?(r.p.treeGrid!==!0&&$(r).jqGrid("setSelection",t[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form})):n[r.p.id].clearAfterAdd&&ht("_empty",r,f)):(n[r.p.id].reloadAfterSubmit?($(r).trigger("reloadGrid"),n[r.p.id].closeAfterEdit||setTimeout(function(){$(r).jqGrid("setSelection",u[s])},1e3)):r.p.treeGrid===!0?$(r).jqGrid("setTreeRow",u[s],u):$(r).jqGrid("setRowData",u[s],u),n[r.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form})),$.isFunction(n[r.p.id].afterComplete)&&(b=a,setTimeout(function(){$(r).triggerHandler("jqGridAddEditAfterComplete",[b,u,$(f),o]);n[r.p.id].afterComplete.call(r,b,u,$(f),o);b=null},500)),(n[r.p.id].checkOnSubmit||n[r.p.id].checkOnUpdate)&&($(f).data("disabled",!1),n[r.p.id]._savedData[r.p.id+"_id"]!=="_empty"))for(p in n[r.p.id]._savedData)n[r.p.id]._savedData.hasOwnProperty(p)&&u[p]&&(n[r.p.id]._savedData[p]=u[p]);n[r.p.id].processing=!1;try{$(":input:visible",f)[0].focus()}catch(w){}}},$.jgrid.ajaxOptions,n[r.p.id].ajaxEditOptions);a.url||n[r.p.id].useDataProxy||($.isFunction(r.p.dataProxy)?n[r.p.id].useDataProxy=!0:(t[0]=!1,t[1]+=" "+p.nourl));t[0]&&(n[r.p.id].useDataProxy?(w=r.p.dataProxy.call(r,a,"set_"+r.p.id),w===undefined&&(w=[!0,""]),w[0]===!1?(t[0]=!1,t[1]=w[1]||"Error deleting the selected row!"):(a.data.oper===c.addoper&&n[r.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),a.data.oper===c.editoper&&n[r.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}))):a.url==="clientArray"?(n[r.p.id].reloadAfterSubmit=!1,u=a.data,a.complete({status:200,statusText:""},"")):$.ajax(a))}t[0]===!1&&($(".FormError",f).html(t[1]),$(".FormError",f).show())}function bt(n,t){var r=!1;for(var i in n)if(n.hasOwnProperty(i)&&n[i]!=t[i]){r=!0;break}return r}function v(){var t=!0;return $(".FormError",f).hide(),n[r.p.id].checkOnUpdate&&(u={},wt(),k=bt(u,n[r.p.id]._savedData),k&&($(f).data("disabled",!0),$(".confirm","#"+e.themodal).show(),t=!1)),t}function gt(){var n;if(t!=="_empty"&&r.p.savedRow!==undefined&&r.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(n=0;n<r.p.savedRow.length;n++)if(r.p.savedRow[n].id===t){$(r).jqGrid("restoreRow",t);break}}function ct(n,t){var i=t[1].length-1;n===0?$("#pData",s).addClass("ui-state-disabled"):t[1][n-1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n-1])).hasClass("ui-state-disabled")?$("#pData",s).addClass("ui-state-disabled"):$("#pData",s).removeClass("ui-state-disabled");n===i?$("#nData",s).addClass("ui-state-disabled"):t[1][n+1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n+1])).hasClass("ui-state-disabled")?$("#nData",s).addClass("ui-state-disabled"):$("#nData",s).removeClass("ui-state-disabled")}function lt(){var n=$(r).jqGrid("getDataIDs"),t=$("#id_g",l).val(),i=$.inArray(t,n);return[i,n]}function ni(n){var t="";return typeof n=="string"&&(t=n.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(n,t){return'<span id="'+t+'" ><\/span>'})),t}var r=this,st,rt,yt,ut,ft,pt;if(r.grid&&t){var h=r.p.id,f="FrmGrid_"+h,b="TblGrid_"+h,l="#"+$.jgrid.jqID(b),s,e={themodal:"editmod"+h,modalhead:"edithd"+h,modalcontent:"editcnt"+h,scrollelm:f},a=!0,et=1,ot=0,u,k,o,d=typeof n[r.p.id].template=="string"&&n[r.p.id].template.length>0,p=$.jgrid.getRegional(this,"errors");t==="new"?(t="_empty",o="add",i.caption=n[r.p.id].addCaption):(i.caption=n[r.p.id].editCaption,o="edit");i.recreateForm||$(r).data("formProp")&&$.extend(n[$(this)[0].p.id],$(r).data("formProp"));st=!0;i.checkOnUpdate&&i.jqModal&&!i.modal&&(st=!1);var ti=isNaN(n[$(this)[0].p.id].dataheight)?n[$(this)[0].p.id].dataheight:n[$(this)[0].p.id].dataheight+"px",ii=isNaN(n[$(this)[0].p.id].datawidth)?n[$(this)[0].p.id].datawidth:n[$(this)[0].p.id].datawidth+"px",c=$("<form name='FormPost' id='"+f+"' class='FormGrid' onSubmit='return false;' style='width:"+ii+";overflow:auto;position:relative;height:"+ti+";'><\/form>").data("disabled",!1),y;if(d?(y=ni(n[$(this)[0].p.id].template),s=l):(y=$("<table id='"+b+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),s=l+"_2"),f="#"+$.jgrid.jqID(f),$(c).append("<div class='FormError ui-state-error' style='display:none;'><\/div>"),$(c).append("<div class='tinfo topinfo'>"+n[r.p.id].topinfo+"<\/div>"),$(r.p.colModel).each(function(){var n=this.formoptions;et=Math.max(et,n?n.colpos||0:0);ot=Math.max(ot,n?n.rowpos||0:0)}),$(c).append(y),a=$(r).triggerHandler("jqGridAddEditBeforeInitData",[c,o]),a===undefined&&(a=!0),a&&$.isFunction(n[r.p.id].beforeInitData)&&(a=n[r.p.id].beforeInitData.call(r,c,o)),a!==!1){gt();kt(t,r,y,et);var nt=r.p.direction==="rtl"?!0:!1,ri=nt?"nData":"pData",ui=nt?"pData":"nData",at="<a id='"+ri+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/a>",w="<a id='"+ui+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/a>",tt="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+i.bSubmit+"<\/a>",it="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bCancel+"<\/a>",vt="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+b+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr id='Act_Buttons'><td class='navButton'>"+(nt?w+at:at+w)+"<\/td><td class='EditButton'>"+tt+it+"<\/td><\/tr>";vt+="<\/tbody><\/table>";ot>0&&(rt=[],$.each($(y)[0].rows,function(n,t){rt[n]=t}),rt.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),$.each(rt,function(n,t){$("tbody",y).append(t)}));i.gbox="#gbox_"+$.jgrid.jqID(h);yt=!1;i.closeOnEscape===!0&&(i.closeOnEscape=!1,yt=!0);d?($(c).find("#pData").replaceWith(at),$(c).find("#nData").replaceWith(w),$(c).find("#sData").replaceWith(tt),$(c).find("#cData").replaceWith(it),ut=$("<div id="+b+"><\/div>").append(c)):ut=$("<div><\/div>").append(c).append(vt);$(c).append("<div class='binfo topinfo bottominfo'>"+n[r.p.id].bottominfo+"<\/div>");$.jgrid.createModal(e,ut,n[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(r.p.id),$("#gbox_"+$.jgrid.jqID(r.p.id))[0]);nt&&($("#pData, #nData",l+"_2").css("float","right"),$(".EditButton",l+"_2").css("text-align","left"));n[r.p.id].topinfo&&$(".tinfo",f).show();n[r.p.id].bottominfo&&$(".binfo",f).show();ut=null;vt=null;$("#"+$.jgrid.jqID(e.themodal)).keydown(function(t){var u=t.target;if($(f).data("disabled")===!0)return!1;if(n[r.p.id].savekey[0]===!0&&t.which===n[r.p.id].savekey[1]&&u.tagName!=="TEXTAREA")return $("#sData",l+"_2").trigger("click"),!1;if(t.which===27)return v()?(yt&&$.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1):!1;if(n[r.p.id].navkeys[0]===!0){if($("#id_g",l).val()==="_empty")return!0;if(t.which===n[r.p.id].navkeys[1])return $("#pData",s).trigger("click"),!1;if(t.which===n[r.p.id].navkeys[2])return $("#nData",s).trigger("click"),!1}});i.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(e.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(e.themodal)).unbind("click").click(function(){return v()?($.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1):!1}));i.saveicon=$.extend([!0,"left","ui-icon-disk"],i.saveicon);i.closeicon=$.extend([!0,"left","ui-icon-close"],i.closeicon);i.saveicon[0]===!0&&$("#sData",s).addClass(i.saveicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.saveicon[2]+"'><\/span>");i.closeicon[0]===!0&&$("#cData",s).addClass(i.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'><\/span>");(n[r.p.id].checkOnSubmit||n[r.p.id].checkOnUpdate)&&(tt="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+i.bYes+"<\/a>",w="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+i.bNo+"<\/a>",it="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+i.bExit+"<\/a>",ft=i.zIndex||999,ft++,$("<div class='"+i.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ft+";display:none;'>&#160;<\/div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(ft+1)+"'>"+i.saveData+"<br/><br/>"+tt+w+it+"<\/div>").insertAfter(f),$("#sNew","#"+$.jgrid.jqID(e.themodal)).click(function(){return g(),$(f).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(e.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(e.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(e.themodal)).hide(),$(f).data("disabled",!1),setTimeout(function(){$(":input:visible",f)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(e.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(e.themodal)).hide(),$(f).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1}));$(r).triggerHandler("jqGridAddEditInitializeForm",[$(f),o]);$.isFunction(n[r.p.id].onInitializeForm)&&n[r.p.id].onInitializeForm.call(r,$(f),o);t!=="_empty"&&n[r.p.id].viewPagerButtons?$("#pData,#nData",s).show():$("#pData,#nData",s).hide();$(r).triggerHandler("jqGridAddEditBeforeShowForm",[$(f),o]);$.isFunction(n[r.p.id].beforeShowForm)&&n[r.p.id].beforeShowForm.call(r,$(f),o);$("#"+$.jgrid.jqID(e.themodal)).data("onClose",n[r.p.id].onClose);$.jgrid.viewModal("#"+$.jgrid.jqID(e.themodal),{gbox:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,overlay:i.overlay,modal:i.modal,overlayClass:i.overlayClass,onHide:function(n){var t=$("#editmod"+h)[0].style.height;t.indexOf("px")>-1&&(t=parseFloat(t));$(r).data("formProp",{top:parseFloat($(n.w).css("top")),left:parseFloat($(n.w).css("left")),width:$(n.w).width(),height:t,dataheight:$(f).height(),datawidth:$(f).width()});n.w.remove();n.o&&n.o.remove()}});st||$("."+$.jgrid.jqID(i.overlayClass)).click(function(){return v()?($.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1):!1});$(".fm-button","#"+$.jgrid.jqID(e.themodal)).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});$("#sData",s).click(function(){return u={},$(".FormError",f).hide(),wt(),u[r.p.id+"_id"]==="_empty"?g():i.checkOnSubmit===!0?(k=bt(u,n[r.p.id]._savedData),k?($(f).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(e.themodal)).show()):g()):g(),!1});$("#cData",s).click(function(){return v()?($.jgrid.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:"#gbox_"+$.jgrid.jqID(h),jqm:i.jqModal,onClose:n[r.p.id].onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1):!1});$("#nData",s).click(function(){var n,t;if(!v())return!1;if($(".FormError",f).hide(),n=lt(),n[0]=parseInt(n[0],10),n[0]!==-1&&n[1][n[0]+1]){if(($(r).triggerHandler("jqGridAddEditClickPgButtons",["next",$(f),n[1][n[0]]]),$.isFunction(i.onclickPgButtons)&&(t=i.onclickPgButtons.call(r,"next",$(f),n[1][n[0]]),t!==undefined&&t===!1))||$("#"+$.jgrid.jqID(n[1][n[0]+1])).hasClass("ui-state-disabled"))return!1;ht(n[1][n[0]+1],r,f);$(r).jqGrid("setSelection",n[1][n[0]+1]);$(r).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(f),n[1][n[0]]]);$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(r,"next",$(f),n[1][n[0]+1]);ct(n[0]+1,n)}return!1});$("#pData",s).click(function(){var n,t;if(!v())return!1;if($(".FormError",f).hide(),n=lt(),n[0]!==-1&&n[1][n[0]-1]){if(($(r).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(f),n[1][n[0]]]),$.isFunction(i.onclickPgButtons)&&(t=i.onclickPgButtons.call(r,"prev",$(f),n[1][n[0]]),t!==undefined&&t===!1))||$("#"+$.jgrid.jqID(n[1][n[0]-1])).hasClass("ui-state-disabled"))return!1;ht(n[1][n[0]-1],r,f);$(r).jqGrid("setSelection",n[1][n[0]-1]);$(r).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(f),n[1][n[0]]]);$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(r,"prev",$(f),n[1][n[0]-1]);ct(n[0]-1,n)}return!1});$(r).triggerHandler("jqGridAddEditAfterShowForm",[$(f),o]);$.isFunction(n[r.p.id].afterShowForm)&&n[r.p.id].afterShowForm.call(r,$(f),o);pt=lt();ct(pt[0],pt)}}})},viewGridRow:function(t,i){var r=$.jgrid.getRegional(this[0],"view");return i=$.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},r,i||{}),n[$(this)[0].p.id]=i,this.each(function(){function y(){(n[r.p.id].closeOnEscape===!0||n[r.p.id].navkeys[0]===!0)&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(o.modalhead)).attr("tabindex","-1").focus()},0)}function ft(n,t,r,u){for(var e,o,f,s=0,h,b,k=[],c=!1,nt="<td class='CaptionTD form-view-label ui-widget-content' width='"+i.labelswidth+"'>&#160;<\/td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;<\/td>",d="",tt=["integer","number","currency"],a=0,v=0,y,p,g,w,l=1;l<=u;l++)d+=l===1?nt:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;<\/td><td class='DataTD form-view-data ui-widget-content'>&#160;<\/td>";return $(t.p.colModel).each(function(){o=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1;o||this.align!=="right"||(this.formatter&&$.inArray(this.formatter,tt)!==-1?a=Math.max(a,parseInt(this.width,10)):v=Math.max(v,parseInt(this.width,10)))}),y=a!==0?a:v!==0?v:0,c=$(t).jqGrid("getInd",n),$(t.p.colModel).each(function(n){var v;if(e=this.name,p=!1,o=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,b=o?"style='display:none'":"",g=typeof this.viewable!="boolean"?!0:this.viewable,e!=="cb"&&e!=="subgrid"&&e!=="rn"&&g){h=c===!1?"":e===t.p.ExpandColumn&&t.p.treeGrid===!0?$("td:eq("+n+")",t.rows[c]).text():$("td:eq("+n+")",t.rows[c]).html();p=this.align==="right"&&y!==0?!0:!1;var i=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),l=parseInt(i.rowpos,10)||s+1,a=parseInt((parseInt(i.colpos,10)||1)*2,10);i.rowabove&&(v=$("<tr><td class='contentinfo' colspan='"+u*2+"'>"+i.rowcontent+"<\/td><\/tr>"),$(r).append(v),v[0].rp=l);f=$(r).find("tr[rowpos="+l+"]");f.length===0&&(f=$("<tr "+b+" rowpos='"+l+"'><\/tr>").addClass("FormData").attr("id","trv_"+e),$(f).append(d),$(r).append(f),f[0].rp=l);$("td:eq("+(a-2)+")",f[0]).html("<b>"+(i.label===undefined?t.p.colNames[n]:i.label)+"<\/b>");$("td:eq("+(a-1)+")",f[0]).append("<span>"+h+"<\/span>").attr("id","v_"+e);p&&$("td:eq("+(a-1)+") span",f[0]).css({"text-align":"right",width:y+"px"});k[s]=n;s++}}),s>0&&(w=$("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(u*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+n+"'/><\/td><\/tr>"),w[0].rp=s+99,$(r).append(w)),k}function nt(n,t){var i,r,o=0,f,e;(e=$(t).jqGrid("getInd",n,!0),e)&&($("td",e).each(function(n){i=t.p.colModel[n].name;r=t.p.colModel[n].editrules&&t.p.colModel[n].editrules.edithidden===!0?!1:t.p.colModel[n].hidden===!0?!0:!1;i!=="cb"&&i!=="subgrid"&&i!=="rn"&&(f=i===t.p.ExpandColumn&&t.p.treeGrid===!0?$(this).text():$(this).html(),i=$.jgrid.jqID("v_"+i),$("#"+i+" span","#"+u).html(f),r&&$("#"+i,"#"+u).parents("tr:first").hide(),o++)}),o>0&&$("#id_g","#"+u).val(n))}function p(n,t){var i=t[1].length-1;n===0?$("#pData","#"+u+"_2").addClass("ui-state-disabled"):t[1][n-1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n-1])).hasClass("ui-state-disabled")?$("#pData",u+"_2").addClass("ui-state-disabled"):$("#pData","#"+u+"_2").removeClass("ui-state-disabled");n===i?$("#nData","#"+u+"_2").addClass("ui-state-disabled"):t[1][n+1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n+1])).hasClass("ui-state-disabled")?$("#nData",u+"_2").addClass("ui-state-disabled"):$("#nData","#"+u+"_2").removeClass("ui-state-disabled")}function w(){var n=$(r).jqGrid("getDataIDs"),t=$("#id_g","#"+u).val(),i=$.inArray(t,n);return[i,n]}var r=this,l,k,d;if(r.grid&&t){var f=r.p.id,e="ViewGrid_"+$.jgrid.jqID(f),u="ViewTbl_"+$.jgrid.jqID(f),rt="ViewGrid_"+f,ut="ViewTbl_"+f,o={themodal:"viewmod"+f,modalhead:"viewhd"+f,modalcontent:"viewcnt"+f,scrollelm:e},g=$.isFunction(n[r.p.id].beforeInitData)?n[r.p.id].beforeInitData:!1,s=!0,a=1,v=0;i.recreateForm||$(r).data("viewProp")&&$.extend(n[$(this)[0].p.id],$(r).data("viewProp"));var et=isNaN(n[$(this)[0].p.id].dataheight)?n[$(this)[0].p.id].dataheight:n[$(this)[0].p.id].dataheight+"px",ot=isNaN(n[$(this)[0].p.id].datawidth)?n[$(this)[0].p.id].datawidth:n[$(this)[0].p.id].datawidth+"px",b=$("<form name='FormPost' id='"+rt+"' class='FormGrid' style='width:"+ot+";overflow:auto;position:relative;height:"+et+";'><\/form>"),h=$("<table id='"+ut+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody><\/tbody><\/table>");if($(r.p.colModel).each(function(){var n=this.formoptions;a=Math.max(a,n?n.colpos||0:0);v=Math.max(v,n?n.rowpos||0:0)}),$(b).append(h),g&&(s=g.call(r,b),s===undefined&&(s=!0)),s!==!1){ft(t,r,h,a);var c=r.p.direction==="rtl"?!0:!1,st=c?"nData":"pData",ht=c?"pData":"nData",tt="<a id='"+st+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'><\/span><\/a>",it="<a id='"+ht+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'><\/span><\/a>",ct="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bClose+"<\/a>";v>0&&(l=[],$.each($(h)[0].rows,function(n,t){l[n]=t}),l.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),$.each(l,function(n,t){$("tbody",h).append(t)}));i.gbox="#gbox_"+$.jgrid.jqID(f);k=$("<div><\/div>").append(b).append("<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+i.labelswidth+"'>"+(c?it+tt:tt+it)+"<\/td><td class='EditButton'>"+ct+"<\/td><\/tr><\/tbody><\/table>");$.jgrid.createModal(o,k,i,"#gview_"+$.jgrid.jqID(r.p.id),$("#gview_"+$.jgrid.jqID(r.p.id))[0]);c&&($("#pData, #nData","#"+u+"_2").css("float","right"),$(".EditButton","#"+u+"_2").css("text-align","left"));i.viewPagerButtons||$("#pData, #nData","#"+u+"_2").hide();k=null;$("#"+o.themodal).keydown(function(t){if(t.which===27)return n[r.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(o.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1;if(i.navkeys[0]===!0){if(t.which===i.navkeys[1])return $("#pData","#"+u+"_2").trigger("click"),!1;if(t.which===i.navkeys[2])return $("#nData","#"+u+"_2").trigger("click"),!1}});i.closeicon=$.extend([!0,"left","ui-icon-close"],i.closeicon);i.closeicon[0]===!0&&$("#cData","#"+u+"_2").addClass(i.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'><\/span>");$.isFunction(i.beforeShowForm)&&i.beforeShowForm.call(r,$("#"+e));$.jgrid.viewModal("#"+$.jgrid.jqID(o.themodal),{gbox:"#gbox_"+$.jgrid.jqID(f),jqm:i.jqModal,overlay:i.overlay,modal:i.modal,onHide:function(n){$(r).data("viewProp",{top:parseFloat($(n.w).css("top")),left:parseFloat($(n.w).css("left")),width:$(n.w).width(),height:$(n.w).height(),dataheight:$("#"+e).height(),datawidth:$("#"+e).width()});n.w.remove();n.o&&n.o.remove()}});$(".fm-button:not(.ui-state-disabled)","#"+u+"_2").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});y();$("#cData","#"+u+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(o.themodal),{gb:"#gbox_"+$.jgrid.jqID(f),jqm:i.jqModal,onClose:i.onClose,removemodal:n[r.p.id].removemodal,formprop:!n[r.p.id].recreateForm,form:n[r.p.id].form}),!1});$("#nData","#"+u+"_2").click(function(){$("#FormError","#"+u).hide();var n=w();return n[0]=parseInt(n[0],10),n[0]!==-1&&n[1][n[0]+1]&&($.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(r,"next",$("#"+e),n[1][n[0]]),nt(n[1][n[0]+1],r),$(r).jqGrid("setSelection",n[1][n[0]+1]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(r,"next",$("#"+e),n[1][n[0]+1]),p(n[0]+1,n)),y(),!1});$("#pData","#"+u+"_2").click(function(){$("#FormError","#"+u).hide();var n=w();return n[0]!==-1&&n[1][n[0]-1]&&($.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(r,"prev",$("#"+e),n[1][n[0]]),nt(n[1][n[0]-1],r),$(r).jqGrid("setSelection",n[1][n[0]-1]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(r,"prev",$("#"+e),n[1][n[0]-1]),p(n[0]-1,n)),y(),!1});d=w();p(d[0],d)}}})},delGridRow:function(t,i){var r=$.jgrid.getRegional(this[0],"del");return i=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},r,i||{}),n[$(this)[0].p.id]=i,this.each(function(){var r=this,b,k;if(r.grid&&t){var v=$.isFunction(n[r.p.id].beforeShowForm),y=$.isFunction(n[r.p.id].afterShowForm),c=$.isFunction(n[r.p.id].beforeInitData)?n[r.p.id].beforeInitData:!1,f=r.p.id,a={},e=!0,u="DelTbl_"+$.jgrid.jqID(f),h,p,l,w,d="DelTbl_"+f,o={themodal:"delmod"+f,modalhead:"delhd"+f,modalcontent:"delcnt"+f,scrollelm:u};if($.isArray(t)&&(t=t.join()),$("#"+$.jgrid.jqID(o.themodal))[0]!==undefined){if(c&&(e=c.call(r,$("#"+u)),e===undefined&&(e=!0)),e===!1)return;$("#DelData>td","#"+u).text(t);$("#DelError","#"+u).hide();n[r.p.id].processing===!0&&(n[r.p.id].processing=!1,$("#dData","#"+u).removeClass("ui-state-active"));v&&n[r.p.id].beforeShowForm.call(r,$("#"+u));$.jgrid.viewModal("#"+$.jgrid.jqID(o.themodal),{gbox:"#gbox_"+$.jgrid.jqID(f),jqm:n[r.p.id].jqModal,jqM:!1,overlay:n[r.p.id].overlay,modal:n[r.p.id].modal});y&&n[r.p.id].afterShowForm.call(r,$("#"+u))}else{var g=isNaN(n[r.p.id].dataheight)?n[r.p.id].dataheight:n[r.p.id].dataheight+"px",nt=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",s="<div id='"+d+"' class='formdata' style='width:"+nt+";overflow:auto;position:relative;height:"+g+";'>";if(s+="<table class='DelTable'><tbody>",s+="<tr id='DelError' style='display:none'><td class='ui-state-error'><\/td><\/tr>",s+="<tr id='DelData' style='display:none'><td >"+t+"<\/td><\/tr>",s+='<tr><td class="delmsg" style="white-space:pre;">'+n[r.p.id].msg+"<\/td><\/tr><tr><td >&#160;<\/td><\/tr>",s+="<\/tbody><\/table><\/div>",b="<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+i.bSubmit+"<\/a>",k="<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+i.bCancel+"<\/a>",s+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+u+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/><\/td><\/tr><tr><td class='DelButton EditButton'>"+b+"&#160;"+k+"<\/td><\/tr><\/tbody><\/table>",i.gbox="#gbox_"+$.jgrid.jqID(f),$.jgrid.createModal(o,s,i,"#gview_"+$.jgrid.jqID(r.p.id),$("#gview_"+$.jgrid.jqID(r.p.id))[0]),c&&(e=c.call(r,$(s)),e===undefined&&(e=!0)),e===!1)return;$(".fm-button","#"+u+"_2").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")});i.delicon=$.extend([!0,"left","ui-icon-scissors"],n[r.p.id].delicon);i.cancelicon=$.extend([!0,"left","ui-icon-cancel"],n[r.p.id].cancelicon);i.delicon[0]===!0&&$("#dData","#"+u+"_2").addClass(i.delicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.delicon[2]+"'><\/span>");i.cancelicon[0]===!0&&$("#eData","#"+u+"_2").addClass(i.cancelicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.cancelicon[2]+"'><\/span>");$("#dData","#"+u+"_2").click(function(){var t=[!0,""],v,e=$("#DelData>td","#"+u).text(),s,c;if(a={},$.isFunction(n[r.p.id].onclickSubmit)&&(a=n[r.p.id].onclickSubmit.call(r,n[r.p.id],e)||{}),$.isFunction(n[r.p.id].beforeSubmit)&&(t=n[r.p.id].beforeSubmit.call(r,e)),t[0]&&!n[r.p.id].processing){if(n[r.p.id].processing=!0,l=r.p.prmNames,h=$.extend({},n[r.p.id].delData,a),w=l.oper,h[w]=l.deloper,p=l.id,e=String(e).split(","),!e.length)return!1;for(v in e)e.hasOwnProperty(v)&&(e[v]=$.jgrid.stripPref(r.p.idPrefix,e[v]));h[p]=e.join();$(this).addClass("ui-state-active");s=$.extend({url:n[r.p.id].url||$(r).jqGrid("getGridParam","editurl"),type:n[r.p.id].mtype,data:$.isFunction(n[r.p.id].serializeDelData)?n[r.p.id].serializeDelData.call(r,h):h,complete:function(s,c){var l;if($("#dData","#"+u+"_2").removeClass("ui-state-active"),s.status>=300&&s.status!==304?(t[0]=!1,t[1]=$.isFunction(n[r.p.id].errorTextFormat)?n[r.p.id].errorTextFormat.call(r,s):c+" Status: '"+s.statusText+"'. Error code: "+s.status):$.isFunction(n[r.p.id].afterSubmit)&&(t=n[r.p.id].afterSubmit.call(r,s,h)),t[0]===!1)$("#DelError>td","#"+u).html(t[1]),$("#DelError","#"+u).show();else{if(n[r.p.id].reloadAfterSubmit&&r.p.datatype!=="local")$(r).trigger("reloadGrid");else{if(r.p.treeGrid===!0)try{$(r).jqGrid("delTreeNode",r.p.idPrefix+e[0])}catch(a){}else for(l=0;l<e.length;l++)$(r).jqGrid("delRowData",r.p.idPrefix+e[l]);r.p.selrow=null;r.p.selarrrow=[]}$.isFunction(n[r.p.id].afterComplete)&&setTimeout(function(){n[r.p.id].afterComplete.call(r,s,e)},500)}n[r.p.id].processing=!1;t[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(o.themodal),{gb:"#gbox_"+$.jgrid.jqID(f),jqm:i.jqModal,onClose:n[r.p.id].onClose})}},$.jgrid.ajaxOptions,n[r.p.id].ajaxDelOptions);s.url||n[r.p.id].useDataProxy||($.isFunction(r.p.dataProxy)?n[r.p.id].useDataProxy=!0:(t[0]=!1,t[1]+=" "+$.jgrid.getRegional(r,"errors.nourl")));t[0]&&(n[r.p.id].useDataProxy?(c=r.p.dataProxy.call(r,s,"del_"+r.p.id),c===undefined&&(c=[!0,""]),c[0]===!1?(t[0]=!1,t[1]=c[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(o.themodal),{gb:"#gbox_"+$.jgrid.jqID(f),jqm:i.jqModal,onClose:n[r.p.id].onClose})):s.url==="clientArray"?(h=s.data,s.complete({status:200,statusText:""},"")):$.ajax(s))}return t[0]===!1&&($("#DelError>td","#"+u).html(t[1]),$("#DelError","#"+u).show()),!1});$("#eData","#"+u+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(o.themodal),{gb:"#gbox_"+$.jgrid.jqID(f),jqm:n[r.p.id].jqModal,onClose:n[r.p.id].onClose}),!1});v&&n[r.p.id].beforeShowForm.call(r,$("#"+u));$.jgrid.viewModal("#"+$.jgrid.jqID(o.themodal),{gbox:"#gbox_"+$.jgrid.jqID(f),jqm:n[r.p.id].jqModal,overlay:n[r.p.id].overlay,modal:n[r.p.id].modal});y&&n[r.p.id].afterShowForm.call(r,$("#"+u))}n[r.p.id].closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(o.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(n,t,i,r,u,f,e){var o=$.jgrid.getRegional(this[0],"nav");return t=$.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"fa fa-search green",refresh:!0,refreshicon:"ui-icon ace-icon fa fa-refresh green",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,searchDivID:""},o,t||{}),this.each(function(){var y,h,p,d,s,c,l,nt,v,a;if(!this.p.navGrid&&(y={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},h=this,h.grid&&typeof n=="string")){$(h).data("navGrid")||$(h).data("navGrid",t);s=$(h).data("navGrid");h.p.force_regional&&(s=$.extend(s,o));$("#"+y.themodal)[0]===undefined&&(s.alerttop||s.alertleft||(window.innerWidth!==undefined?(s.alertleft=window.innerWidth,s.alerttop=window.innerHeight):document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0?(s.alertleft=document.documentElement.clientWidth,s.alerttop=document.documentElement.clientHeight):(s.alertleft=1024,s.alerttop=768),s.alertleft=s.alertleft/2-parseInt(s.alertwidth,10)/2,s.alerttop=s.alerttop/2-25),$.jgrid.createModal(y,"<div>"+s.alerttext+"<\/div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'><\/span><\/span>",{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqModal:!0,drag:!0,resize:!0,caption:s.alertcap,top:s.alerttop,left:s.alertleft,width:s.alertwidth,height:s.alertheight,closeOnEscape:s.closeOnEscape,zIndex:s.alertzIndex},"#gview_"+$.jgrid.jqID(h.p.id),$("#gbox_"+$.jgrid.jqID(h.p.id))[0],!0));var g=1,k,w=function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},b=function(){$(this).removeClass("ui-state-hover")};for(s.cloneToTop&&h.p.toppager&&(g=2),k=0;k<g;k++)l=$("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr><\/tr><\/tbody><\/table>"),nt="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'><\/span><\/td>",k===0?(v=n,a=h.p.id,v===h.p.toppager&&(a+="_top",g=1)):(v=h.p.toppager,a=h.p.id+"_top"),h.p.direction==="rtl"&&$(l).attr("dir","rtl").css("float","right"),r=r||{},s.add&&(c=$("<td class='ui-pg-button ui-corner-all'><\/td>"),$(c).append("<div class='ui-pg-div'><span class='ui-icon "+s.addicon+"'><\/span>"+s.addtext+"<\/div>"),$("tr",l).append(c),$(c,l).attr({title:s.addtitle||"",id:r.id||"add_"+a}).click(function(){return $(this).hasClass("ui-state-disabled")||($.isFunction(s.addfunc)?s.addfunc.call(h):$(h).jqGrid("editGridRow","new",r)),!1}).hover(w,b),c=null),i=i||{},s.edit&&(c=$("<td class='ui-pg-button ui-corner-all'><\/td>"),$(c).append("<div class='ui-pg-div'><span class='ui-icon "+s.editicon+"'><\/span>"+s.edittext+"<\/div>"),$("tr",l).append(c),$(c,l).attr({title:s.edittitle||"",id:i.id||"edit_"+a}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var n=h.p.selrow;n?$.isFunction(s.editfunc)?s.editfunc.call(h,n):$(h).jqGrid("editGridRow",n,i):($.jgrid.viewModal("#"+y.themodal,{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(w,b),c=null),e=e||{},s.view&&(c=$("<td class='ui-pg-button ui-corner-all'><\/td>"),$(c).append("<div class='ui-pg-div'><span class='ui-icon "+s.viewicon+"'><\/span>"+s.viewtext+"<\/div>"),$("tr",l).append(c),$(c,l).attr({title:s.viewtitle||"",id:e.id||"view_"+a}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var n=h.p.selrow;n?$.isFunction(s.viewfunc)?s.viewfunc.call(h,n):$(h).jqGrid("viewGridRow",n,e):($.jgrid.viewModal("#"+y.themodal,{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(w,b),c=null),u=u||{},s.del&&(c=$("<td class='ui-pg-button ui-corner-all'><\/td>"),$(c).append("<div class='ui-pg-div'><span class='ui-icon "+s.delicon+"'><\/span>"+s.deltext+"<\/div>"),$("tr",l).append(c),$(c,l).attr({title:s.deltitle||"",id:u.id||"del_"+a}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var n;h.p.multiselect?(n=h.p.selarrrow,n.length===0&&(n=null)):n=h.p.selrow;n?$.isFunction(s.delfunc)?s.delfunc.call(h,n):$(h).jqGrid("delGridRow",n,u):($.jgrid.viewModal("#"+y.themodal,{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(w,b),c=null),(s.add||s.edit||s.del||s.view)&&$("tr",l).append(nt),f=f||{},s.search&&(c=$("<td class='ui-pg-button ui-corner-all'><\/td>"),$(c).append("<div class='ui-pg-div'><span class='ui-icon "+s.searchicon+"'><\/span>"+s.searchtext+"<\/div>"),$("tr",l).append(c),$(c,l).attr({title:s.searchtitle||"",id:f.id||"search_"+a}).click(function(){return $(this).hasClass("ui-state-disabled")||$(h).jqGrid("searchGrid",s.searchDivID),!1}).hover(w,b),f.showOnLoad&&f.showOnLoad===!0&&$(c,l).click(),c=null),s.refresh&&(c=$("<td class='ui-pg-button ui-corner-all'><\/td>"),$(c).append("<div class='ui-pg-div'><span class='ui-icon "+s.refreshicon+"'><\/span>"+s.refreshtext+"<\/div>"),$("tr",l).append(c),$(c,l).attr({title:s.refreshtitle||"",id:"refresh_"+a}).click(function(){if(!$(this).hasClass("ui-state-disabled")){$.isFunction(s.beforeRefresh)&&s.beforeRefresh.call(h);h.p.search=!1;h.p.resetsearch=!0;try{if(s.refreshstate!=="currentfilter"){var n=h.p.id;h.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(n)).jqFilter("resetFilter")}catch(t){}$.isFunction(h.clearToolbar)&&h.clearToolbar.call(h,!1)}}catch(i){}switch(s.refreshstate){case"firstpage":$(h).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(h).trigger("reloadGrid",[{current:!0}])}$.isFunction(s.afterRefresh)&&s.afterRefresh.call(h)}return!1}).hover(w,b),c=null),d=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ><\/div>"),p=$(l).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(v+"_"+s.position,v).append(l),h.p._nvtd&&(p>h.p._nvtd[0]&&($(v+"_"+s.position,v).width(p),h.p._nvtd[0]=p),h.p._nvtd[1]=p),d=null,p=null,l=null,h.p.navGrid=!0;h.p.storeNavOptions&&(h.p.navOptions=s,h.p.editOptions=i,h.p.addOptions=r,h.p.delOptions=u,h.p.searchOptions=f,h.p.viewOptions=e)}})},navButtonAdd:function(n,t){return t=$.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},t||{}),this.each(function(){var i,u,r;if(this.grid&&(typeof n=="string"&&n.indexOf("#")!==0&&(n="#"+$.jgrid.jqID(n)),i=$(".navtable",n)[0],u=this,i)){if(t.id&&$("#"+$.jgrid.jqID(t.id),i)[0]!==undefined)return;r=$("<td><\/td>");t.buttonicon.toString().toUpperCase()==="NONE"?$(r).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+t.caption+"<\/div>"):$(r).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+t.buttonicon+"'><\/span>"+t.caption+"<\/div>");t.id&&$(r).attr("id",t.id);t.position==="first"?i.rows[0].cells.length===0?$("tr",i).append(r):$("tr td:eq(0)",i).before(r):$("tr",i).append(r);$(r,i).attr("title",t.title||"").click(function(n){return $(this).hasClass("ui-state-disabled")||$.isFunction(t.onClickButton)&&t.onClickButton.call(u,n),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}})},navSeparatorAdd:function(n,t){return t=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{}),this.each(function(){var i,r;this.grid&&(typeof n=="string"&&n.indexOf("#")!==0&&(n="#"+$.jgrid.jqID(n)),i=$(".navtable",n)[0],i&&(r="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+t.sepclass+"'><\/span>"+t.sepcontent+"<\/td>",t.position==="first"?i.rows[0].cells.length===0?$("tr",i).append(r):$("tr td:eq(0)",i).before(r):$("tr",i).append(r)))})},GridToForm:function(n,t){return this.each(function(){var u=this,i,r;if(u.grid&&(r=$(u).jqGrid("getRowData",n),r))for(i in r)r.hasOwnProperty(i)&&($("[name="+$.jgrid.jqID(i)+"]",t).is("input:radio")||$("[name="+$.jgrid.jqID(i)+"]",t).is("input:checkbox")?$("[name="+$.jgrid.jqID(i)+"]",t).each(function(){$(this).val()==r[i]?$(this)[u.p.useProp?"prop":"attr"]("checked",!0):$(this)[u.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(i)+"]",t).val(r[i]))})},FormToGrid:function(n,t,i,r){return this.each(function(){var f=this,e,u;f.grid&&(i||(i="set"),r||(r="first"),e=$(t).serializeArray(),u={},$.each(e,function(n,t){u[t.name]=t.value}),i==="add"?$(f).jqGrid("addRowData",n,u,r):i==="set"&&$(f).jqGrid("setRowData",n,u))})}});$.jgrid.extend({groupingSetup:function(){return this.each(function(){var u=this,t,i,f,r=u.p.colModel,n=u.p.groupingView;if(n!==null&&(typeof n=="object"||$.isFunction(n)))if(n.groupField.length){for(n.visibiltyOnNextGrouping===undefined&&(n.visibiltyOnNextGrouping=[]),n.lastvalues=[],n._locgr||(n.groups=[]),n.counters=[],t=0;t<n.groupField.length;t++)n.groupOrder[t]||(n.groupOrder[t]="asc"),n.groupText[t]||(n.groupText[t]="{0}"),typeof n.groupColumnShow[t]!="boolean"&&(n.groupColumnShow[t]=!0),typeof n.groupSummary[t]!="boolean"&&(n.groupSummary[t]=!1),n.groupSummaryPos[t]||(n.groupSummaryPos[t]="footer"),n.groupColumnShow[t]===!0?(n.visibiltyOnNextGrouping[t]=!0,$(u).jqGrid("showCol",n.groupField[t])):(n.visibiltyOnNextGrouping[t]=$("#"+$.jgrid.jqID(u.p.id+"_"+n.groupField[t])).is(":visible"),$(u).jqGrid("hideCol",n.groupField[t]));for(n.summary=[],n.hideFirstGroupCol&&(n.formatDisplayField[0]=function(n){return n}),i=0,f=r.length;i<f;i++)n.hideFirstGroupCol&&(r[i].hidden||n.groupField[0]!==r[i].name||(r[i].formatter=function(){return""})),r[i].summaryType&&(r[i].summaryDivider?n.summary.push({nm:r[i].name,st:r[i].summaryType,v:"",sd:r[i].summaryDivider,vd:"",sr:r[i].summaryRound,srt:r[i].summaryRoundType||"round"}):n.summary.push({nm:r[i].name,st:r[i].summaryType,v:"",sr:r[i].summaryRound,srt:r[i].summaryRoundType||"round"}))}else u.p.grouping=!1;else u.p.grouping=!1})},groupingPrepare:function(n,t){return this.each(function(){for(var i=this.p.groupingView,o=this,s=function(){$.isFunction(this.st)?this.v=this.st.call(o,this.v,this.nm,n):(this.v=$(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,n),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=$(o).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,n)))},l=i.groupField.length,e,u,h,f,c=0,r=0;r<l;r++)e=i.groupField[r],h=i.displayField[r],u=n[e],f=h==null?null:n[h],f==null&&(f=u),u!==undefined&&(t===0?(i.groups.push({idx:r,dataIndex:e,value:u,displayValue:f,startRow:t,cnt:1,summary:[]}),i.lastvalues[r]=u,i.counters[r]={cnt:1,pos:i.groups.length-1,summary:$.extend(!0,[],i.summary)},$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary):typeof u=="object"||($.isArray(i.isInTheSameGroup)&&$.isFunction(i.isInTheSameGroup[r])?i.isInTheSameGroup[r].call(o,i.lastvalues[r],u,r,i):i.lastvalues[r]===u)?c===1?(i.groups.push({idx:r,dataIndex:e,value:u,displayValue:f,startRow:t,cnt:1,summary:[]}),i.lastvalues[r]=u,i.counters[r]={cnt:1,pos:i.groups.length-1,summary:$.extend(!0,[],i.summary)},$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary):(i.counters[r].cnt+=1,i.groups[i.counters[r].pos].cnt=i.counters[r].cnt,$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary):(i.groups.push({idx:r,dataIndex:e,value:u,displayValue:f,startRow:t,cnt:1,summary:[]}),i.lastvalues[r]=u,c=1,i.counters[r]={cnt:1,pos:i.groups.length-1,summary:$.extend(!0,[],i.summary)},$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary))}),this},groupingToggle:function(n){return this.each(function(){var r=this,l=r.p.groupingView,e=n.split("_"),s=parseInt(e[e.length-2],10);e.splice(e.length-2,2);var a=e.join("_"),o=l.minusicon,h=l.plusicon,k=$("#"+$.jgrid.jqID(n)),t=k.length?k[0].nextSibling:null,v=$("#"+$.jgrid.jqID(n)+" span.tree-wrap-"+r.p.direction),y=function(n){var t=$.map(n.split(" "),function(n){if(n.substring(0,a.length+1)===a+"_")return parseInt(n.substring(a.length+1),10)});return t.length>0?t[0]:undefined},i,c,p=!1,w=!1,f=r.p.frozenColumns?r.p.id+"_frozen":!1,b=f?$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(f)):!1,u=b&&b.length?b[0].nextSibling:null;if(v.hasClass(o)){if(l.showSummaryOnHide){if(t)while(t){if(i=y(t.className),i!==undefined&&i<=s)break;$(t).hide();t=t.nextSibling;f&&($(u).hide(),u=u.nextSibling)}}else if(t)while(t){if(i=y(t.className),i!==undefined&&i<=s)break;$(t).hide();t=t.nextSibling;f&&($(u).hide(),u=u.nextSibling)}v.removeClass(o).addClass(h);p=!0}else{if(t)for(c=undefined;t;){if(i=y(t.className),c===undefined&&(c=i===undefined),w=$(t).hasClass("ui-subgrid")&&$(t).hasClass("ui-sg-collapsed"),i!==undefined){if(i<=s)break;i===s+1&&(w||($(t).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(o).addClass(h),f&&$(u).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(o).addClass(h)))}else c&&(w||($(t).show(),f&&$(u).show()));t=t.nextSibling;f&&(u=u.nextSibling)}v.removeClass(h).addClass(o)}$(r).triggerHandler("jqGridGroupingClickGroup",[n,p]);$.isFunction(r.p.onClickGroup)&&r.p.onClickGroup.call(r,n,p)}),!1},groupingRender:function(n,t,i,r){return this.each(function(){function k(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function b(n,i,r,u){for(var o=k(n,i,r),s=f.p.colModel,h,a=o.cnt,v="",c,l,e=u;e<t;e++)c="<td "+f.formatCol(e,1,"")+">&#160;<\/td>",l="{0}",$.each(o.summary,function(){if(this.nm===s[e].name){s[e].summaryTpl&&(l=s[e].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=o.cnt;this.groupIndex=o.dataIndex;this.groupValue=o.value;h=f.formatter("",this.v,e,this)}catch(n){h=this.v}return c="<td "+f.formatCol(e,1,"")+">"+$.jgrid.template(l,h)+"<\/td>",!1}}),v+=c;return v}var f=this,u=f.p.groupingView,e="",a="",s,c,p=u.groupCollapse?u.plusicon:u.minusicon,o,v=[],w=u.groupField.length,h,y,l;p+=" tree-wrap-"+f.p.direction;$.each(f.p.colModel,function(n,t){for(var i=0;i<w;i++)if(u.groupField[i]===t.name){v[i]=n;break}});h=0;y=$.makeArray(u.groupSummary);y.reverse();l=f.p.multiselect?' colspan="2"':"";$.each(u.groups,function(k,d){var g,et,tt,ft;if(u._locgr&&!(d.startRow+d.cnt>(i-1)*r&&d.startRow<i*r))return!0;h++;c=f.p.id+"ghead_"+d.idx;s=c+"_"+k;a="<span style='cursor:pointer;' class='ui-icon "+p+"' onclick=\"jQuery('#"+$.jgrid.jqID(f.p.id)+"').jqGrid('groupingToggle','"+s+"');return false;\"><\/span>";try{$.isArray(u.formatDisplayField)&&$.isFunction(u.formatDisplayField[d.idx])?(d.displayValue=u.formatDisplayField[d.idx].call(f,d.displayValue,d.value,f.p.colModel[v[d.idx]],d.idx,u),o=d.displayValue):o=f.formatter(s,d.displayValue,v[d.idx],d.value)}catch(ht){o=d.displayValue}if(g="",g=$.isFunction(u.groupText[d.idx])?u.groupText[d.idx].call(f,o,d.cnt,d.summary):$.jgrid.template(u.groupText[d.idx],o,d.cnt,d.summary),typeof g=="string"||typeof g=="number"||(g=o),u.groupSummaryPos[d.idx]==="header"?(e+='<tr id="'+s+'"'+(u.groupCollapse&&d.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+f.p.direction+" "+c+'"><td style="padding-left:'+d.idx*12+'px;"'+l+">"+a+g+"<\/td>",e+=b(k,0,u.groups,u.groupColumnShow[d.idx]===!1?l===""?2:3:l===""?1:2),e+="<\/tr>"):e+='<tr id="'+s+'"'+(u.groupCollapse&&d.idx>0?' style="display:none;" ':" ")+'role="row" class= "ui-widget-content jqgroup ui-row-'+f.p.direction+" "+c+'"><td style="padding-left:'+d.idx*12+'px;" colspan="'+(u.groupColumnShow[d.idx]===!1?t-1:t)+'">'+a+g+"<\/td><\/tr>",et=w-1===d.idx,et){var ut=u.groups[k+1],it,nt,rt=0,ot=d.startRow,st=ut!==undefined?ut.startRow:u.groups[k].startRow+u.groups[k].cnt;for(u._locgr&&(rt=(i-1)*r,rt>d.startRow&&(ot=rt)),it=ot;it<st;it++){if(!n[it-rt])break;e+=n[it-rt].join("")}if(u.groupSummaryPos[d.idx]!=="header"){if(ut!==undefined){for(tt=0;tt<u.groupField.length;tt++)if(ut.dataIndex===u.groupField[tt])break;h=u.groupField.length-tt}for(nt=0;nt<h;nt++)y[nt]&&(ft="",u.groupCollapse&&!u.showSummaryOnHide&&(ft=' style="display:none;"'),e+="<tr"+ft+' jqfootlevel="'+(d.idx-nt)+'" role="row" class="ui-widget-content jqfoot ui-row-'+f.p.direction+'">',e+=b(k,nt,u.groups,0),e+="<\/tr>");h=tt}}});$("#"+$.jgrid.jqID(f.p.id)+" tbody:first").append(e);e=null})},groupingGroupBy:function(n,t){return this.each(function(){var u=this,r,i;for(typeof n=="string"&&(n=[n]),r=u.p.groupingView,u.p.grouping=!0,r._locgr=!1,r.visibiltyOnNextGrouping===undefined&&(r.visibiltyOnNextGrouping=[]),i=0;i<r.groupField.length;i++)!r.groupColumnShow[i]&&r.visibiltyOnNextGrouping[i]&&$(u).jqGrid("showCol",r.groupField[i]);for(i=0;i<n.length;i++)r.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID(u.p.id)+"_"+$.jgrid.jqID(n[i])).is(":visible");u.p.groupingView=$.extend(u.p.groupingView,t||{});r.groupField=n;$(u).trigger("reloadGrid")})},groupingRemove:function(n){return this.each(function(){var t=this,i,r;if(n===undefined&&(n=!0),t.p.grouping=!1,n===!0){for(i=t.p.groupingView,r=0;r<i.groupField.length;r++)!i.groupColumnShow[r]&&i.visibiltyOnNextGrouping[r]&&$(t).jqGrid("showCol",i.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(t.p.id)+" tbody:first").remove();$("tr.jqgrow:hidden","#"+$.jgrid.jqID(t.p.id)+" tbody:first").show()}else $(t).trigger("reloadGrid")})},groupingCalculations:{handler:function(n,t,i,r,u,f){var o={sum:function(){return parseFloat(t||0)+parseFloat(f[i]||0)},min:function(){return t===""?parseFloat(f[i]||0):Math.min(parseFloat(t),parseFloat(f[i]||0))},max:function(){return t===""?parseFloat(f[i]||0):Math.max(parseFloat(t),parseFloat(f[i]||0))},count:function(){return(t===""&&(t=0),f.hasOwnProperty(i))?t+1:0},avg:function(){return o.sum()}},e,s;if(!o[n])throw"jqGrid Grouping No such method: "+n;return e=o[n](),r!=null&&(u==="fixed"?e=e.toFixed(r):(s=Math.pow(10,r),e=Math.round(e*s)/s)),e}},setGroupHeaders:function(n){return n=$.extend({useColSpanStyle:!1,groupHeaders:[]},n||{}),this.each(function(){var nt,tt;this.p.groupHeader=n;var t=this,i,c,v=0,o,u,f,l,b,r,y,p,k,s,w=t.p.colModel,d=w.length,g=t.grid.headers,e=$("table.ui-jqgrid-htable",t.grid.hDiv),it=e.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),rt=e.children("thead"),a,h=e.find(".jqg-first-row-header");for(h[0]===undefined?h=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):h.empty(),tt=function(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i].startColumnName===n)return i;return-1},$(t).prepend(rt),o=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),i=0;i<d;i++)if(f=g[i].el,l=$(f),c=w[i],b={height:"0px",width:g[i].width+"px",display:c.hidden?"none":""},$("<th>",{role:"gridcell"}).css(b).addClass("ui-first-th-"+t.p.direction).appendTo(h),f.style.width="",r=tt(c.name,n.groupHeaders),r>=0){for(y=n.groupHeaders[r],p=y.numberOfColumns,k=y.titleText,s=0,r=0;r<p&&i+r<d;r++)w[i+r].hidden||s++;u=$("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+t.p.direction).html(k);s>0&&u.attr("colspan",String(s));t.p.headertitles&&u.attr("title",u.text());s===0&&u.hide();l.before(u);o.append(f);v=p-1}else v===0?n.useColSpanStyle?l.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+t.p.direction).css({display:c.hidden?"none":""}).insertBefore(l),o.append(f)):(o.append(f),v--);a=$(t).children("thead");a.prepend(h);o.insertAfter(it);e.append(a);n.useColSpanStyle&&(e.find("span.ui-jqgrid-resize").each(function(){var n=$(this).parent();n.is(":visible")&&(this.style.cssText="height: "+n.height()+"px !important; cursor: col-resize;")}),e.find("div.ui-jqgrid-sortable").each(function(){var n=$(this),t=n.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&n.css("top",(t.height()-n.outerHeight())/2-4+"px")}));nt=a.find("tr.jqg-first-row-header");$(t).bind("jqGridResizeStop.setGroupHeaders",function(n,t,i){nt.find("th").eq(i).width(t)})})},destroyGroupHeader:function(n){return n===undefined&&(n=!0),this.each(function(){var u=this,f,t,s,r,i,e,o=u.grid,h=$("table.ui-jqgrid-htable thead",o.hDiv),l=u.p.colModel,c;if(o){for($(this).unbind(".setGroupHeaders"),f=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),r=o.headers,t=0,s=r.length;t<s;t++){c=l[t].hidden?"none":"";i=$(r[t].el).width(r[t].width).css("display",c);try{i.removeAttr("rowSpan")}catch(a){i.attr("rowSpan",1)}f.append(i);e=i.children("span.ui-jqgrid-resize");e.length>0&&(e[0].style.height="");i.children("div")[0].style.top=""}$(h).children("tr.ui-jqgrid-labels").remove();$(h).prepend(f);n===!0&&$(u).jqGrid("setGridParam",{groupHeader:null})}})}});$.jgrid=$.jgrid||{};$.extend($.jgrid,{saveState:function(n,t){if(t=$.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16"},t||{}),n){var r="",e="",u,i=$("#"+n)[0],f;if(i.grid){if(f=$(i).data("inlineNav"),f&&i.p.inlineNav&&$(i).jqGrid("setGridParam",{_iN:f}),f=$(i).data("filterToolbar"),f&&i.p.filterToolbar&&$(i).jqGrid("setGridParam",{_fT:f}),r=$(i).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),$(i.grid.bDiv).find(".ui-jqgrid-btable tr:gt(0)").each(function(n,t){e+=t.outerHTML}),$.isFunction(t.beforeSetItem)&&(u=t.beforeSetItem.call(i,r),u!=null&&(r=u)),t.compression&&t.compressionModule)try{u=window[t.compressionModule][t.compressionMethod](r);u!=null&&(r=u,e=window[t.compressionModule][t.compressionMethod](e))}catch(o){}if(t.useStorage&&$.jgrid.isLocalStorage())try{window[t.storageType].setItem("jqGrid"+i.p.id,r);window[t.storageType].setItem("jqGrid"+i.p.id+"_data",e)}catch(o){o.code===22&&alert("Local storage limit is over!")}return r}}},loadState:function(n,t,i){var r,o,e,s,h,c,f,l,u;if(i=$.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},i||{}),n){if(e=$("#"+n)[0],e.grid&&$.jgrid.gridUnload(n),i.useStorage)try{t=window[i.storageType].getItem("jqGrid"+e.id);s=window[i.storageType].getItem("jqGrid"+e.id+"_data")}catch(a){}if(t){if(i.decompression&&i.decompressionModule)try{r=window[i.decompressionModule][i.decompressionMethod](t);r!=null&&(t=r,s=window[i.decompressionModule][i.decompressionMethod](s))}catch(a){}r=jqGridUtils.parse(t);r&&$.type(r)==="object"?($.isFunction(i.beforeSetGrid)&&(o=i.beforeSetGrid(r),o&&$.type(o)==="object"&&(r=o)),f=function(n){return n},l={reccount:r.reccount,records:r.records,lastpage:r.lastpage,shrinkToFit:f(r.shrinkToFit),data:f(r.data),datatype:f(r.datatype),grouping:f(r.grouping)},r.shrinkToFit=!1,r.data=[],r.datatype="local",r.grouping=!1,r.navGrid=!1,r.inlineNav&&(h=f(r._iN),r._iN=null,delete r._iN),r.filterToolbar&&(c=f(r._fT),r._fT=null,delete r._fT),u=$("#"+n).jqGrid(r),u.append(s),u.jqGrid("setGridParam",l),r.storeNavOptions&&u.jqGrid("navGrid",r.pager,r.navOptions,r.editOptions,r.addOptions,r.delOptions,r.searchOptions,r.viewOptions),r.inlineNav&&h&&(u.jqGrid("setGridParam",{inlineNav:!1}),u.jqGrid("inlineNav",r.pager,h)),r.filterToolbar&&c&&(u.jqGrid("setGridParam",{filterToolbar:!1}),u.jqGrid("filterToolbar",c)),u[0].updatepager(!0,!0),i.clearAfterLoad&&(window[i.storageType].removeItem("jqGrid"+e.id),window[i.storageType].removeItem("jqGrid"+e.id+"_data"))):alert("can not convert to object")}}},setRegional:function(n,t){$.jgrid.saveState(n,{storageType:"sessionStorage"});$.jgrid.loadState(n,null,{storageType:"sessionStorage",beforeSetGrid:function(n){return n.regional=t.regional,n.force_regional=!0,n}});var r=$("#"+n)[0],f=$(r).jqGrid("getGridParam","colModel"),u=-1,i=$.jgrid.getRegional(r,"nav");$.each(f,function(n){if(this.formatter&&this.formatter==="actions")return u=n,!1});u!==-1&&i&&$("#"+n+" tbody tr").each(function(){var n=this.cells[u];$(n).find(".ui-inline-edit").attr("title",i.edittitle);$(n).find(".ui-inline-del").attr("title",i.deltitle);$(n).find(".ui-inline-save").attr("title",i.savetitle);$(n).find(".ui-inline-cancel").attr("title",i.canceltitle)});try{window.sessionStorage.removeItem("jqGrid"+r.id);window.sessionStorage.removeItem("jqGrid"+r.id+"_data")}catch(e){}},jqGridImport:function(n,t){var r;t=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{});var i=(n.indexOf("#")===0?"":"#")+$.jgrid.jqID(n),u=function(n,t){var o=$(t.xmlGrid.config,n)[0],s=$(t.xmlGrid.data,n)[0],r,u,f,e;if(jqGridUtils.xmlToJSON){r=jqGridUtils.xmlToJSON(o);for(f in r)r.hasOwnProperty(f)&&(u=r[f]);s?(e=r.grid.datatype,r.grid.datatype="xmlstring",r.grid.datastr=n,$(i).jqGrid(u).jqGrid("setGridParam",{datatype:e})):setTimeout(function(){$(i).jqGrid(u)},0)}else alert("xml2json or parse are not present")},f=function(n,t){var e;if(n&&typeof n=="string"){var u=jqGridUtils.parse(n),r=u[t.jsonGrid.config],f=u[t.jsonGrid.data];f?(e=r.datatype,r.datatype="jsonstring",r.datastr=f,$(i).jqGrid(r).jqGrid("setGridParam",{datatype:e})):$(i).jqGrid(r)}};switch(t.imptype){case"xml":$.ajax($.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(n,r){r==="success"&&(u(n.responseXML,t),$(i).triggerHandler("jqGridImportComplete",[n,t]),$.isFunction(t.importComplete)&&t.importComplete(n));n=null}},t.ajaxOptions));break;case"xmlstring":t.impstring&&typeof t.impstring=="string"&&(r=$.parseXML(t.impstring),r&&(u(r,t),$(i).triggerHandler("jqGridImportComplete",[r,t]),$.isFunction(t.importComplete)&&t.importComplete(r)));break;case"json":$.ajax($.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(n){try{f(n.responseText,t);$(i).triggerHandler("jqGridImportComplete",[n,t]);$.isFunction(t.importComplete)&&t.importComplete(n)}catch(r){}n=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&typeof t.impstring=="string"&&(f(t.impstring,t),$(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),$.isFunction(t.importComplete)&&t.importComplete(t.impstring))}}});$.jgrid.extend({jqGridExport:function(n){n=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},n||{});var t=null;return this.each(function(){if(this.grid){var r,i=$.extend(!0,{},$(this).jqGrid("getGridParam"),n.addOptions);if(i.rownumbers&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.multiselect&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.subGrid&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.knv=null,i.treeGrid)for(r in i.treeReader)i.treeReader.hasOwnProperty(r)&&(i.colNames.splice(i.colNames.length-1),i.colModel.splice(i.colModel.length-1));switch(n.exptype){case"xmlstring":t="<"+n.root+">"+jqGridUtils.jsonToXML(i,{xmlDecl:""})+"<\/"+n.root+">";break;case"jsonstring":t=jqGridUtils.stringify(i);n.root&&(t="{"+n.root+":"+t+"}")}}}),t},excelExport:function(n){return n=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},n||{}),this.each(function(){var r,t,i;this.grid&&n.exptype==="remote"&&(t=$.extend({},this.p.postData),t[n.oper]=n.tag,i=jQuery.param(t),r=n.url.indexOf("?")!==-1?n.url+"&"+i:n.url+"?"+i,window.location=r)})}});$.jgrid.inlineEdit=$.jgrid.inlineEdit||{};$.jgrid.extend({editRow:function(n,t,i,r,u,f,e,o,s){var h={},c=$.makeArray(arguments).slice(1);return $.type(c[0])==="object"?h=c[0]:(t!==undefined&&(h.keys=t),$.isFunction(i)&&(h.oneditfunc=i),$.isFunction(r)&&(h.successfunc=r),u!==undefined&&(h.url=u),f!==undefined&&(h.extraparam=f),$.isFunction(e)&&(h.aftersavefunc=e),$.isFunction(o)&&(h.errorfunc=o),$.isFunction(s)&&(h.afterrestorefunc=s)),h=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},$.jgrid.inlineEdit,h),this.each(function(){var t=this,u,r,c,l=0,e=null,s={},f,i,o;t.grid&&(f=$(t).jqGrid("getInd",n,!0),f!==!1)&&(o=$.isFunction(h.beforeEditRow)?h.beforeEditRow.call(t,h,n):undefined,o===undefined&&(o=!0),o)&&(c=$(f).attr("editable")||"0",c!=="0"||$(f).hasClass("not-editable-row")||(i=t.p.colModel,$('td[role="gridcell"]',f).each(function(f){var h,c,o;if(u=i[f].name,h=t.p.treeGrid===!0&&u===t.p.ExpandColumn,h)r=$("span:first",this).html();else try{r=$.unformat.call(t,this,{rowId:n,colModel:i[f]},f)}catch(a){r=i[f].edittype&&i[f].edittype==="textarea"?$(this).text():$(this).html()}u!=="cb"&&u!=="subgrid"&&u!=="rn"&&(t.p.autoencode&&(r=$.jgrid.htmlDecode(r)),s[u]=r,i[f].editable===!0&&(e===null&&(e=f),h?$("span:first",this).html(""):$(this).html(""),c=$.extend({},i[f].editoptions||{},{id:n+"_"+u,name:u,rowId:n,oper:"edit"}),i[f].edittype||(i[f].edittype="text"),(r==="&nbsp;"||r==="&#160;"||r.length===1&&r.charCodeAt(0)===160)&&(r=""),o=$.jgrid.createEl.call(t,i[f].edittype,c,r,!0,$.extend({},$.jgrid.ajaxOptions,t.p.ajaxSelectOptions||{})),$(o).addClass("editable"),h?$("span:first",this).append(o):$(this).append(o),$.jgrid.bindEv.call(t,o,c),i[f].edittype==="select"&&i[f].editoptions!==undefined&&i[f].editoptions.multiple===!0&&i[f].editoptions.dataUrl===undefined&&$.jgrid.msie&&$(o).width($(o).width()),l++))}),l>0&&(s.id=n,t.p.savedRow.push(s),$(f).attr("editable","1"),h.focusField&&(typeof h.focusField=="number"&&parseInt(h.focusField,10)<=i.length&&(e=h.focusField),setTimeout(function(){var n=$("td:eq("+e+") :input:visible",f).not(":disabled");n.length>0&&n.focus()},0)),h.keys===!0&&$(f).bind("keydown",function(i){if(i.keyCode===27){if($(t).jqGrid("restoreRow",n,h.afterrestorefunc),t.p.inlineNav)try{$(t).jqGrid("showAddEditButtons")}catch(u){}return!1}if(i.keyCode===13){var r=i.target;if(r.tagName==="TEXTAREA")return!0;if($(t).jqGrid("saveRow",n,h)&&t.p.inlineNav)try{$(t).jqGrid("showAddEditButtons")}catch(f){}return!1}}),$(t).triggerHandler("jqGridInlineEditRow",[n,h]),$.isFunction(h.oneditfunc)&&h.oneditfunc.call(t,n))))})},saveRow:function(n,t,i,r,u,f,e){var ct=$.makeArray(arguments).slice(1),s={},o=this[0],l,ft,et,v,tt,it,rt,ot,st,nt,ht;$.type(ct[0])==="object"?s=ct[0]:($.isFunction(t)&&(s.successfunc=t),i!==undefined&&(s.url=i),r!==undefined&&(s.extraparam=r),$.isFunction(u)&&(s.aftersavefunc=u),$.isFunction(f)&&(s.errorfunc=f),$.isFunction(e)&&(s.afterrestorefunc=e));s=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional(o,"defaults.savetext")},$.jgrid.inlineEdit,s);var b=!1,c,h={},k={},y={},lt,w,d,a,at=!1;if(!o.grid||(a=$(o).jqGrid("getInd",n,!0),a===!1))return b;var g=$.jgrid.getRegional(this,"errors"),p=$.jgrid.getRegional(this,"edit"),ut=$.isFunction(s.beforeSaveRow)?s.beforeSaveRow.call(o,s,n):undefined;if(ut===undefined&&(ut=!0),ut){if(lt=$(a).attr("editable"),s.url=s.url||o.p.editurl,lt==="1"){if($('td[role="gridcell"]',a).each(function(n){var t,u,i;if(l=o.p.colModel[n],c=l.name,c!=="cb"&&c!=="subgrid"&&l.editable===!0&&c!=="rn"&&!$(this).hasClass("not-editable-cell")){switch(l.edittype){case"checkbox":t=["Yes","No"];l.editoptions&&(t=l.editoptions.value.split(":"));h[c]=$("input",this).is(":checked")?t[0]:t[1];break;case"text":case"password":case"textarea":case"button":h[c]=$("input, textarea",this).val();break;case"select":l.editoptions.multiple?(u=$("select",this),i=[],h[c]=$(u).val(),h[c]=h[c]?h[c].join(","):"",$("select option:selected",this).each(function(n,t){i[n]=$(t).text()}),k[c]=i.join(",")):(h[c]=$("select option:selected",this).val(),k[c]=$("select option:selected",this).text());l.formatter&&l.formatter==="select"&&(k={});break;case"custom":try{if(l.editoptions&&$.isFunction(l.editoptions.custom_value)){if(h[c]=l.editoptions.custom_value.call(o,$(".customelement",this),"get"),h[c]===undefined)throw"e2";}else throw"e1";}catch(r){r==="e1"&&$.jgrid.info_dialog(g.errcap,"function 'custom_value' "+p.msg.nodefined,p.bClose);r==="e2"?$.jgrid.info_dialog(g.errcap,"function 'custom_value' "+p.msg.novalue,p.bClose):$.jgrid.info_dialog(g.errcap,r.message,p.bClose)}}if(d=$.jgrid.checkValues.call(o,h[c],n),d[0]===!1)return!1;o.p.autoencode&&(h[c]=$.jgrid.htmlEncode(h[c]));s.url!=="clientArray"&&l.editoptions&&l.editoptions.NullIfEmpty===!0&&h[c]===""&&(y[c]="null",at=!0)}}),d[0]===!1){try{ft=$(o).jqGrid("getGridRowById",n);et=$.jgrid.findPos(ft);$.jgrid.info_dialog(g.errcap,d[1],p.bClose,{left:et[0],top:et[1]+$(ft).outerHeight()})}catch(vt){alert(d[1])}return b}if(tt=o.p.prmNames,it=n,v=o.p.keyName===!1?tt.id:o.p.keyName,h&&(h[tt.oper]=tt.editoper,h[v]===undefined||h[v]===""?h[v]=n:a.id!==o.p.idPrefix+h[v]&&(rt=$.jgrid.stripPref(o.p.idPrefix,n),o.p._index[rt]!==undefined&&(o.p._index[h[v]]=o.p._index[rt],delete o.p._index[rt]),n=o.p.idPrefix+h[v],$(a).attr("id",n),o.p.selrow===it&&(o.p.selrow=n),$.isArray(o.p.selarrrow)&&(ot=$.inArray(it,o.p.selarrrow),ot>=0&&(o.p.selarrrow[ot]=n)),o.p.multiselect&&(st="jqg_"+o.p.id+"_"+n,$("input.cbox",a).attr("id",st).attr("name",st))),o.p.inlineData===undefined&&(o.p.inlineData={}),h=$.extend({},h,o.p.inlineData,s.extraparam)),s.url==="clientArray"){for(h=$.extend({},h,k),o.p.autoencode&&$.each(h,function(n,t){h[n]=$.jgrid.htmlDecode(t)}),ht=$(o).jqGrid("setRowData",n,h),$(a).attr("editable","0"),nt=0;nt<o.p.savedRow.length;nt++)if(String(o.p.savedRow[nt].id)===String(it)){w=nt;break}w>=0&&o.p.savedRow.splice(w,1);$(o).triggerHandler("jqGridInlineAfterSaveRow",[n,ht,h,s]);$.isFunction(s.aftersavefunc)&&s.aftersavefunc.call(o,n,ht,h,s);b=!0;$(a).removeClass("jqgrid-new-row").unbind("keydown")}else $(o).jqGrid("progressBar",{method:"show",loadtype:s.saveui,htmlcontent:s.savetext}),y=$.extend({},h,y),y[v]=$.jgrid.stripPref(o.p.idPrefix,y[v]),$.ajax($.extend({url:s.url,data:$.isFunction(o.p.serializeRowData)?o.p.serializeRowData.call(o,y):y,type:s.mtype,async:!1,complete:function(t,i){if($(o).jqGrid("progressBar",{method:"hide",loadtype:s.saveui,htmlcontent:s.savetext}),i==="success"){var f=!0,r,u;if(r=$(o).triggerHandler("jqGridInlineSuccessSaveRow",[t,n,s]),$.isArray(r)||(r=[!0,y]),r[0]&&$.isFunction(s.successfunc)&&(r=s.successfunc.call(o,t)),$.isArray(r)?(f=r[0],h=r[1]||h):f=r,f===!0){for(o.p.autoencode&&$.each(h,function(n,t){h[n]=$.jgrid.htmlDecode(t)}),at&&$.each(h,function(n){h[n]==="null"&&(h[n]="")}),h=$.extend({},h,k),$(o).jqGrid("setRowData",n,h),$(a).attr("editable","0"),u=0;u<o.p.savedRow.length;u++)if(String(o.p.savedRow[u].id)===String(n)){w=u;break}w>=0&&o.p.savedRow.splice(w,1);$(o).triggerHandler("jqGridInlineAfterSaveRow",[n,t,h,s]);$.isFunction(s.aftersavefunc)&&s.aftersavefunc.call(o,n,t,h,s);b=!0;$(a).removeClass("jqgrid-new-row").unbind("keydown")}else $(o).triggerHandler("jqGridInlineErrorSaveRow",[n,t,i,null,s]),$.isFunction(s.errorfunc)&&s.errorfunc.call(o,n,t,i,null),s.restoreAfterError===!0&&$(o).jqGrid("restoreRow",n,s.afterrestorefunc)}},error:function(t,i,r){if($("#lui_"+$.jgrid.jqID(o.p.id)).hide(),$(o).triggerHandler("jqGridInlineErrorSaveRow",[n,t,i,r,s]),$.isFunction(s.errorfunc))s.errorfunc.call(o,n,t,i,r);else{var u=t.responseText||t.statusText;try{$.jgrid.info_dialog(g.errcap,'<div class="ui-state-error">'+u+"<\/div>",p.bClose,{buttonalign:"right"})}catch(f){alert(u)}}s.restoreAfterError===!0&&$(o).jqGrid("restoreRow",n,s.afterrestorefunc)}},$.jgrid.ajaxOptions,o.p.ajaxRowOptions||{}))}return b}},restoreRow:function(n,t){var r=$.makeArray(arguments).slice(1),i={};return $.type(r[0])==="object"?i=r[0]:$.isFunction(t)&&(i.afterrestorefunc=t),i=$.extend(!0,{},$.jgrid.inlineEdit,i),this.each(function(){var t=this,r=-1,f,o={},u,e;if(t.grid&&(f=$(t).jqGrid("getInd",n,!0),f!==!1)&&(e=$.isFunction(i.beforeCancelRow)?i.beforeCancelRow.call(t,i,n):undefined,e===undefined&&(e=!0),e)){for(u=0;u<t.p.savedRow.length;u++)if(String(t.p.savedRow[u].id)===String(n)){r=u;break}if(r>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(f.id)).datepicker("hide")}catch(s){}$.each(t.p.colModel,function(){this.editable===!0&&t.p.savedRow[r].hasOwnProperty(this.name)&&(o[this.name]=t.p.savedRow[r][this.name])});$(t).jqGrid("setRowData",n,o);$(f).attr("editable","0").unbind("keydown");t.p.savedRow.splice(r,1);$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(t.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(t).jqGrid("delRowData",n);$(t).jqGrid("showAddEditButtons")},0)}$(t).triggerHandler("jqGridInlineAfterRestoreRow",[n]);$.isFunction(i.afterrestorefunc)&&i.afterrestorefunc.call(t,n)}})},addRow:function(n){return n=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},n||{}),this.each(function(){var t,i,r,u;this.grid&&(t=this,i=$.isFunction(n.beforeAddRow)?n.beforeAddRow.call(t,n.addRowParams):undefined,i===undefined&&(i=!0),i)&&(n.rowID=$.isFunction(n.rowID)?n.rowID.call(t,n):n.rowID!=null?n.rowID:$.jgrid.randId(),n.useDefValues===!0&&$(t.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var i=this.editoptions.defaultValue,r=$.isFunction(i)?i.call(t):i;n.initdata[this.name]=r}}),$(t).jqGrid("addRowData",n.rowID,n.initdata,n.position),n.rowID=t.p.idPrefix+n.rowID,$("#"+$.jgrid.jqID(n.rowID),"#"+$.jgrid.jqID(t.p.id)).addClass("jqgrid-new-row"),n.useFormatter?$("#"+$.jgrid.jqID(n.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(t.p.id)).click():(r=t.p.prmNames,u=r.oper,n.addRowParams.extraparam[u]=r.addoper,$(t).jqGrid("editRow",n.rowID,n.addRowParams),$(t).jqGrid("setSelection",n.rowID)))})},inlineNav:function(n,t){var i=$.jgrid.getRegional(this[0],"nav");return t=$.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},i,t||{}),this.each(function(){var r,u,o,e,s,f;if(this.grid&&!this.p.inlineNav){if(r=this,u=$.jgrid.jqID(r.p.id),r.p.navGrid||$(r).jqGrid("navGrid",n,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),$(r).data("inlineNav")||$(r).data("inlineNav",t),r.p.force_regional&&(t=$.extend(t,i)),r.p.inlineNav=!0,t.addParams.useFormatter===!0)for(o=r.p.colModel,e=0;e<o.length;e++)if(o[e].formatter&&o[e].formatter==="actions"){o[e].formatoptions&&(s={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},f=$.extend(s,o[e].formatoptions),t.addParams.addRowParams={keys:f.keys,oneditfunc:f.onEdit,successfunc:f.onSuccess,url:f.url,extraparam:f.extraparam,aftersavefunc:f.afterSave,errorfunc:f.onError,afterrestorefunc:f.afterRestore});break}t.add&&$(r).jqGrid("navButtonAdd",n,{caption:t.addtext,title:t.addtitle,buttonicon:t.addicon,id:r.p.id+"_iladd",onClickButton:function(){$(r).jqGrid("addRow",t.addParams);t.addParams.useFormatter||($("#"+u+"_ilsave").removeClass("ui-state-disabled"),$("#"+u+"_ilcancel").removeClass("ui-state-disabled"),$("#"+u+"_iladd").addClass("ui-state-disabled"),$("#"+u+"_iledit").addClass("ui-state-disabled"))}});t.edit&&$(r).jqGrid("navButtonAdd",n,{caption:t.edittext,title:t.edittitle,buttonicon:t.editicon,id:r.p.id+"_iledit",onClickButton:function(){var n=$(r).jqGrid("getGridParam","selrow");n?($(r).jqGrid("editRow",n,t.editParams),$("#"+u+"_ilsave").removeClass("ui-state-disabled"),$("#"+u+"_ilcancel").removeClass("ui-state-disabled"),$("#"+u+"_iladd").addClass("ui-state-disabled"),$("#"+u+"_iledit").addClass("ui-state-disabled")):($.jgrid.viewModal("#alertmod_"+u,{gbox:"#gbox_"+u,jqm:!0}),$("#jqg_alrt").focus())}});t.save&&($(r).jqGrid("navButtonAdd",n,{caption:t.savetext||"",title:t.savetitle||"Save row",buttonicon:t.saveicon,id:r.p.id+"_ilsave",onClickButton:function(){var n=r.p.savedRow[0].id;if(n){var i=r.p.prmNames,f=i.oper,e=t.editParams;$("#"+$.jgrid.jqID(n),"#"+u).hasClass("jqgrid-new-row")?(t.addParams.addRowParams.extraparam[f]=i.addoper,e=t.addParams.addRowParams):(t.editParams.extraparam||(t.editParams.extraparam={}),t.editParams.extraparam[f]=i.editoper);$(r).jqGrid("saveRow",n,e)&&$(r).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod_"+u,{gbox:"#gbox_"+u,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+u+"_ilsave").addClass("ui-state-disabled"));t.cancel&&($(r).jqGrid("navButtonAdd",n,{caption:t.canceltext||"",title:t.canceltitle||"Cancel row editing",buttonicon:t.cancelicon,id:r.p.id+"_ilcancel",onClickButton:function(){var n=r.p.savedRow[0].id,i=t.editParams;n?($("#"+$.jgrid.jqID(n),"#"+u).hasClass("jqgrid-new-row")&&(i=t.addParams.addRowParams),$(r).jqGrid("restoreRow",n,i),$(r).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+u+"_ilcancel").addClass("ui-state-disabled"));t.restoreAfterSelect===!0&&$(r).bind("jqGridBeforeSelectRow.inlineNav",function(n,i){r.p.savedRow.length>0&&r.p.inlineNav===!0&&i!==r.p.selrow&&r.p.selrow!==null&&(r.p.selrow===t.addParams.rowID?$(r).jqGrid("delRowData",r.p.selrow):$(r).jqGrid("restoreRow",r.p.selrow,t.editParams),$(r).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var n=$.jgrid.jqID(this.p.id);$("#"+n+"_ilsave").addClass("ui-state-disabled");$("#"+n+"_ilcancel").addClass("ui-state-disabled");$("#"+n+"_iladd").removeClass("ui-state-disabled");$("#"+n+"_iledit").removeClass("ui-state-disabled")}})}});$.jgrid.msie&&$.jgrid.msiever()===8&&($.expr[":"].hidden=function(n){return n.offsetWidth===0||n.offsetHeight===0||n.style.display==="none"});$.jgrid._multiselect=!1;$.ui&&$.ui.multiselect&&($.ui.multiselect.prototype._setSelected&&(v=$.ui.multiselect.prototype._setSelected,$.ui.multiselect.prototype._setSelected=function(n,t){var r=v.call(this,n,t),i;return t&&this.selectedList&&(i=this.element,this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(i)})),r}),$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();$.Widget===undefined?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0);$.jgrid.extend({sortableColumns:function(n){return this.each(function(){function e(){t.p.disableClick=!0}var t=this,r=$.jgrid.jqID(t.p.id),i={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function(n){return $(document.createElement(n[0].nodeName)).addClass(n[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10));t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(n,i){var f=$(i.item).parent(),e=$(">th",f),o=t.p.colModel,u={},s=t.p.id+"_",r;$.each(o,function(n){u[this.name]=n});r=[];e.each(function(){var n=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,"");u.hasOwnProperty(n)&&r.push(u[n])});$(t).jqGrid("remapColumns",r,!0,!0);$.isFunction(t.p.sortable.update)&&t.p.sortable.update(r);setTimeout(function(){t.p.disableClick=!1},50)}},o,u,f;t.p.sortable.options?$.extend(i,t.p.sortable.options):$.isFunction(t.p.sortable)&&(t.p.sortable={update:t.p.sortable});i.start?(o=i.start,i.start=function(n,t){e();o.call(this,n,t)}):i.start=e;t.p.sortable.exclude&&(i.items+=":not("+t.p.sortable.exclude+")");u=n.sortable(i);f=u.data("sortable")||u.data("uiSortable");f!=null&&(f.data("sortable").floating=!0)})},columnChooser:function(n){function w(n,t,i){var r,u;return t>=0?(r=n.slice(),u=r.splice(t,Math.max(n.length-t,t)),t>n.length&&(t=n.length),r[t]=i,r.concat(u)):n}function o(n,t){n&&(typeof n=="string"?$.fn[n]&&$.fn[n].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(n)&&n.apply(t,$.makeArray(arguments).slice(2)))}var t=this,u,i,s={},v=[],c,l,h,r,f,e=t.jqGrid("getGridParam","colModel"),y=t.jqGrid("getGridParam","colNames"),a=function(n){return $.ui.multiselect.prototype&&n.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||n.data("ui-multiselect")||n.data("multiselect")},p=$.jgrid.getRegional(this[0],"col");if(!$("#colchooser_"+$.jgrid.jqID(t[0].p.id)).length){if(u=$('<div id="colchooser_'+t[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"><\/select><\/div><\/div>'),i=$("select",u),n=$.extend({width:400,height:240,classname:null,done:function(n){n&&t.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(n){var t={};return t[n.bSubmit]=function(){n.apply_perm();n.cleanup(!1)},t[n.bCancel]=function(){n.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){n.cleanup(!0)},modal:n.modal||!1,resizable:n.resizable||!0,width:n.width+70,resize:function(){var n=a(i),t=n.container.closest(".ui-dialog-content");t.length>0&&typeof t[0].style=="object"?t[0].style.width="":t.css("width","");n.selectedList.height(Math.max(n.selectedContainer.height()-n.selectedActions.outerHeight()-1,1));n.availableList.height(Math.max(n.availableContainer.height()-n.availableActions.outerHeight()-1,1))}},n.dialog_opts||{})},apply_perm:function(){var r=[];$("option",i).each(function(){$(this).is("[selected]")?t.jqGrid("showCol",e[this.value].name):t.jqGrid("hideCol",e[this.value].name)});$("option[selected]",i).each(function(){r.push(parseInt(this.value,10))});$.each(r,function(){delete s[e[parseInt(this,10)].name]});$.each(s,function(){var n=parseInt(this,10);r=w(r,n,n)});n.done&&n.done.call(t,r);t.jqGrid("setGridWidth",t[0].p.tblwidth,t[0].p.shrinkToFit)},cleanup:function(r){o(n.dlog,u,"destroy");o(n.msel,i,"destroy");u.remove();r&&n.done&&n.done.call(t)},msel_opts:{}},p,n||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}n.msel_opts=$.extend($.ui.multiselect.defaults,n.msel_opts)}n.caption&&u.attr("title",n.caption);n.classname&&(u.addClass(n.classname),i.addClass(n.classname));n.width&&($(">div",u).css({width:n.width,margin:"0 auto"}),i.css("width",n.width));n.height&&($(">div",u).css("height",n.height),i.css("height",n.height-10));i.empty();$.each(e,function(n){if(s[this.name]=n,this.hidedlg){this.hidden||v.push(n);return}i.append("<option value='"+n+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(y[n])+"<\/option>")});c=$.isFunction(n.dlog_opts)?n.dlog_opts.call(t,n):n.dlog_opts;o(n.dlog,u,c);l=$.isFunction(n.msel_opts)?n.msel_opts.call(t,n):n.msel_opts;o(n.msel,i,l);h=$("#colchooser_"+$.jgrid.jqID(t[0].p.id));h.css({margin:"auto"});h.find(">div").css({width:"100%",height:"100%",margin:"auto"});r=a(i);r.container.css({width:"100%",height:"100%",margin:"auto"});r.selectedContainer.css({width:r.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});r.availableContainer.css({width:100-r.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});r.selectedList.css("height","auto");r.availableList.css("height","auto");f=Math.max(r.selectedList.height(),r.availableList.height());f=Math.min(f,$(window).height());r.selectedList.css("height",f);r.availableList.css("height",f)}},sortableRows:function(n){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(n=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},n||{}),n.start&&$.isFunction(n.start)?(n._start_=n.start,delete n.start):n._start_=!1,n.update&&$.isFunction(n.update)?(n._update_=n.update,delete n.update):n._update_=!1,n.start=function(i,r){if($(r.item).css("border-width","0"),$("td",r.item).each(function(n){this.style.width=t.grid.cols[n].style.width}),t.p.subGrid){var u=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",u)}catch(f){}}n._start_&&n._start_.apply(this,[i,r])},n.update=function(i,r){$(r.item).css("border-width","");t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(n){$(this).html(n+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))});n._update_&&n._update_.apply(this,[i,r])},$("tbody:first",t).sortable(n),$("tbody:first > .jqgrow",t).disableSelection()))})},gridDnD:function(n){return this.each(function(){function u(){var n=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(n.drag)?n.drag.call($(t),n):n.drag)}var t=this,i,r,f;if(t.grid&&!t.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(f="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'><\/table>",$("#jqgrid_dnd")[0]===undefined&&$("body").append(f),typeof n=="string"&&n==="updateDnD"&&t.p.jqgdnd===!0){u();return}if(n=$.extend({drag:function(n){return $.extend({start:function(i,r){var u,f;if(t.p.subGrid){f=$(r.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",f)}catch(e){}}for(u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("getGridParam","reccount")===0&&$($.data(t,"dnd").connectWith[u]).jqGrid("addRowData","jqg_empty_row",{});r.helper.addClass("ui-state-highlight");$("td",r.helper).each(function(n){this.style.width=t.grid.headers[n].width+"px"});n.onstart&&$.isFunction(n.onstart)&&n.onstart.call($(t),i,r)},stop:function(i,r){var u,f;for(r.helper.dropped&&!n.dragcopy&&(f=$(r.helper).attr("id"),f===undefined&&(f=$(this).attr("id")),$(t).jqGrid("delRowData",f)),u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("delRowData","jqg_empty_row");n.onstop&&$.isFunction(n.onstop)&&n.onstop.call($(t),i,r)}},n.drag_opts||{})},drop:function(n){return $.extend({accept:function(n){var t,i;return $(n).hasClass("jqgrow")?(t=$(n).closest("table.ui-jqgrid-btable"),t.length>0&&$.data(t[0],"dnd")!==undefined)?(i=$.data(t[0],"dnd").connectWith,$.inArray("#"+$.jgrid.jqID(this.id),i)!==-1?!0:!1):!1:n},drop:function(i,r){var c,u,e,o;if($(r.draggable).hasClass("jqgrow")){if(c=$(r.draggable).attr("id"),u=r.draggable.parent().parent().jqGrid("getRowData",c),!n.dropbyname){var h=0,l={},f,s,a=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(s in u)u.hasOwnProperty(s)&&(f=a[h].name,f==="cb"||f==="rn"||f==="subgrid"||u.hasOwnProperty(s)&&a[h]&&(l[f]=u[s]),h++);u=l}catch(v){}}r.helper.dropped=!0;n.beforedrop&&$.isFunction(n.beforedrop)&&(e=n.beforedrop.call(this,i,r,u,$("#"+$.jgrid.jqID(t.p.id)),$(this)),e!==undefined&&e!==null&&typeof e=="object"&&(u=e));r.helper.dropped&&(n.autoid&&($.isFunction(n.autoid)?o=n.autoid.call(this,u):(o=Math.ceil(Math.random()*1e3),o=n.autoidprefix+o)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",o,u,n.droppos));n.ondrop&&$.isFunction(n.ondrop)&&n.ondrop.call(this,i,r,u)}}},n.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},n||{}),n.connectWith)for(n.connectWith=n.connectWith.split(","),n.connectWith=$.map(n.connectWith,function(n){return $.trim(n)}),$.data(t,"dnd",n),t.p.reccount===0||t.p.jqgdnd||u(),t.p.jqgdnd=!0,i=0;i<n.connectWith.length;i++)r=n.connectWith[i],$(r).droppable($.isFunction(n.drop)?n.drop.call($(t),n):n.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),optstest;$t.grid&&$.fn.resizable&&(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(n,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit);opts._stop_&&opts._stop_.call($t,n,t)},opts._alsoResize_?(optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}",opts.alsoResize=eval("("+optstest+")")):opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID),delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts))})}});$.assocArraySize=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t};$.jgrid.extend({pivotSetup:function(n,t){var r=[],f=[],s=[],o=[],h=[],e={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},u=[],i=$.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},t||{});return this.each(function(){function wt(n,t,i){var r;return r=k.call(n,t,i),r.length>0?r[0]:null}function bt(n,t){var i=0,r=!0;for(var u in n){if(n.hasOwnProperty(u)&&n[u]!=this[i]){r=!1;break}if(i++,i>=this.length)break}return r&&(rt=t),r}function kt(n,t,i,r){var u;switch(n){case"sum":u=parseFloat(t||0)+parseFloat(r[i]||0);break;case"count":(t===""||t==null)&&(t=0);u=r.hasOwnProperty(i)?t+1:0;break;case"min":u=t===""||t==null?parseFloat(r[i]||0):Math.min(parseFloat(t),parseFloat(r[i]||0));break;case"max":u=t===""||t==null?parseFloat(r[i]||0):Math.max(parseFloat(t),parseFloat(r[i]||0))}return u}function ut(n,t,i,r){var y=t.length,f,u,s,a,c="",l=[],v,e;for($.isArray(i)?(a=i.length,l=i):(a=1,l[0]=i),o=[],h=[],o.root=0,s=0;s<a;s++){for(v=[],f=0;f<y;f++){if(i==null)u=$.trim(t[f].member)+"_"+t[f].aggregator,e=u,l[0]=e;else{e=i[s].replace(/\s+/g,"");try{u=y===1?c+e:c+e+"_"+t[f].aggregator+"_"+String(f)}catch(p){}}u=isNaN(parseInt(u,10))?u:u+" ";r[u]=v[u]=kt(t[f].aggregator,r[u],t[f].member,n);s<=1&&e!=="_r_Totals"&&c===""&&(c=e)}o[u]=v;h[u]=l[s]}return r}function yt(n){var e,o,t,h,f,s,c,v,a;for(t in n)if(n.hasOwnProperty(t)){if(typeof n[t]!="object"&&(t==="level"&&(st[n.level]===undefined&&(st[n.level]="",n.level>0&&n.text!=="_r_Totals"&&(u[n.level-1]={useColSpanStyle:!1,groupHeaders:[]})),st[n.level]!==n.text&&n.children.length&&n.text!=="_r_Totals"&&n.level>0&&(u[n.level-1].groupHeaders.push({titleText:n.label,numberOfColumns:0}),s=u[n.level-1].groupHeaders.length-1,c=s===0?dt:at+it,n.level-1==(i.rowTotals?1:0)&&s>0&&(v=u[n.level-1].groupHeaders[s-1].numberOfColumns,v&&(c=v+1+i.aggregates.length)),u[n.level-1].groupHeaders[s].startColumnName=r[c].name,u[n.level-1].groupHeaders[s].numberOfColumns=r.length-c,at=r.length),st[n.level]=n.text),n.level===l&&t==="level"&&l>0))if(it>1){a=1;for(e in n.fields)n.fields.hasOwnProperty(e)&&a===1&&u[l-1].groupHeaders.push({startColumnName:e,numberOfColumns:1,titleText:n.text}),a++;u[l-1].groupHeaders[u[l-1].groupHeaders.length-1].numberOfColumns=a-1}else u.splice(l-1,1);if(n[t]!=null&&typeof n[t]=="object"&&yt(n[t]),t==="level"&&n.level>0){o=0;for(e in n.fields)if(n.fields.hasOwnProperty(e)){f={};for(h in i.aggregates[o])if(i.aggregates[o].hasOwnProperty(h))switch(h){case"member":case"label":case"aggregator":break;default:f[h]=i.aggregates[o][h]}it>1?(f.name=e,f.label=i.aggregates[o].label||n.label):(f.name=n.text,f.label=n.text==="_r_Totals"?i.rowTotalsText:n.label);r.push(f);o++}}}}var y,rt,t,pt=n.length,d,l,it,p,w,ct=0,vt,ft,et,g,nt,a,c,tt,ht;if(i.rowTotals&&i.yDimension.length>0&&(vt=i.yDimension[0].dataName,i.yDimension.splice(0,0,{dataName:vt}),i.yDimension[0].converter=function(){return"_r_Totals"}),d=$.isArray(i.xDimension)?i.xDimension.length:0,l=i.yDimension.length,it=$.isArray(i.aggregates)?i.aggregates.length:0,d===0||it===0)throw"xDimension or aggregates optiona are not set!";for(t=0;t<d;t++)ft={name:i.xDimension[t].dataName,frozen:i.frozenStaticCols},i.xDimension[t].isGroupField==null&&(i.xDimension[t].isGroupField=!0),ft=$.extend(!0,ft,i.xDimension[t]),r.push(ft);for(et=d-1,g={};ct<pt;){y=n[ct];nt=[];a=[];p={};t=0;do nt[t]=$.trim(y[i.xDimension[t].dataName]),p[i.xDimension[t].dataName]=nt[t],t++;while(t<d);if(c=0,rt=-1,w=wt(f,bt,nt),w){if(rt>=0){if(c=0,l>=1){for(c=0;c<l;c++)a[c]=$.trim(y[i.yDimension[c].dataName]),i.yDimension[c].converter&&$.isFunction(i.yDimension[c].converter)&&(a[c]=i.yDimension[c].converter.call(this,a[c],nt,a));w=ut(y,i.aggregates,a,w)}else l===0&&(w=ut(y,i.aggregates,null,w));f[rt]=w}}else{if(c=0,l>=1){for(c=0;c<l;c++)a[c]=$.trim(y[i.yDimension[c].dataName]),i.yDimension[c].converter&&$.isFunction(i.yDimension[c].converter)&&(a[c]=i.yDimension[c].converter.call(this,a[c],nt,a));p=ut(y,i.aggregates,a,p)}else l===0&&(p=ut(y,i.aggregates,null,p));f.push(p)}var lt=0,v=null,ot=null;for(var b in o)if(o.hasOwnProperty(b)){if(lt===0)g.children&&g.children!==undefined||(g={text:b,level:0,children:[],label:b}),v=g.children;else{for(ot=null,t=0;t<v.length;t++)if(v[t].text===b){ot=v[t];break}ot?v=ot.children:(v.push({children:[],text:b,level:lt,fields:o[b],label:h[b]}),v=v[v.length-1].children)}lt++}ct++}var st=[],at=r.length,dt=at;if(l>0&&(u[l-1]={useColSpanStyle:!1,groupHeaders:[]}),yt(g),i.colTotals)for(ht=f.length;ht--;)for(t=d;t<r.length;t++)tt=r[t].name,s[tt]?s[tt]+=parseFloat(f[ht][tt]||0):s[tt]=parseFloat(f[ht][tt]||0);if(et>0)for(t=0;t<et;t++)r[t].isGroupField&&(e.groupingView.groupField.push(r[t].name),e.groupingView.groupSummary.push(i.groupSummary),e.groupingView.groupSummaryPos.push(i.groupSummaryPos));else e.grouping=!1;e.sortname=r[et].name;e.groupingView.hideFirstGroupCol=!0}),{colModel:r,rows:f,groupOptions:e,groupHeaders:u,summary:s}},jqPivot:function(n,t,i,r){return this.each(function(){function f(n){for(var f=jQuery(u).jqGrid("pivotSetup",n,t),o=$.assocArraySize(f.summary)>0?!0:!1,s=$.jgrid.from.call(u,f.rows),e,r=0;r<f.groupOptions.groupingView.groupField.length;r++)s.orderBy(f.groupOptions.groupingView.groupField[r],"a","text","");if(jQuery(u).jqGrid($.extend(!0,{datastr:$.extend(s.select(),o?{userdata:f.summary}:{}),datatype:"jsonstring",footerrow:o,userDataOnFooter:o,colModel:f.colModel,viewrecords:!0,sortname:t.xDimension[0].dataName},f.groupOptions,i||{})),e=f.groupHeaders,e.length)for(r=0;r<e.length;r++)e[r]&&e[r].groupHeaders.length&&jQuery(u).jqGrid("setGroupHeaders",e[r]);t.frozenStaticCols&&jQuery(u).jqGrid("setFrozenColumns")}var u=this;typeof n=="string"?$.ajax($.extend({url:n,dataType:"json",success:function(n){f($.jgrid.getAccessor(n,r&&r.reader?r.reader:"rows"))}},r||{})):f(n)})}});$.jgrid.extend({setSubGrid:function(){return this.each(function(){var n=this,t,i;if(n.p.subGridOptions=$.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},n.p.subGridOptions||{}),n.p.colNames.unshift(""),n.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?n.p.subGridWidth+n.p.cellLayout:n.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),t=n.p.subGridModel,t[0])for(t[0].align=$.extend([],t[0].align||[]),i=0;i<t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"})},addSubGridCell:function(n,t){var i="",r,u;return this.each(function(){i=this.formatCol(n,t);u=this.p.id;r=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+u+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+i+"><a style='cursor:pointer;'><span class='ui-icon "+r+"'><\/span><\/a><\/td>"},addSubGrid:function(n,t){return this.each(function(){var i=this,h,e;if(i.grid){var s=function(n,t,r){var u=$("<td align='"+i.p.subGridModel[0].align[r]+"'><\/td>").html(t);$(n).append(u)},c=function(n,t){for(var e,f,o=$("<table cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),u=$("<tr><\/tr>"),h,r=0;r<i.p.subGridModel[0].name.length;r++)e=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+i.p.direction+"'><\/th>"),$(e).html(i.p.subGridModel[0].name[r]),$(e).width(i.p.subGridModel[0].width[r]),$(u).append(e);return $(o).append(u),n&&(f=i.p.xmlReader.subgrid,$(f.root+" "+f.row,n).each(function(){if(u=$("<tr class='ui-widget-content ui-subtblcell'><\/tr>"),f.repeatitems===!0)$(f.cell,this).each(function(n){s(u,$(this).text()||"&#160;",n)});else{var n=i.p.subGridModel[0].mapping||i.p.subGridModel[0].name;if(n)for(r=0;r<n.length;r++)s(u,$(n[r],this).text()||"&#160;",r)}$(o).append(u)})),h=$("table:first",i.grid.bDiv).attr("id")+"_",$("#"+$.jgrid.jqID(h+t)).append(o),i.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(i.p.id)).hide(),!1},l=function(n,t){for(var h,c,f,o,r,a=$("<table cellspacing='0' cellpadding='0' border='0'><tbody><\/tbody><\/table>"),e=$("<tr><\/tr>"),l,v,u=0;u<i.p.subGridModel[0].name.length;u++)h=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+i.p.direction+"'><\/th>"),$(h).html(i.p.subGridModel[0].name[u]),$(h).width(i.p.subGridModel[0].width[u]),$(e).append(h);if($(a).append(e),n&&(o=i.p.jsonReader.subgrid,c=$.jgrid.getAccessor(n,o.root),c!==undefined))for(u=0;u<c.length;u++){if(f=c[u],e=$("<tr class='ui-widget-content ui-subtblcell'><\/tr>"),o.repeatitems===!0)for(o.cell&&(f=f[o.cell]),r=0;r<f.length;r++)s(e,f[r]||"&#160;",r);else if(l=i.p.subGridModel[0].mapping||i.p.subGridModel[0].name,l.length)for(r=0;r<l.length;r++)s(e,f[l[r]]||"&#160;",r);$(a).append(e)}return v=$("table:first",i.grid.bDiv).attr("id")+"_",$("#"+$.jgrid.jqID(v+t)).append(a),i.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(i.p.id)).hide(),!1},y=function(n){var u,t,r,f;if(u=$(n).attr("id"),t={nd_:(new Date).getTime()},t[i.p.prmNames.subgridid]=u,!i.p.subGridModel[0])return!1;if(i.p.subGridModel[0].params)for(f=0;f<i.p.subGridModel[0].params.length;f++)for(r=0;r<i.p.colModel.length;r++)i.p.colModel[r].name===i.p.subGridModel[0].params[f]&&(t[i.p.colModel[r].name]=$("td:eq("+r+")",n).text().replace(/\&#160\;/ig,""));if(!i.grid.hDiv.loading){i.grid.hDiv.loading=!0;$("#load_"+$.jgrid.jqID(i.p.id)).show();i.p.subgridtype||(i.p.subgridtype=i.p.datatype);$.isFunction(i.p.subgridtype)?i.p.subgridtype.call(i,t):i.p.subgridtype=i.p.subgridtype.toLowerCase();switch(i.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:i.p.mtype,url:$.isFunction(i.p.subGridUrl)?i.p.subGridUrl.call(i,t):i.p.subGridUrl,dataType:i.p.subgridtype,data:$.isFunction(i.p.serializeSubGridData)?i.p.serializeSubGridData.call(i,t):t,complete:function(n){i.p.subgridtype==="xml"?c(n.responseXML,u):l($.jgrid.parse(n.responseText),u);n=null}},$.jgrid.ajaxOptions,i.p.ajaxSubgridOptions||{}))}}return!1},r,f,a,v=0,u,o;for($.each(i.p.colModel,function(){(this.hidden===!0||this.name==="rn"||this.name==="cb")&&v++}),h=i.rows.length,e=1,t!==undefined&&t>0&&(e=t,h=t+1);e<h;)$(i.rows[e]).hasClass("jqgrow")&&(i.p.scroll&&$(i.rows[e].cells[n]).unbind("click"),$(i.rows[e].cells[n]).bind("click",function(){var t=$(this).parent("tr")[0];if(f=i.p.id,r=t.id,o=$("#"+f+"_"+r+"_expandedContent"),$(this).hasClass("sgcollapsed")){if(u=$(i).triggerHandler("jqGridSubGridBeforeExpand",[f+"_"+r,r]),u=u===!1||u==="stop"?!1:!0,u&&$.isFunction(i.p.subGridBeforeExpand)&&(u=i.p.subGridBeforeExpand.call(i,f+"_"+r,r)),u===!1)return!1;i.p.subGridOptions.reloadOnExpand!==!0&&(i.p.subGridOptions.reloadOnExpand!==!1||o.hasClass("ui-subgrid"))?o.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"):(a=n>=1?"<td colspan='"+n+"'>&#160;<\/td>":"",$(t).after("<tr role='row' id='"+f+"_"+r+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+a+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+i.p.subGridOptions.openicon+"'><\/span><\/td><td colspan='"+parseInt(i.p.colNames.length-1-v,10)+"' class='ui-widget-content subgrid-data'><div id="+f+"_"+r+" class='tablediv'><\/div><\/td><\/tr>"),$(i).triggerHandler("jqGridSubGridRowExpanded",[f+"_"+r,r]),$.isFunction(i.p.subGridRowExpanded)?i.p.subGridRowExpanded.call(i,f+"_"+r,r):y(t));$(this).html("<a style='cursor:pointer;'><span class='ui-icon "+i.p.subGridOptions.minusicon+"'><\/span><\/a>").removeClass("sgcollapsed").addClass("sgexpanded");i.p.subGridOptions.selectOnExpand&&$(i).jqGrid("setSelection",r)}else if($(this).hasClass("sgexpanded")){if(u=$(i).triggerHandler("jqGridSubGridRowColapsed",[f+"_"+r,r]),u=u===!1||u==="stop"?!1:!0,u&&$.isFunction(i.p.subGridRowColapsed)&&(u=i.p.subGridRowColapsed.call(i,f+"_"+r,r)),u===!1)return!1;i.p.subGridOptions.reloadOnExpand===!0?o.remove(".ui-subgrid"):o.hasClass("ui-subgrid")&&o.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded");$(this).html("<a style='cursor:pointer;'><span class='ui-icon "+i.p.subGridOptions.plusicon+"'><\/span><\/a>").removeClass("sgexpanded").addClass("sgcollapsed");i.p.subGridOptions.selectOnCollapse&&$(i).jqGrid("setSelection",r)}return!1})),e++;i.p.subGridOptions.expandOnLoad===!0&&$(i.rows).filter(".jqgrow").each(function(n,t){$(t.cells[0]).click()});i.subGridXml=function(n,t){c(n,t)};i.subGridJson=function(n,t){l(n,t)}}})},expandSubGridRow:function(n){return this.each(function(){var r=this,t,i;(r.grid||n)&&r.p.subGrid===!0&&(t=$(this).jqGrid("getInd",n,!0),t&&(i=$("td.sgcollapsed",t)[0],i&&$(i).trigger("click")))})},collapseSubGridRow:function(n){return this.each(function(){var r=this,t,i;(r.grid||n)&&r.p.subGrid===!0&&(t=$(this).jqGrid("getInd",n,!0),t&&(i=$("td.sgexpanded",t)[0],i&&$(i).trigger("click")))})},toggleSubGridRow:function(n){return this.each(function(){var r=this,i,t;(r.grid||n)&&r.p.subGrid===!0&&(i=$(this).jqGrid("getInd",n,!0),i&&(t=$("td.sgcollapsed",i)[0],t?$(t).trigger("click"):(t=$("td.sgexpanded",i)[0],t&&$(t).trigger("click"))))})}});$.jgrid.extend({setTreeNode:function(n,t){return this.each(function(){var i=this,w,b,k;if(i.grid&&i.p.treeGrid)for(var h=i.p.expColInd,f=i.p.treeReader.expanded_field,u=i.p.treeReader.leaf_field,d=i.p.treeReader.level_field,c=i.p.treeReader.icon_field,e=i.p.treeReader.loaded,y,p,o,l,a,s,r,v;n<t;)w=$.jgrid.stripPref(i.p.idPrefix,i.rows[n].id),b=i.p._index[w],r=i.p.data[b],i.p.treeGridModel==="nested"&&(r[u]||(y=parseInt(r[i.p.treeReader.left_field],10),p=parseInt(r[i.p.treeReader.right_field],10),r[u]=p===y+1?"true":"false",i.rows[n].cells[i.p._treeleafpos].innerHTML=r[u])),o=parseInt(r[d],10),i.p.tree_root_level===0?(l=o+1,a=o):(l=o,a=o-1),s="<div class='tree-wrap tree-wrap-"+i.p.direction+"' style='width:"+l*18+"px;'>",s+="<div style='"+(i.p.direction==="rtl"?"right:":"left:")+a*18+"px;' class='ui-icon ",r[e]!==undefined&&(r[e]=r[e]==="true"||r[e]===!0?!0:!1),r[u]==="true"||r[u]===!0?(s+=(r[c]!==undefined&&r[c]!==""?r[c]:i.p.treeIcons.leaf)+" tree-leaf treeclick",r[u]=!0,v="leaf"):(r[u]=!1,v=""),r[f]=(r[f]==="true"||r[f]===!0?!0:!1)&&(r[e]||r[e]===undefined),s+=r[f]===!1?r[u]===!0?"'":i.p.treeIcons.plus+" tree-plus treeclick'":r[u]===!0?"'":i.p.treeIcons.minus+" tree-minus treeclick'",s+="><\/div><\/div>",$(i.rows[n].cells[h]).wrapInner("<span class='cell-wrapper"+v+"'><\/span>").prepend(s),o!==parseInt(i.p.tree_root_level,10)&&(k=$(i).jqGrid("isVisibleNode",r),k||$(i.rows[n]).css("display","none")),$(i.rows[n].cells[h]).find("div.treeclick").bind("click",function(n){var r=n.target||n.srcElement,e=$.jgrid.stripPref(i.p.idPrefix,$(r,i.rows).closest("tr.jqgrow")[0].id),t=i.p._index[e];return i.p.data[t][u]||(i.p.data[t][f]?($(i).jqGrid("collapseRow",i.p.data[t]),$(i).jqGrid("collapseNode",i.p.data[t])):($(i).jqGrid("expandRow",i.p.data[t]),$(i).jqGrid("expandNode",i.p.data[t]))),!1}),i.p.ExpandColClick===!0&&$(i.rows[n].cells[h]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(n){var e=n.target||n.srcElement,r=$.jgrid.stripPref(i.p.idPrefix,$(e,i.rows).closest("tr.jqgrow")[0].id),t=i.p._index[r];return i.p.data[t][u]||(i.p.data[t][f]?($(i).jqGrid("collapseRow",i.p.data[t]),$(i).jqGrid("collapseNode",i.p.data[t])):($(i).jqGrid("expandRow",i.p.data[t]),$(i).jqGrid("expandNode",i.p.data[t]))),$(i).jqGrid("setSelection",r),!1}),n++})},setTreeGrid:function(){return this.each(function(){var n=this,t=0,f,e=!1,i,r,u,o=[];if(n.p.treeGrid){n.p.treedatatype||$.extend(n.p,{treedatatype:n.p.datatype});n.p.loadonce&&(n.p.treedatatype="local");n.p.subGrid=!1;n.p.altRows=!1;n.p.pgbuttons=!1;n.p.pginput=!1;n.p.gridview=!0;n.p.rowTotal===null&&(n.p.rowNum=1e4);n.p.multiselect=!1;n.p.rowList=[];n.p.expColInd=0;f="ui-icon-triangle-1-"+(n.p.direction==="rtl"?"w":"e");n.p.treeIcons=$.extend({plus:f,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},n.p.treeIcons||{});n.p.treeGridModel==="nested"?n.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.p.treeReader):n.p.treeGridModel==="adjacency"&&(n.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.p.treeReader));for(r in n.p.colModel)if(n.p.colModel.hasOwnProperty(r)){i=n.p.colModel[r].name;i!==n.p.ExpandColumn||e||(e=!0,n.p.expColInd=t);t++;for(u in n.p.treeReader)n.p.treeReader.hasOwnProperty(u)&&n.p.treeReader[u]===i&&o.push(i)}$.each(n.p.treeReader,function(i,r){r&&$.inArray(r,o)===-1&&(i==="leaf_field"&&(n.p._treeleafpos=t),t++,n.p.colNames.push(r),n.p.colModel.push({name:r,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(n){this.each(function(){var t=this,i,r;t.grid&&t.p.treeGrid&&(i=$(t).jqGrid("getNodeChildren",n),r=t.p.treeReader.expanded_field,$(i).each(function(){var n=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",n)).css("display","");this[r]&&$(t).jqGrid("expandRow",this)}))})},collapseRow:function(n){this.each(function(){var t=this,i,r;t.grid&&t.p.treeGrid&&(i=$(t).jqGrid("getNodeChildren",n),r=t.p.treeReader.expanded_field,$(i).each(function(){var n=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",n)).css("display","none");this[r]&&$(t).jqGrid("collapseRow",this)}))})},getRootNodes:function(n){var t=[];return this.each(function(){var i=this,f,r,u;if(i.grid&&i.p.treeGrid){typeof n!="boolean"&&(n=!1);u=n?$(i).jqGrid("getRowData",null,!0):i.p.data;switch(i.p.treeGridModel){case"nested":f=i.p.treeReader.level_field;$(u).each(function(){parseInt(this[f],10)===parseInt(i.p.tree_root_level,10)&&(n?t.push(i.p.data[i.p._index[this[i.p.keyName]]]):t.push(this))});break;case"adjacency":r=i.p.treeReader.parent_id_field;$(u).each(function(){(this[r]===null||String(this[r]).toLowerCase()==="null")&&(n?t.push(i.p.data[i.p._index[this[i.p.keyName]]]):t.push(this))})}}}),t},getNodeDepth:function(n){var t=null;return this.each(function(){var i,r;if(this.grid&&this.p.treeGrid){i=this;switch(i.p.treeGridModel){case"nested":r=i.p.treeReader.level_field;t=parseInt(n[r],10)-parseInt(i.p.tree_root_level,10);break;case"adjacency":t=$(i).jqGrid("getNodeAncestors",n).length}}}),t},getNodeParent:function(n){var t=null;return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var u=i.p.treeReader.left_field,f=i.p.treeReader.right_field,e=i.p.treeReader.level_field,s=parseInt(n[u],10),h=parseInt(n[f],10),c=parseInt(n[e],10);$(this.p.data).each(function(){if(parseInt(this[e],10)===c-1&&parseInt(this[u],10)<s&&parseInt(this[f],10)>h)return t=this,!1});break;case"adjacency":for(var l=i.p.treeReader.parent_id_field,o=i.p.localReader.id,a=n[o],r=i.p._index[a];r--;)if(i.p.data[r][o]===$.jgrid.stripPref(i.p.idPrefix,n[l])){t=i.p.data[r];break}}}),t},getNodeChildren:function(n){var t=[];return this.each(function(){var i=this,e,o;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var r=i.p.treeReader.left_field,u=i.p.treeReader.right_field,f=i.p.treeReader.level_field,s=parseInt(n[r],10),h=parseInt(n[u],10),c=parseInt(n[f],10);$(this.p.data).each(function(){parseInt(this[f],10)===c+1&&parseInt(this[r],10)>s&&parseInt(this[u],10)<h&&t.push(this)});break;case"adjacency":e=i.p.treeReader.parent_id_field;o=i.p.localReader.id;$(this.p.data).each(function(){this[e]==$.jgrid.stripPref(i.p.idPrefix,n[o])&&t.push(this)})}}),t},getFullTreeNode:function(n,t){var i=[];return this.each(function(){var r=this,f,e=r.p.treeReader.expanded_field,s,h;if(r.grid&&r.p.treeGrid){(t==null||typeof t!="boolean")&&(t=!1);switch(r.p.treeGridModel){case"nested":var u=r.p.treeReader.left_field,c=r.p.treeReader.right_field,o=r.p.treeReader.level_field,l=parseInt(n[u],10),a=parseInt(n[c],10),v=parseInt(n[o],10);$(this.p.data).each(function(){parseInt(this[o],10)>=v&&parseInt(this[u],10)>=l&&parseInt(this[u],10)<=a&&(t&&(this[e]=!0),i.push(this))});break;case"adjacency":n&&(i.push(n),s=r.p.treeReader.parent_id_field,h=r.p.localReader.id,$(this.p.data).each(function(n){for(f=i.length,n=0;n<f;n++)if($.jgrid.stripPref(r.p.idPrefix,i[n][h])===this[s]){t&&(this[e]=!0);i.push(this);break}}))}}}),i},getNodeAncestors:function(n){var t=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var i=$(this).jqGrid("getNodeParent",n);i;)t.push(i),i=$(this).jqGrid("getNodeParent",i)}),t},isVisibleNode:function(n){var t=!0;return this.each(function(){var i=this,r,u;i.grid&&i.p.treeGrid&&(r=$(i).jqGrid("getNodeAncestors",n),u=i.p.treeReader.expanded_field,$(r).each(function(){return t=t&&this[u],t?void 0:!1}))}),t},isNodeLoaded:function(n){var t;return this.each(function(){var i=this,u,r;i.grid&&i.p.treeGrid&&(u=i.p.treeReader.leaf_field,r=i.p.treeReader.loaded,t=n!==undefined?n[r]!==undefined?n[r]:n[u]||$(i).jqGrid("getNodeChildren",n).length>0?!0:!1:!1)}),t},expandNode:function(n){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field,f=this.p.treeReader.parent_id_field,e=this.p.treeReader.loaded,u=this.p.treeReader.level_field,o=this.p.treeReader.left_field,s=this.p.treeReader.right_field;if(!n[i]){var t=$.jgrid.getAccessor(n,this.p.localReader.id),r=$("#"+this.p.idPrefix+$.jgrid.jqID(t),this.grid.bDiv)[0],h=this.p._index[t];$(this).jqGrid("isNodeLoaded",this.p.data[h])?(n[i]=!0,$("div.treeclick",r).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(n[i]=!0,$("div.treeclick",r).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=r.rowIndex,this.p.datatype=this.p.treedatatype,this.p.treeGridModel==="nested"?$(this).jqGrid("setGridParam",{postData:{nodeid:t,n_left:n[o],n_right:n[s],n_level:n[u]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:t,parentid:n[f],n_level:n[u]}}),$(this).trigger("reloadGrid"),n[e]=!0,this.p.treeGridModel==="nested"?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(n){return this.each(function(){var t,i,r;this.grid&&this.p.treeGrid&&(t=this.p.treeReader.expanded_field,n[t]&&(n[t]=!1,i=$.jgrid.getAccessor(n,this.p.localReader.id),r=$("#"+this.p.idPrefix+$.jgrid.jqID(i),this.grid.bDiv)[0],$("div.treeclick",r).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")))})},SortTree:function(n,t,i,r){return this.each(function(){if(this.grid&&this.p.treeGrid){var u,c,h,f=[],e=this,o,s,l=$(this).jqGrid("getRootNodes",e.p.search);for(o=$.jgrid.from.call(this,l),o.orderBy(n,t,i,r),s=o.select(),u=0,c=s.length;u<c;u++)h=s[u],f.push(h),$(this).jqGrid("collectChildrenSortTree",f,h,n,t,i,r);$.each(f,function(n){var t=$.jgrid.getAccessor(this,e.p.localReader.id);$("#"+$.jgrid.jqID(e.p.id)+" tbody tr:eq("+n+")").after($("tr#"+$.jgrid.jqID(t),e.grid.bDiv))});o=null;s=null;f=null}})},searchTree:function(n){var i,f=n.length||0,t=[],e,o=[],r=[],u;return this.each(function(){if(this.grid&&this.p.treeGrid&&f)for(e=this.p.localReader.id,i=0;i<f;i++){if(t=$(this).jqGrid("getNodeAncestors",n[i]),t.length||t.push(n[i]),u=t[t.length-1][e],$.inArray(u,o)!==-1)continue;else o.push(u);t=$(this).jqGrid("getFullTreeNode",t[t.length-1],!0);r=r.concat(t)}}),r},collectChildrenSortTree:function(n,t,i,r,u,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,c,o,l,s,h;for(l=$(this).jqGrid("getNodeChildren",t),s=$.jgrid.from.call(this,l),s.orderBy(i,r,u,f),h=s.select(),e=0,c=h.length;e<c;e++)o=h[e],n.push(o),$(this).jqGrid("collectChildrenSortTree",n,o,i,r,u,f)}})},setTreeRow:function(n,t){var i=!1;return this.each(function(){var r=this;r.grid&&r.p.treeGrid&&(i=$(r).jqGrid("setRowData",n,t))}),i},delTreeNode:function(n){return this.each(function(){var t=this,l=t.p.localReader.id,f,e=t.p.treeReader.left_field,o=t.p.treeReader.right_field,s,c,i,r,u,h;if(t.grid&&t.p.treeGrid&&(u=t.p._index[n],u!==undefined)){if(s=parseInt(t.p.data[u][o],10),c=s-parseInt(t.p.data[u][e],10)+1,h=$(t).jqGrid("getFullTreeNode",t.p.data[u]),h.length>0)for(f=0;f<h.length;f++)$(t).jqGrid("delRowData",h[f][l]);if(t.p.treeGridModel==="nested"){if(i=$.jgrid.from.call(t,t.p.data).greater(e,s,{stype:"integer"}).select(),i.length)for(r in i)i.hasOwnProperty(r)&&(i[r][e]=parseInt(i[r][e],10)-c);if(i=$.jgrid.from.call(t,t.p.data).greater(o,s,{stype:"integer"}).select(),i.length)for(r in i)i.hasOwnProperty(r)&&(i[r][o]=parseInt(i[r][o],10)-c)}}})},addChildNode:function(n,t,i,r){var u=this[0],it,p,w,f,e;if(i){var a=u.p.treeReader.expanded_field,v=u.p.treeReader.leaf_field,rt=u.p.treeReader.level_field,ft=u.p.treeReader.parent_id_field,l=u.p.treeReader.left_field,o=u.p.treeReader.right_field,b=u.p.treeReader.loaded,k,d,h,g,s,ut,nt=0,y=t,tt,c;if(r===undefined&&(r=!1),n==null){if(s=u.p.data.length-1,s>=0)while(s>=0)nt=Math.max(nt,parseInt(u.p.data[s][u.p.localReader.id],10)),s--;n=nt+1}if(it=$(u).jqGrid("getInd",t),tt=!1,t===undefined||t===null||t===""?(t=null,y=null,k="last",g=u.p.tree_root_level,s=u.p.data.length+1):(k="after",d=u.p._index[t],h=u.p.data[d],t=h[u.p.localReader.id],g=parseInt(h[rt],10)+1,p=$(u).jqGrid("getFullTreeNode",h),p.length?(s=p[p.length-1][u.p.localReader.id],y=s,s=$(u).jqGrid("getInd",y)+1):s=$(u).jqGrid("getInd",t)+1,h[v]&&(tt=!0,h[a]=!0,$(u.rows[it]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(u.p.treeIcons.leaf+" tree-leaf").addClass(u.p.treeIcons.minus+" tree-minus"),u.p.data[d][v]=!1,h[b]=!0)),ut=s+1,i[a]===undefined&&(i[a]=!1),i[b]===undefined&&(i[b]=!1),i[rt]=g,i[v]===undefined&&(i[v]=!0),u.p.treeGridModel==="adjacency"&&(i[ft]=t),u.p.treeGridModel==="nested")if(t!==null){if(c=parseInt(h[o],10),w=$.jgrid.from.call(u,u.p.data),w=w.greaterOrEquals(o,c,{stype:"integer"}),f=w.select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][l]=f[e][l]>c?parseInt(f[e][l],10)+2:f[e][l],f[e][o]=f[e][o]>=c?parseInt(f[e][o],10)+2:f[e][o]);i[l]=c;i[o]=c+1}else{if(c=parseInt($(u).jqGrid("getCol",o,!1,"max"),10),f=$.jgrid.from.call(u,u.p.data).greater(l,c,{stype:"integer"}).select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][l]=parseInt(f[e][l],10)+2);if(f=$.jgrid.from.call(u,u.p.data).greater(o,c,{stype:"integer"}).select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][o]=parseInt(f[e][o],10)+2);i[l]=c+1;i[o]=c+2}(t===null||$(u).jqGrid("isNodeLoaded",h)||tt)&&($(u).jqGrid("addRowData",n,i,k,y),$(u).jqGrid("setTreeNode",s,ut));h&&!h[a]&&r&&$(u.rows[it]).find("div.treeclick").click()}}});$.fn.jqDrag=function(n){return y(this,n,"d")};$.fn.jqResize=function(n,t){return y(this,n,"r",t)};$.jqDnR={dnr:{},e:0,drag:function(n){return i.k=="d"?r.css({left:i.X+n.pageX-i.pX,top:i.Y+n.pageY-i.pY}):(r.css({width:Math.max(n.pageX-i.pX+i.W,0),height:Math.max(n.pageY-i.pY+i.H,0)}),f&&o.css({width:Math.max(n.pageX-f.pX+f.W,0),height:Math.max(n.pageY-f.pY+f.H,0)})),!1},stop:function(){$(document).unbind("mousemove",c.drag).unbind("mouseup",c.stop)}};var c=$.jqDnR,i=c.dnr,r=c.e,o,f,y=function(n,t,u,e){return n.each(function(){t=t?$(t,n):n;t.bind("mousedown",{e:n,k:u},function(n){var u=n.data,t={};if(r=u.e,o=e?$(e):!1,r.css("position")!="relative")try{r.position(t)}catch(h){}if(i={X:t.left||s("left")||0,Y:t.top||s("top")||0,W:s("width")||r[0].scrollWidth||0,H:s("height")||r[0].scrollHeight||0,pX:n.pageX,pY:n.pageY,k:u.k},f=o&&u.k!="d"?{X:t.left||l("left")||0,Y:t.top||l("top")||0,W:o[0].offsetWidth||l("width")||0,H:o[0].offsetHeight||l("height")||0,pX:n.pageX,pY:n.pageY,k:u.k}:!1,$("input.hasDatepicker",r[0])[0])try{$("input.hasDatepicker",r[0]).datepicker("hide")}catch(c){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},s=function(n){return parseInt(r.css(n),10)||!1},l=function(n){return parseInt(o.css(n),10)||!1};$.fn.jqm=function(n){var i={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return u[this._jqm].c=$.extend({},u[this._jqm].c,n);h++;this._jqm=h;u[h]={c:$.extend(i,$.jqm.params,n),a:t,w:$(this).addClass("jqmID"+h),s:h};i.trigger&&$(this).jqmAddTrigger(i.trigger)})};$.fn.jqmAddClose=function(n){return b(this,n,"jqmHide")};$.fn.jqmAddTrigger=function(n){return b(this,n,"jqmShow")};$.fn.jqmShow=function(n){return this.each(function(){$.jqm.open(this._jqm,n)})};$.fn.jqmHide=function(n){return this.each(function(){$.jqm.close(this._jqm,n)})};$.jqm={hash:{},open:function(n,i){var r=u[n],f=r.c,l="."+f.closeClass,h=parseInt(r.w.css("z-index")),c,o,s;return(h=h>0?h:3e3,c=$("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":h-1,opacity:f.overlay/100}),r.a)?t:(r.t=i,r.a=!0,r.w.css("z-index",h),f.modal?(e[0]||setTimeout(function(){new w("bind")},1),e.push(n)):f.overlay>0?f.closeoverlay&&r.w.jqmAddClose(c):c=t,r.o=c?c.addClass(f.overlayClass).prependTo("body"):t,f.ajax?(o=f.target||r.w,s=f.ajax,o=typeof o=="string"?$(o,r.w):$(o),s=s.substr(0,1)==="@"?$(i).attr(s.substring(1)):s,o.html(f.ajaxText).load(s,function(){f.onLoad&&f.onLoad.call(this,r);l&&r.w.jqmAddClose($(l,r.w));p(r)})):l&&r.w.jqmAddClose($(l,r.w)),f.toTop&&r.o&&r.w.before('<span id="jqmP'+r.w[0]._jqm+'"><\/span>').insertAfter(r.o),f.onShow?f.onShow(r):r.w.show(),p(r),t)},close:function(n){var i=u[n];if(!i.a)return t;if(i.a=t,e[0]&&(e.pop(),e[0]||new w("unbind")),i.c.toTop&&i.o&&$("#jqmP"+i.w[0]._jqm).after(i.w).remove(),i.c.onHide)i.c.onHide(i);else i.w.hide(),i.o&&i.o.remove();return t},params:{}};var h=0,u=$.jqm.hash,e=[],t=!1,p=function(n){s(n)},s=function(n){try{$(":input:visible",n.w)[0].focus()}catch(t){}},w=function(n){$(document)[n]("keypress",a)[n]("keydown",a)[n]("mousedown",a)},a=function(n){var t=u[e[e.length-1]],i=!$(n.target).parents(".jqmID"+t.s)[0];return i&&($(".jqmID"+t.s).each(function(){var r=$(this),t=r.offset();if(t.top<=n.pageY&&n.pageY<=t.top+r.height()&&t.left<=n.pageX&&n.pageX<=t.left+r.width())return i=!1,!1}),s(t)),!i},b=function(n,i,r){return n.each(function(){var n=this._jqm;$(i).each(function(){this[r]||(this[r]=[],$(this).click(function(){var n,i;for(n in{jqmShow:1,jqmHide:1})for(i in this[n])u[this[n][i]]&&u[this[n][i]].w[n](this);return t}));this[r].push(n)})})};$.fmatter={};$.extend($.fmatter,{isBoolean:function(n){return typeof n=="boolean"},isObject:function(n){return n&&(typeof n=="object"||$.isFunction(n))||!1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(n){return!this.isString(n)&&this.isValue(n)?!1:this.isValue(n)?(n=$.trim(n).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),n===""):!0}});$.fn.fmatter=function(n,t,i,r,u){var f=t;i=$.extend({},$.jgrid.getRegional(this,"formatter"),i);try{f=$.fn.fmatter[n].call(this,t,i,r,u)}catch(e){}return f};$.fmatter.util={NumberFormat:function(n,t){var o,s,c,u,h,f;if($.fmatter.isNumber(n)||(n*=1),$.fmatter.isNumber(n)){var l=n<0,i=String(n),e=t.decimalSeparator||".",r;if($.fmatter.isNumber(t.decimalPlaces)&&(o=t.decimalPlaces,s=Math.pow(10,o),i=String(Math.round(n*s)/s),r=i.lastIndexOf("."),o>0))for(r<0?(i+=e,r=i.length-1):e!=="."&&(i=i.replace(".",e));i.length-1-r<o;)i+="0";if(t.thousandsSeparator){for(c=t.thousandsSeparator,r=i.lastIndexOf(e),r=r>-1?r:i.length,u=i.substring(r),h=-1,f=r;f>0;f--)h++,h%3==0&&f!==r&&(!l||f>1)&&(u=c+u),u=i.charAt(f-1)+u;i=u}return i=t.prefix?t.prefix+i:i,t.suffix?i+t.suffix:i}return n}};$.fn.fmatter.defaultFormat=function(n,t){return $.fmatter.isValue(n)&&n!==""?n:t.defaultValue||"&#160;"};$.fn.fmatter.email=function(n,t){return $.fmatter.isEmpty(n)?$.fn.fmatter.defaultFormat(n,t):'<a href="mailto:'+n+'">'+n+"<\/a>"};$.fn.fmatter.checkbox=function(n,t){var i=$.extend({},t.checkbox),r,u;return t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),r=i.disabled===!0?'disabled="disabled"':"",($.fmatter.isEmpty(n)||n===undefined)&&(n=$.fn.fmatter.defaultFormat(n,i)),n=String(n),n=(n+"").toLowerCase(),u=n.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+u+' value="'+n+'" offval="no" '+r+"/>"};$.fn.fmatter.link=function(n,t){var i={target:t.target},r="";return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(r="target="+i.target),!$.fmatter.isEmpty(n))?"<a "+r+' href="'+n+'">'+n+"<\/a>":$.fn.fmatter.defaultFormat(n,t)};$.fn.fmatter.showlink=function(n,t){var i={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName},r="",u;return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(r="target="+i.target),u=i.baseLinkUrl+i.showAction+"?"+i.idName+"="+t.rowId+i.addParam,$.fmatter.isString(n)||$.fmatter.isNumber(n))?"<a "+r+' href="'+u+'">'+n+"<\/a>":$.fn.fmatter.defaultFormat(n,t)};$.fn.fmatter.integer=function(n,t){var i=$.extend({},t.integer);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(n))?i.defaultValue:$.fmatter.util.NumberFormat(n,i)};$.fn.fmatter.number=function(n,t){var i=$.extend({},t.number);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(n))?i.defaultValue:$.fmatter.util.NumberFormat(n,i)};$.fn.fmatter.currency=function(n,t){var i=$.extend({},t.currency);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(n))?i.defaultValue:$.fmatter.util.NumberFormat(n,i)};$.fn.fmatter.date=function(n,t,i,r){var u=$.extend({},t.date);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(u=$.extend({},u,t.colModel.formatoptions)),!u.reformatAfterEdit&&r==="edit")?$.fn.fmatter.defaultFormat(n,t):$.fmatter.isEmpty(n)?$.fn.fmatter.defaultFormat(n,t):$.jgrid.parseDate.call(this,u.srcformat,n,u.newformat,u)};$.fn.fmatter.select=function(n,t){var i,u,e,h,o,f,r,c,l,s;if(n=String(n),i=!1,u=[],t.colModel.formatoptions!==undefined?(i=t.colModel.formatoptions.value,e=t.colModel.formatoptions.separator===undefined?":":t.colModel.formatoptions.separator,h=t.colModel.formatoptions.delimiter===undefined?";":t.colModel.formatoptions.delimiter):t.colModel.editoptions!==undefined&&(i=t.colModel.editoptions.value,e=t.colModel.editoptions.separator===undefined?":":t.colModel.editoptions.separator,h=t.colModel.editoptions.delimiter===undefined?";":t.colModel.editoptions.delimiter),i)if(o=(t.colModel.editoptions!=null&&t.colModel.editoptions.multiple===!0)==!0?!0:!1,f=[],o&&(f=n.split(","),f=$.map(f,function(n){return $.trim(n)})),$.fmatter.isString(i)){for(c=i.split(h),l=0,s=0;s<c.length;s++)if(r=c[s].split(e),r.length>2&&(r[1]=$.map(r,function(n,t){if(t>0)return n}).join(e)),o)$.inArray(r[0],f)>-1&&(u[l]=r[1],l++);else if($.trim(r[0])===$.trim(n)){u[0]=r[1];break}}else $.fmatter.isObject(i)&&(o?u=$.map(f,function(n){return i[n]}):u[0]=i[n]||"");return n=u.join(", "),n===""?$.fn.fmatter.defaultFormat(n,t):n};$.fn.fmatter.rowactions=function(n){var h=$(this).closest("tr.jqgrow"),u=h.attr("id"),l=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),i=$("#"+l),e=i[0],f=e.p,o=f.colModel[$.jgrid.getCellIndex(this)],r=o.frozen?$("tr#"+u+" td:eq("+$.jgrid.getCellIndex(this)+") > div",i):$(this).parent(),t={extraparam:{}},a=function(n,i){$.isFunction(t.afterSave)&&t.afterSave.call(e,n,i);r.find("div.ui-inline-edit,div.ui-inline-del").show();r.find("div.ui-inline-save,div.ui-inline-cancel").hide()},c=function(n){$.isFunction(t.afterRestore)&&t.afterRestore.call(e,n);r.find("div.ui-inline-edit,div.ui-inline-del").show();r.find("div.ui-inline-save,div.ui-inline-cancel").hide()},s;o.formatoptions!==undefined&&(t=$.extend(t,o.formatoptions));f.editOptions!==undefined&&(t.editOptions=f.editOptions);f.delOptions!==undefined&&(t.delOptions=f.delOptions);h.hasClass("jqgrid-new-row")&&(t.extraparam[f.prmNames.oper]=f.prmNames.addoper);s={keys:t.keys,oneditfunc:t.onEdit,successfunc:t.onSuccess,url:t.url,extraparam:t.extraparam,aftersavefunc:a,errorfunc:t.onError,afterrestorefunc:c,restoreAfterError:t.restoreAfterError,mtype:t.mtype};switch(n){case"edit":i.jqGrid("editRow",u,s);r.find("div.ui-inline-edit,div.ui-inline-del").hide();r.find("div.ui-inline-save,div.ui-inline-cancel").show();i.triggerHandler("jqGridAfterGridComplete");break;case"save":i.jqGrid("saveRow",u,s)&&(r.find("div.ui-inline-edit,div.ui-inline-del").show(),r.find("div.ui-inline-save,div.ui-inline-cancel").hide(),i.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":i.jqGrid("restoreRow",u,c);r.find("div.ui-inline-edit,div.ui-inline-del").show();r.find("div.ui-inline-save,div.ui-inline-cancel").hide();i.triggerHandler("jqGridAfterGridComplete");break;case"del":i.jqGrid("delGridRow",u,t.delOptions);break;case"formedit":i.jqGrid("setSelection",u);i.jqGrid("editGridRow",u,t.editOptions)}};$.fn.fmatter.actions=function(n,t){var f={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},r=t.rowId,u="",i,e=$.jgrid.getRegional(this,"nav");return(t.colModel.formatoptions!==undefined&&(f=$.extend(f,t.colModel.formatoptions)),r===undefined||$.fmatter.isEmpty(r))?"":(f.editformbutton?(i="id='jEditButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",u+="<div title='"+e.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"):f.editbutton&&(i="id='jEditButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",u+="<div title='"+e.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='ui-icon ui-icon-pencil'><\/span><\/div>"),f.delbutton&&(i="id='jDeleteButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",u+="<div title='"+e.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+i+"><span class='ui-icon ui-icon-trash'><\/span><\/div>"),i="id='jSaveButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",u+="<div title='"+e.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+i+"><span class='ui-icon ui-icon-disk'><\/span><\/div>",i="id='jCancelButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",u+="<div title='"+e.canceltitle+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+i+"><span class='ui-icon ui-icon-cancel'><\/span><\/div>","<div style='margin-left:8px;'>"+u+"<\/div>")};$.unformat=function(n,t,i,r){var f,s=t.colModel.formatter,u=t.colModel.formatoptions||{},e,c=/([\.\*\_\'\(\)\{\}\+\?\\])/g,l=t.colModel.unformat||$.fn.fmatter[s]&&$.fn.fmatter[s].unformat,h,o,a;if(l!==undefined&&$.isFunction(l))f=l.call(this,$(n).text(),t,n);else if(s!==undefined&&$.fmatter.isString(s)){h=$.jgrid.getRegional(this,"formatter")||{};switch(s){case"integer":u=$.extend({},h.integer,u);e=u.thousandsSeparator.replace(c,"\\$1");o=new RegExp(e,"g");f=$(n).text().replace(o,"");break;case"number":u=$.extend({},h.number,u);e=u.thousandsSeparator.replace(c,"\\$1");o=new RegExp(e,"g");f=$(n).text().replace(o,"").replace(u.decimalSeparator,".");break;case"currency":u=$.extend({},h.currency,u);e=u.thousandsSeparator.replace(c,"\\$1");o=new RegExp(e,"g");f=$(n).text();u.prefix&&u.prefix.length&&(f=f.substr(u.prefix.length));u.suffix&&u.suffix.length&&(f=f.substr(0,f.length-u.suffix.length));f=f.replace(o,"").replace(u.decimalSeparator,".");break;case"checkbox":a=t.colModel.editoptions?t.colModel.editoptions.value.split(":"):["Yes","No"];f=$("input",n).is(":checked")?a[0]:a[1];break;case"select":f=$.unformat.select(n,t,i,r);break;case"actions":return"";default:f=$(n).text()}}return f!==undefined?f:r===!0?$(n).text():$.jgrid.htmlDecode($(n).html())};$.unformat.select=function(n,t,i,r){var h=[],o=$(n).text(),a,v,c;if(r===!0)return o;var f=$.extend({},t.colModel.formatoptions!==undefined?t.colModel.formatoptions:t.colModel.editoptions),y=f.separator===undefined?":":f.separator,p=f.delimiter===undefined?";":f.delimiter;if(f.value){var s=f.value,l=f.multiple===!0?!0:!1,e=[],u;if(l&&(e=o.split(","),e=$.map(e,function(n){return $.trim(n)})),$.fmatter.isString(s)){for(a=s.split(p),v=0,c=0;c<a.length;c++)if(u=a[c].split(y),u.length>2&&(u[1]=$.map(u,function(n,t){if(t>0)return n}).join(y)),l)$.inArray($.trim(u[1]),e)>-1&&(h[v]=u[0],v++);else if($.trim(u[1])===$.trim(o)){h[0]=u[0];break}}else($.fmatter.isObject(s)||$.isArray(s))&&(l||(e[0]=o),h=$.map(e,function(n){var t;return $.each(s,function(i,r){if(r===n)return t=i,!1}),t!==undefined?t:void 0}));return h.join(", ")}return o||""};$.unformat.date=function(n,t){var i=$.jgrid.getRegional(this,"formatter.date")||{};return(t.formatoptions!==undefined&&(i=$.extend({},i,t.formatoptions)),!$.fmatter.isEmpty(n))?$.jgrid.parseDate.call(this,i.newformat,n,i.srcformat,i):$.fn.fmatter.defaultFormat(n,t)};window.jqGridUtils={stringify:function(n){return JSON.stringify(n,function(n,t){return typeof t=="function"?t.toString():t})},parse:function(n){return JSON.parse(n,function(key,value){return typeof value=="string"&&value.indexOf("function")!==-1?eval("("+value+")"):value})},encode:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(n,t){var i=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),r=this,f=function(n,t){return n==="#text"?i.encode?r.encode(t):t:typeof t=="function"?"<"+n+"><![CDATA["+t+"]\]><\/"+n+">\n":t===""?"<"+n+">__EMPTY_STRING_<\/"+n+">\n":"<"+n+">"+(i.encode?r.encode(t):t)+"<\/"+n+">\n"},e=function(n,t){for(var i,r=[],o=0;o<t.length;o++)i=t[o],r[r.length]=typeof i=="undefined"||i==null?"<"+n+" />":typeof i=="object"&&i.constructor==Array?e(n,i):typeof i=="object"?u(n,i):f(n,i);return r.length||(r[0]="<"+n+">__EMPTY_ARRAY_<\/"+n+">\n"),r.join("")},u=function(n,t){var c=[],a=[],s,o,l,h;for(s in t)t.hasOwnProperty(s)&&(o=t[s],s.charAt(0)!==i.attr_prefix?c[c.length]=o==null?"<"+s+" />":typeof o=="object"&&o.constructor===Array?e(s,o):typeof o=="object"?u(s,o):f(s,o):a[a.length]=" "+s.substring(1)+'="'+(i.encode?r.encode(o):o)+'"');return l=a.join(""),h=c.join(""),n==null||(h=c.length>0?h.match(/\n/)?"<"+n+l+">\n"+h+"<\/"+n+">\n":"<"+n+l+">"+h+"<\/"+n+">\n":"<"+n+l+" />\n"),h},o=u(null,n);return i.xmlDecl+o},xmlToJSON:function(n,t){var r=$.extend({force_array:[],attr_prefix:"-"},t||{}),__force_array,u,f;if(n){if(__force_array={},r.force_array)for(u=0;u<r.force_array.length;u++)__force_array[r.force_array[u]]=1;typeof n=="string"&&(n=$.parseXML(n));n.documentElement&&(n=n.documentElement);var e=function(hash,key,cnts,val){if(typeof val=="string")if(val.indexOf("function")!==-1)val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(cnts===1&&(hash[key]=[]),hash[key][hash[key].length]=val):cnts===1?hash[key]=val:cnts===2?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},o=function(n){var l,u,f,t,i,s,h,c;if(n.nodeType!==7){if(n.nodeType===3||n.nodeType===4)return(l=n.nodeValue.match(/[^\x00-\x20]/),l==null)?void 0:n.nodeValue;if(f={},n.attributes&&n.attributes.length)for(u={},t=0;t<n.attributes.length;t++)(i=n.attributes[t].nodeName,typeof i=="string")&&(s=n.attributes[t].nodeValue,s)&&(i=r.attr_prefix+i,typeof f[i]=="undefined"&&(f[i]=0),f[i]++,e(u,i,f[i],s));if(n.childNodes&&n.childNodes.length){for(h=!0,u&&(h=!1),t=0;t<n.childNodes.length&&h;t++)(c=n.childNodes[t].nodeType,c!==3&&c!==4)&&(h=!1);if(h)for(u||(u=""),t=0;t<n.childNodes.length;t++)u+=n.childNodes[t].nodeValue;else for(u||(u={}),t=0;t<n.childNodes.length;t++)(i=n.childNodes[t].nodeName,typeof i=="string")&&(s=o(n.childNodes[t]),s)&&(typeof f[i]=="undefined"&&(f[i]=0),f[i]++,e(u,i,f[i],s))}return u}},i=o(n);return __force_array[n.nodeName]&&(i=[i]),n.nodeType!==11&&(f={},f[n.nodeName]=i,i=f),i}}}});
//# sourceMappingURL=jqueryGrid.min.js.map
